<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Mirreal Note]]></title>
  <link href="http://blog.mirreal.net/atom.xml" rel="self"/>
  <link href="http://blog.mirreal.net/"/>
  <updated>2017-07-26T19:02:54+08:00</updated>
  <id>http://blog.mirreal.net/</id>
  <author>
    <name><![CDATA[Mirreal Ellison]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[é¢å‘åˆå­¦è€…çš„é«˜é˜¶ç»„ä»¶ä»‹ç»]]></title>
    <link href="http://blog.mirreal.net/blog/2017/07/19/higher-order-components-for-beginners/"/>
    <updated>2017-07-19T18:59:37+08:00</updated>
    <id>http://blog.mirreal.net/blog/2017/07/19/higher-order-components-for-beginners</id>
    <content type="html"><![CDATA[<blockquote><p>ä½œè€…ï¼šBrandon Newton</p>

<p>åŸæ–‡ï¼š<a href="https://btnwtn.com/articles/higher-order-components-for-beginners">Higher-Order Components (HOCs) for Beginners</a></p>

<p>è°ˆç‚¹ï¼šä¸€ç¯‡é¢å‘åˆå­¦è€…çš„ HOC ä»‹ç»ã€‚é«˜é˜¶ç»„ä»¶å¬èµ·æ¥æŒºå”¬äººçš„ï¼Œåªçœ‹åå­—ææ€•ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“æ˜ç™½ç©¶ç«Ÿæ˜¯ä½•ç‰©ï¼Œè€Œä¸”é€šå¸¸æ¥è®²é«˜é˜¶ç»„ä»¶å¹¶ä¸æ˜¯ç»„ä»¶ï¼Œè€Œæ˜¯æ¥å—ç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”è¿”å›ç»„ä»¶çš„å‡½æ•°ã€‚æ—©æœŸåˆ©ç”¨ ES5 çš„ mixin è¯­æ³•æ¥åšçš„äº‹ï¼ŒåŸºæœ¬éƒ½å¯ä»¥ä½¿ç”¨é«˜é˜¶ç»„ä»¶ä»£æ›¿ï¼Œè€Œä¸”èƒ½åšçš„è¿˜æœ‰æ›´å¤šã€‚</p></blockquote>

<h2>å‰è¨€</h2>

<p>å†™è¿™ç¯‡æ–‡ç« çš„èµ·å› æ˜¯å…¶ä»–å…³äºé«˜é˜¶ç»„ä»¶ï¼ˆHigher-Order Componentsï¼‰çš„æ–‡ç« ï¼ŒåŒ…å«å®˜æ–¹æ–‡æ¡£ï¼Œéƒ½ä»¤åˆå­¦è€…æ„Ÿåˆ°ç›¸å½“å›°æƒ‘ã€‚æˆ‘çŸ¥é“æœ‰é«˜é˜¶ç»„ä»¶è¿™æ ·ä¸€ä¸ªä¸œè¥¿ï¼Œä½†ä¸çŸ¥é“å®ƒåˆ°åº•æœ‰ä»€ä¹ˆç”¨ã€‚æ‰€ä»¥ï¼Œæƒ³é€šè¿‡ä¸€ç¯‡æ–‡ç« æ¥å¯¹é«˜é˜¶ç»„ä»¶æœ‰ä¸€ä¸ªæ›´å¥½çš„ç†è§£ã€‚</p>

<p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ¥è®²ä¸€ä¸‹ JavaScript ä¸­çš„å‡½æ•°ã€‚</p>

<h2>ES6 ç®­å¤´å‡½æ•°ç®€ä»‹</h2>

<p>æ¥ä¸‹æ¥å°†æä¾›ä¸€äº›ç®­å¤´å‡½æ•°çš„ç®€å•ç¤ºä¾‹ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œå¯ä»¥è®¤ä¸ºå®ƒä»¬ä¸æ™®é€šå‡½æ•°åŸºæœ¬ä¸€è‡´ã€‚ä¸‹é¢çš„ä»£ç ä¼šå±•ç¤ºç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="mi">42</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// same as:</span>
</span><span class='line'><span class="p">()</span> <span class="o">=&gt;</span> <span class="mi">42</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// same as:</span>
</span><span class='line'><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="mi">42</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">person</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// same as:</span>
</span><span class='line'><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>é˜…è¯» <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">MDN çš„ç®­å¤´å‡½æ•°æ–‡æ¡£</a> äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p>

<h2>ä½œä¸ºå€¼çš„å‡½æ•°ä¸éƒ¨åˆ†è°ƒç”¨</h2>

<p>å°±åƒæ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ ä¸€æ ·ï¼Œå‡½æ•°ä¹Ÿæ˜¯å€¼ï¼Œæ„å‘³ç€å¯ä»¥åƒä¼ é€’å…¶ä»–æ•°æ®ä¸€æ ·ä¼ é€’å‡½æ•°ï¼Œå¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">execute</span> <span class="o">=</span> <span class="p">(</span><span class="nx">someFunction</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">someFunction</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="nx">execute</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Executed&#39;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¹Ÿå¯ä»¥åœ¨åœ¨å‡½æ•°ä¸­è¿”å›ä¸€ä¸ªå‡½æ•°ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">getOne</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="nx">getOne</span><span class="p">()()</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¹‹æ‰€ä»¥åœ¨ <code>getOne</code> åé¢æœ‰ä¸¤ä¸ª <code>()</code> ï¼Œæ˜¯å› ä¸ºç¬¬ä¸€ä¸ªè¿”å›çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å¦‚ä¸‹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">getOne</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="nx">getOne</span>
</span><span class='line'><span class="c1">//=&gt; () =&gt; () =&gt; 1</span>
</span><span class='line'>
</span><span class='line'><span class="nx">getOne</span><span class="p">()</span>
</span><span class='line'><span class="c1">//=&gt; () =&gt; 1</span>
</span><span class='line'>
</span><span class='line'><span class="nx">getOne</span><span class="p">()()</span>
</span><span class='line'><span class="c1">//=&gt; 1</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä»å‡½æ•°è¿”å›å‡½æ•°å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿½è¸ªåˆå§‹è¾“å…¥å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‡½æ•°æ¥å—ä¸€ä¸ªæ•°å­—ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå°†è¯¥å‚æ•°ä¹˜ä»¥æ–°å‚æ•°çš„å‡½æ•°ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">multiply</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">y</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiply</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">20</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¿™ä¸ªç¤ºä¾‹è·Ÿä¸Šè¿° <code>getOne</code> ä¸€æ ·ï¼Œåœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œè®© x = 5ï¼Œy = 20ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">multiply</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">y</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiply</span>
</span><span class='line'><span class="c1">//=&gt; (x) =&gt; (y) =&gt; x * y</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiply</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; (y) =&gt; 5 * y</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiply</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">20</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; 5 * 20</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨åªä¼ å…¥ä¸€ä¸ªå‚æ•°è°ƒç”¨ <code>multiply</code> å‡½æ•°æ—¶ï¼Œå³éƒ¨åˆ†è°ƒç”¨è¯¥å‡½æ•°ã€‚æ¯”å¦‚ï¼Œ<code>multiply(5)</code> è®²å¾—åˆ°ä¸€ä¸ªå°†å…¶è¾“å…¥å€¼ä¹˜ä»¥ 5 çš„å‡½æ•°ï¼Œ<code>multiply(7)</code> å°†å¾—åˆ°ä¸€ä¸ªå°†å…¶è¾“å…¥å€¼ä¹˜ä»¥ 7 çš„å‡½æ•°ã€‚ä¾æ­¤ç±»æ¨ã€‚é€šè¿‡éƒ¨åˆ†è°ƒç”¨å¯ä»¥åˆ›å»ºä¸€ä¸ªé¢„å®šä¹‰åŠŸèƒ½çš„æ–°å‡½æ•°ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">multiply</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">y</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">multiplyByFive</span> <span class="o">=</span> <span class="nx">multiply</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">multiplyBy100</span> <span class="o">=</span> <span class="nx">multiply</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiplyByFive</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; 100</span>
</span><span class='line'><span class="nx">multiply</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">20</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; 100</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiplyBy100</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; 500</span>
</span><span class='line'><span class="nx">multiply</span><span class="p">(</span><span class="mi">100</span><span class="p">)(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; 500</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¸€å¼€å§‹çœ‹èµ·æ¥ä¼¼ä¹æ²¡ä»€ä¹ˆç”¨ï¼Œä½†æ˜¯ï¼Œé€šè¿‡éƒ¨åˆ†è°ƒç”¨è¿™ç§æ–¹å¼å¯ä»¥ç¼–å†™å¯è¯»æ€§æ›´é«˜ï¼Œæ›´æ˜“äºç†è§£çš„ä»£ç ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¯ä»¥ç”¨ä¸€ç§æ›´æ¸…æ™°çš„æ–¹å¼æ¥ä»£æ›¿ <a href="https://www.styled-components.com/docs/basics#adapting-based-on-props">style-components</a> çš„å‡½æ•°æ’å…¥è¯­æ³•ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// before</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="nx">styled</span><span class="p">.</span><span class="nx">button</span><span class="err">`</span>
</span><span class='line'>  <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{({</span> <span class="nx">theme</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">bgColor</span><span class="p">}</span>
</span><span class='line'>  <span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{({</span> <span class="nx">theme</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">textColor</span><span class="p">}</span>
</span><span class='line'><span class="err">`</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">theme</span><span class="o">=</span><span class="p">{</span><span class="nx">themes</span><span class="p">.</span><span class="nx">primary</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
</span><span class='line'><span class="c1">// after</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">fromTheme</span> <span class="o">=</span> <span class="p">(</span><span class="nx">prop</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="nx">theme</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">theme</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="nx">styled</span><span class="p">.</span><span class="nx">button</span><span class="err">`</span>
</span><span class='line'>  <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">fromTheme</span><span class="p">(</span><span class="s2">&quot;bgColor&quot;</span><span class="p">)}</span>
</span><span class='line'>  <span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">fromTheme</span><span class="p">(</span><span class="s2">&quot;textColor&quot;</span><span class="p">)}</span>
</span><span class='line'><span class="err">`</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">theme</span><span class="o">=</span><span class="p">{</span><span class="nx">themes</span><span class="p">.</span><span class="nx">primary</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°çš„å‡½æ•° <code>fromTheme("textColor")</code>ï¼šå®ƒè¿”å›ä¸€ä¸ªæ¥å—å…·æœ‰ <code>theme</code> å±æ€§çš„å¯¹è±¡çš„å‡½æ•°ï¼š<code>({ theme }) =&gt; theme[prop]</code>ï¼Œç„¶åå†é€šè¿‡åˆå§‹ä¼ å…¥çš„å­—ç¬¦ä¸² <code>"textColor"</code> è¿›è¡ŒæŸ¥æ‰¾ã€‚æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¤šï¼Œå†™ç±»ä¼¼çš„ <code>backgroundColor</code> å’Œ <code>textColor</code> è¿™ç§éƒ¨åˆ†è°ƒç”¨ <code>fromTheme</code> çš„å‡½æ•°ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">fromTheme</span> <span class="o">=</span> <span class="p">(</span><span class="nx">prop</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="nx">theme</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">theme</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">fromTheme</span><span class="p">(</span><span class="s2">&quot;bgColor&quot;</span><span class="p">)</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">textColor</span> <span class="o">=</span> <span class="nx">fromTheme</span><span class="p">(</span><span class="s2">&quot;textColor&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="nx">styled</span><span class="p">.</span><span class="nx">button</span><span class="err">`</span>
</span><span class='line'>  <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">backgroundColor</span><span class="p">}</span>
</span><span class='line'>  <span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">textColor</span><span class="p">}</span>
</span><span class='line'><span class="err">`</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">theme</span><span class="o">=</span><span class="p">{</span><span class="nx">themes</span><span class="p">.</span><span class="nx">primary</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>é«˜é˜¶å‡½æ•°</h2>

<p>é«˜é˜¶å‡½æ•°çš„å®šä¹‰æ˜¯ï¼Œæ¥å—å‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ã€‚å¦‚æœæ›¾ç»ä½¿ç”¨è¿‡ç±»ä¼¼ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">map</a> è¿™æ ·çš„å‡½æ•°ï¼Œå¯èƒ½å·²ç»å¾ˆç†Ÿæ‚‰é«˜é˜¶å‡½æ•°ã€‚å¦‚æœä¸ç†Ÿæ‚‰ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">map</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„éå†çš„æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°åº”ç”¨åˆ°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åƒè¿™æ ·å¯¹ä¸€ä¸ªæ•°ç»„ä½œå¹³æ–¹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">square</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span>
</span><span class='line'>
</span><span class='line'><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">square</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; [ 1, 4, 9 ]</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¯ä»¥å®ç°ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„ <code>map</code> ç‰ˆæœ¬æ¥è¯´æ˜è¿™ä¸ªæ¦‚å¿µï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">map</span> <span class="o">=</span> <span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">array</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="kr">const</span> <span class="nx">mappedArray</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">mappedArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
</span><span class='line'>      <span class="c1">// apply fn with the current element of the array</span>
</span><span class='line'>      <span class="nx">fn</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
</span><span class='line'>    <span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nx">mappedArray</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç„¶åå†ä½¿ç”¨æˆ‘ä»¬çš„ map ç‰ˆæœ¬æ¥å¯¹ä¸€ä¸ªæ•°ç»„ä½œå¹³æ–¹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">square</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span>
</span><span class='line'>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">map</span><span class="p">(</span><span class="nx">square</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
</span><span class='line'><span class="c1">//=&gt; [ 1, 4, 9, 16, 25 ]</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>è¯‘è€…æ³¨ï¼šæˆ‘ä»¬ä¹Ÿå¯ä»¥å°† map æ–¹æ³•ä»å¯¹è±¡ä¸­è§£è€¦å‡ºæ¥ï¼š</p>

<pre><code class="javascript">const map = (fn, array) =&gt; Array.prototype.map.call(array, fn)
</code></pre>

<p>è¿™æ ·ä¹Ÿå¯ä»¥åƒä¸Šè¿°ä¾‹å­ä¸€æ ·è°ƒç”¨ã€‚
æˆ–è€…æ›´å‡½æ•°å¼çš„åšæ³•ï¼Œå†æ¥ç‚¹æŸ¯é‡ŒåŒ–ï¼š</p>

<pre><code class="javascript">const map = array =&gt; fn =&gt; Array.prototype.map.call(array, fn)
</code></pre></blockquote>

<p>æˆ–è€…æ˜¯è¿”å›ä¸€ä¸ª <code>&lt;li&gt;</code>çš„ React å…ƒç´ æ•°ç»„ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">HeroList</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">heroes</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="p">{</span><span class="nx">map</span><span class="p">((</span><span class="nx">hero</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">hero</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">hero</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/li&gt;</span>
</span><span class='line'>    <span class="p">),</span> <span class="nx">heroes</span><span class="p">)}</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/ul&gt;</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">HeroList</span> <span class="nx">heroes</span><span class="o">=</span><span class="p">[</span>
</span><span class='line'>  <span class="s2">&quot;Wonder Woman&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Black Widow&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Spider Man&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Storm&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Deadpool&quot;</span>
</span><span class='line'><span class="p">]</span><span class="o">/&gt;</span>
</span><span class='line'><span class="cm">/*=&gt; (</span>
</span><span class='line'><span class="cm">  &lt;ul&gt;</span>
</span><span class='line'><span class="cm">    &lt;li&gt;Wonder Woman&lt;/li&gt;</span>
</span><span class='line'><span class="cm">    &lt;li&gt;Black Widow&lt;/li&gt;</span>
</span><span class='line'><span class="cm">    &lt;li&gt;Spider Man&lt;/li&gt;</span>
</span><span class='line'><span class="cm">    &lt;li&gt;Storm&lt;/li&gt;</span>
</span><span class='line'><span class="cm">    &lt;li&gt;Deadpool&lt;/li&gt;</span>
</span><span class='line'><span class="cm">  &lt;/ul&gt;</span>
</span><span class='line'><span class="cm">)*/</span>
</span></code></pre></td></tr></table></div></figure>


<h2>é«˜é˜¶ç»„ä»¶</h2>

<p>æˆ‘ä»¬çŸ¥é“ï¼Œé«˜é˜¶å‡½æ•°æ˜¯æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ã€‚åœ¨ React ä¸­ï¼Œä»»ä½•è¿”å› <a href="https://facebook.github.io/react/docs/jsx-in-depth.html">JSX</a> çš„å‡½æ•°éƒ½è¢«ç§°ä¸ºæ— çŠ¶æ€å‡½æ•°ç»„ä»¶ï¼Œç®€ç§°ä¸ºå‡½æ•°ç»„ä»¶ã€‚åŸºæœ¬çš„å‡½æ•°ç»„ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">Title</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">Title</span><span class="o">&gt;</span><span class="nx">Higher</span><span class="o">-</span><span class="nx">Order</span> <span class="nx">Components</span><span class="p">(</span><span class="nx">HOCs</span><span class="p">)</span> <span class="k">for</span> <span class="nx">React</span> <span class="nx">Newbies</span><span class="o">&lt;</span><span class="err">/Title&gt;</span>
</span><span class='line'><span class="c1">//=&gt; &lt;h1&gt;Higher-Order Components(HOCs) for React Newbies&lt;/h1&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>é«˜é˜¶ç»„ä»¶åˆ™æ˜¯<em>æ¥å—ç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›ç»„ä»¶çš„å‡½æ•°</em>ã€‚å¦‚ä½•ä½¿ç”¨ä¼ å…¥ç»„ä»¶å®Œå…¨å–å†³äºä½ ï¼Œç”šè‡³å¯ä»¥å®Œå…¨å¿½è§†å®ƒï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Technically an HOC</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">ignore</span> <span class="o">=</span> <span class="p">(</span><span class="nx">anything</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;:</span><span class="p">)</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">IgnoreHeroList</span> <span class="o">=</span> <span class="nx">ignore</span><span class="p">(</span><span class="nx">HeroList</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">IgnoreHeroList</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="c1">//=&gt; &lt;h1&gt;:)&lt;/h1&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¯ä»¥ç¼–å†™ä¸€ä¸ªå°†è¾“å…¥è½¬æ¢æˆå¤§å†™çš„ HOCï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">yell</span> <span class="o">=</span> <span class="p">(</span><span class="nx">PassedComponent</span><span class="p">)</span> <span class="o">=&gt;</span>
</span><span class='line'>  <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="nx">PassedComponent</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="p">{</span><span class="nx">children</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()}</span><span class="o">!</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="err">/PassedComponent&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">Title</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">AngryTitle</span> <span class="o">=</span> <span class="nx">yell</span><span class="p">(</span><span class="nx">Title</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">AngryTitle</span><span class="o">&gt;</span><span class="nx">Whatever</span><span class="o">&lt;</span><span class="err">/AngryTitle&gt;</span>
</span><span class='line'><span class="c1">//=&gt; &lt;h1&gt;WHATEVER!&lt;/h1&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä½ ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªæœ‰çŠ¶æ€ç»„ä»¶ï¼Œå› ä¸º JavaScript ä¸­çš„ç±»ä¸è¿‡æ˜¯å‡½æ•°çš„è¯­æ³•ç³–ã€‚è¿™æ ·å°±å¯ä»¥ä½¿ç”¨åˆ° React ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ï¼Œæ¯”å¦‚ <code>componentDidMount</code>ã€‚è¿™æ˜¯ HOCs çœŸæ­£æœ‰ç”¨çš„åœ°æ–¹ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥åšä¸€äº›ç¨å¾®æœ‰è¶£ç‚¹çš„äº‹ï¼Œæ¯”å¦‚å°† HTTP è¯·æ±‚çš„ç»“æœä¼ é€’ç»™å‡½æ•°ç»„ä»¶ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">withGists</span> <span class="o">=</span> <span class="p">(</span><span class="nx">PassedComponent</span><span class="p">)</span> <span class="o">=&gt;</span>
</span><span class='line'>  <span class="kr">class</span> <span class="nx">WithGists</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">gists</span><span class="o">:</span> <span class="p">[]</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">fetch</span><span class="p">(</span><span class="s2">&quot;https://api.github.com/gists/public&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">gists</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
</span><span class='line'>        <span class="nx">gists</span><span class="o">:</span> <span class="nx">gists</span>
</span><span class='line'>      <span class="p">}))</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">(</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">PassedComponent</span>
</span><span class='line'>          <span class="p">{...</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">}</span>
</span><span class='line'>          <span class="nx">gists</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">gists</span><span class="p">}</span>
</span><span class='line'>        <span class="o">/&gt;</span>
</span><span class='line'>      <span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">Gists</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">gists</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">gists</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)}</span><span class="o">&lt;</span><span class="err">/pre&gt;</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">GistsList</span> <span class="o">=</span> <span class="nx">withGists</span><span class="p">(</span><span class="nx">Gists</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">GistsList</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="c1">//=&gt; Before api request finishes:</span>
</span><span class='line'><span class="c1">// &lt;Gists gists={[]} /&gt;</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//=&gt; After api request finishes:</span>
</span><span class='line'><span class="c1">// &lt;Gists gists={[</span>
</span><span class='line'><span class="c1">//  { /* â€¦ */ },</span>
</span><span class='line'><span class="c1">//  { /* â€¦ */ },</span>
</span><span class='line'><span class="c1">//  { /* â€¦ */ }</span>
</span><span class='line'><span class="c1">// ]} /&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>withGists</code> ä¼šä¼ é€’ gist api è°ƒç”¨çš„ç»“æœï¼Œå¹¶ä¸”ä½ å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶ä¸Šä½¿ç”¨ã€‚<a href="https://codesandbox.io/embed/o2YpJnpDj">ç‚¹å‡»è¿™é‡Œ</a> å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ›´åŠ å®Œæ•´çš„ä¾‹å­ã€‚</p>

<h2>ç»“è®ºï¼šé«˜é˜¶ç»„ä»¶æ˜¯ ğŸ”¥ğŸ”¥ğŸ”¥</h2>

<p>react-redux ä¹Ÿæ˜¯ä½¿ç”¨ HOCï¼Œ <a href="https://github.com/reactjs/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options">connect</a> å°†åº”ç”¨ store çš„å€¼ä¼ é€’åˆ°â€œå·²è¿æ¥â€ çš„ç»„ä»¶ã€‚å®ƒè¿˜ä¼šæ‰§è¡Œä¸€äº›é”™è¯¯æ£€æŸ¥å’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¼˜åŒ–ï¼Œå¦‚æœæ‰‹åŠ¨å®Œæˆå°†å¯¼è‡´ç¼–å†™å¤§é‡é‡å¤ä»£ç ã€‚</p>

<p>å¦‚æœä½ å‘ç°è‡ªå·±åœ¨ä¸åŒåœ°æ–¹ç¼–å†™äº†å¤§é‡çš„ä»£ç ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥å°†ä»£ç é‡æ„æˆå¯é‡ç”¨çš„ HOCã€‚</p>

<p>HOCs éå¸¸å…·æœ‰è¡¨ç°åŠ›ï¼Œå¯ä»¥ä½¿ç”¨å®ƒä»¬åˆ›é€ å¾ˆå¤šå¾ˆé…·çš„ä¸œè¥¿ã€‚</p>

<p>å°½å¯èƒ½åœ°ä¿æŒä½ çš„ HOC ç®€å•ï¼Œ<em>ä¸è¦ç¼–å†™éœ€è¦é˜…è¯»é•¿ç¯‡å¤§è®ºæ‰èƒ½ç†è§£çš„ä»£ç </em>ã€‚</p>

<h3>é™„åŠ ç»ƒä¹ </h3>

<p>ä¸‹é¢æœ‰ä¸€äº›ç»ƒä¹ ï¼Œæ¥å·©å›ºå¯¹ HOC çš„ç†è§£ï¼š</p>

<ul>
<li>å†™ä¸€ä¸ªåè½¬å…¶è¾“å…¥çš„ HOC</li>
<li>ç¼–å†™ä¸€ä¸ªHOCï¼Œå°† API ä¸­çš„æ•°æ®æä¾›ç»™ç»„ä»¶</li>
<li>å†™ä¸€ä¸ªHOCæ¥å®ç° <a href="https://facebook.github.io/react/docs/react-component.html#shouldcomponentupdate"><code>shouldComponentUpdate</code></a>ï¼Œ<a href="https://facebook.github.io/react/docs/optimizing-performance.html#avoid-reconciliation">ä»¥é¿å…æ›´æ–°</a>ã€‚</li>
<li>ç¼–å†™ä¸€ä¸ª HOCï¼Œä½¿ç”¨ <a href="https://facebook.github.io/react/docs/react-api.html#react.children.toarray"><code>React.Children.toArray</code></a> å¯¹ä¼ å…¥ç»„ä»¶å­å…ƒç´ è¿›è¡Œæ’åºã€‚</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CSS Animations vs Web Animations API]]></title>
    <link href="http://blog.mirreal.net/blog/2017/06/26/css-animations-vs-web-animations-api-slash/"/>
    <updated>2017-06-26T20:47:08+08:00</updated>
    <id>http://blog.mirreal.net/blog/2017/06/26/css-animations-vs-web-animations-api-slash</id>
    <content type="html"><![CDATA[<blockquote><p>ä½œè€…ï¼šOllie Williams</p>

<p>åŸæ–‡ï¼š<a href="https://css-tricks.com/css-animations-vs-web-animations-api/">CSS Animations vs Web Animations API</a></p></blockquote>

<p>åœ¨  JavaScript æœ‰ä¸€ä¸ªåŸç”ŸåŠ¨ç”» API å« Web Animations APIï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ç®€ç§°ä¸º WAAPIã€‚MDN ä¸Šå·²ç»æœ‰ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API">å¾ˆå¥½çš„æ–‡æ¡£</a>ï¼Œè€Œä¸”ï¼ŒDan Wilson ä¸ºæ­¤å†™äº† <a href="http://danielcwilson.com/blog/2015/07/animations-part-1/">ä¸€ä¸ªå¾ˆæ£’çš„æ–‡ç« ç³»åˆ—</a>ã€‚</p>

<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å¯¹æ¯”ä¸€ä¸‹ WAAPI å’Œ CSS åŠ¨ç”»ã€‚</p>

<h2>å…³äºæµè§ˆå™¨æ”¯æŒ</h2>

<p>å°½ç®¡æµè§ˆå™¨åŸç”Ÿæ”¯æŒä»ç„¶æœ‰é™ï¼Œä½† WAAPI æœ‰ä¸€ä¸ªå…¨é¢å’Œå¼ºå¤§çš„ <a href="https://github.com/web-animations/web-animations-js">polyfill</a>ï¼Œä½¿å¾—ç°åœ¨å°±èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚</p>

<p>åŒæ ·åœ°ï¼Œå¯ä»¥åœ¨ <a href="https://github.com/web-animations/web-animations-js">Can I Use</a> æŸ¥çœ‹æµè§ˆå™¨å…¼å®¹æ€§æ•°æ®ã€‚ç„¶è€Œï¼Œè¿™å¹¶æ²¡æœ‰æä¾›å¾ˆå¥½çš„ä¿¡æ¯æ¥æ”¯æŒ WAAPI çš„æ‰€æœ‰å­åŠŸèƒ½ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæ£€æŸ¥å·¥å…·ï¼š</p>

<p>See the Pen <a href="https://codepen.io/danwilson/pen/xGBKVq/">WAAPI Browser Support Test</a> by Dan Wilson (<a href="https://codepen.io/danwilson">@danwilson</a>) on <a href="https://codepen.io/">CodePen</a>.</p>

<p>è¦æƒ³å†æ²¡æœ‰ polyfill çš„æƒ…å†µä¸‹ä½“éªŒæ‰€æœ‰åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨ Firefox Nightlyã€‚</p>

<h2>WAAPI çš„åŸºç¡€çŸ¥è¯†</h2>

<p>å¦‚æœä½ æ›¾ç»ä½¿ç”¨ jQuery  çš„ <code>.animate()</code>ï¼Œé‚£ä¹ˆåº”è¯¥ä¼šè§‰å¾— WAAPI çš„åŸºæœ¬è¯­æ³•çœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.animate-me&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nx">element</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">keyframes</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>animate</code> æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå…³é”®å¸§å’ŒæŒç»­æ—¶é—´ã€‚ä¸ jQuery ç›¸æ¯”çš„ä¼˜åŠ¿æ˜¯ï¼Œä¸ä»…æ˜¯æµè§ˆå™¨å†…ç½®ï¼Œè€Œä¸”æ€§èƒ½ä¹Ÿæ›´å¥½ã€‚</p>

<p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå…³é”®å¸§ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æ˜¯åŠ¨ç”»ä¸­çš„ä¸€ä¸ªå…³é”®å¸§ã€‚çœ‹è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">keyframes</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>  <span class="p">{</span> <span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span> <span class="p">},</span>
</span><span class='line'>  <span class="p">{</span> <span class="nx">opacity</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</span><span class='line'><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒç»­æ—¶é—´ï¼ŒæŒ‡çš„æ˜¯æƒ³è¦åŠ¨ç”»æŒç»­å¤šä¹…ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­æ˜¯ 1000 æ¯«ç§’ã€‚æ¥ä¸‹æ¥çœ‹ä¸€ä¸ªæ›´ä»¤äººå…´å¥‹çš„ä¾‹å­ã€‚</p>

<h2>ç”¨ WAAPI é‡æ–°åˆ›å»ºä¸€ä¸ª animista çš„ CSS åŠ¨ç”»</h2>

<p>è¿™é‡Œæœ‰ä¸€äº›ä» <a href="http://animista.net/">animista</a> æ‹‰å–çš„ CSS ä»£ç ï¼Œè¢«ç§°ä¸º slide-in-blurred-top çš„å…¥åœºåŠ¨ç”»ã€‚çœ‹èµ·æ¥å¾ˆæ¼‚äº®</p>

<p>åœ¨ <a href="http://animista.net/play/entrances/slide-in-blurred/slide-in-blurred-top">å®é™…PERF</a> æ¯”è¿™ä¸ª GIF æ•ˆæœå¥½å¾ˆå¤šã€‚</p>

<p>ä»¥ä¸‹æ˜¯ CSS ä¸­çš„å…³é”®å¸§ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">0</span><span class="o">%</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">transform</span><span class="o">:</span> <span class="n">translateY</span><span class="p">(</span><span class="m">-1000px</span><span class="p">)</span> <span class="n">scaleY</span><span class="p">(</span><span class="m">2</span><span class="o">.</span><span class="m">5</span><span class="p">)</span> <span class="n">scaleX</span><span class="p">(</span><span class="o">.</span><span class="m">2</span><span class="p">);</span>
</span><span class='line'>  <span class="n">transform</span><span class="o">-</span><span class="n">origin</span><span class="o">:</span> <span class="m">50%</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="n">filter</span><span class="o">:</span> <span class="n">blur</span><span class="p">(</span><span class="m">40px</span><span class="p">);</span>
</span><span class='line'>  <span class="k">opacity</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nt">100</span><span class="o">%</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">transform</span><span class="o">:</span> <span class="n">translateY</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="n">scaleY</span><span class="p">(</span><span class="m">1</span><span class="p">)</span> <span class="n">scaleX</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
</span><span class='line'>  <span class="n">transform</span><span class="o">-</span><span class="n">origin</span><span class="o">:</span> <span class="m">50%</span> <span class="m">50%</span><span class="p">;</span>
</span><span class='line'>  <span class="n">filter</span><span class="o">:</span> <span class="n">blur</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
</span><span class='line'>  <span class="k">opacity</span><span class="o">:</span> <span class="m">1</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨ WAAPI ä¸­ä»£ç åŸºæœ¬ç›¸åŒï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">keyframes</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translateY(-1000px) scaleY(2.5) scaleX(.2)&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">transformOrigin</span><span class="o">:</span> <span class="s1">&#39;50% 0&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">filter</span><span class="o">:</span> <span class="s1">&#39;blur(40px)&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translateY(0) scaleY(1) scaleX(1)&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">transformOrigin</span><span class="o">:</span> <span class="s1">&#39;50% 50%&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">filter</span><span class="o">:</span> <span class="s1">&#39;blur(0)&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">opacity</span><span class="o">:</span> <span class="mi">1</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¯ä»¥çœ‹å‡ºï¼Œå°†å…³é”®å¸§åº”ç”¨åˆ°éœ€è¦åŠ¨ç”»çš„å…ƒç´ ä¸Šæ˜¯å¤šä¹ˆå®¹æ˜“ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">element</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">keyframes</span><span class="p">,</span> <span class="mi">700</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¸ºäº†ç®€å•èµ·è§ï¼ŒåªæŒ‡å®šäº†æŒç»­æ—¶é—´ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªç¬¬äºŒä¸ªå‚æ•°æ¥ä¼ é€’æ›´å¤šçš„é€‰é¡¹ï¼Œè‡³å°‘ä¹Ÿåº”è¯¥æŒ‡å®šä¸€ä¸ªç¼“åŠ¨æ•ˆæœã€‚ä»¥ä¸‹æ˜¯æ‰€æœ‰å¯ç”¨é€‰é¡¹çš„å®Œæ•´åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›ç¤ºä¾‹å€¼ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">iterations</span><span class="o">:</span> <span class="kc">Infinity</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">iterationStart</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">delay</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">endDelay</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">direction</span><span class="o">:</span> <span class="s1">&#39;alternate&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">duration</span><span class="o">:</span> <span class="mi">700</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">fill</span><span class="o">:</span> <span class="s1">&#39;forwards&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">easing</span><span class="o">:</span> <span class="s1">&#39;ease-out&#39;</span><span class="p">,</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nx">element</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">keyframes</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>åŠ ä¸Šè¿™äº›é€‰é¡¹ï¼Œæˆ‘ä»¬çš„åŠ¨ç”»å°†ä»å¤´å¼€å§‹ï¼Œæ²¡æœ‰ä»»ä½•å»¶è¿Ÿï¼Œåœ¨åŠ¨ç”»å®Œæˆåå¾€è¿”å¾ªç¯æ’­æ”¾ã€‚</p>

<p>ä¸çˆ½çš„æ˜¯ï¼Œå¯¹äºç†Ÿæ‚‰ CSS åŠ¨ç”»çš„äººæ¥è¯´ï¼Œä¸€äº›æœ¯è¯­è·Ÿæˆ‘ä»¬ä¹ æƒ¯çš„æœ‰æ‰€ä¸åŒã€‚å¥½å¤„æ˜¯æ‰“å­—ä¼šæ›´å¿«ä¸€äº›ï¼</p>

<ul>
<li>ä½¿ç”¨ <code>easing</code> è€Œä¸æ˜¯ <code>animation-timing-function</code></li>
<li>ä¸æ˜¯ <code>animation-iteration-count</code>ï¼Œè€Œæ˜¯ <code>iterations</code>ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›åŠ¨ç”»æ°¸è¿œé‡å¤ï¼Œä½¿ç”¨ <code>Infinity</code> è€Œä¸æ˜¯ <code>infinite</code>ã€‚æœ‰ç‚¹æ··ä¹±ï¼Œ <code>Infinity</code> ä¸å¸¦å¼•å·ã€‚<code>Infinity</code> æ˜¯ä¸€ä¸ª JavaScript å…³é”®å­—ï¼Œè€Œå…¶ä»–å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</li>
<li>æˆ‘ä»¬ä½¿ç”¨æ¯«ç§’è€Œä¸æ˜¯ç§’ï¼Œå¯¹äºä¹‹å‰å†™è¿‡è®¸å¤š JavaScript çš„äººæ¥è¯´ï¼Œè¿™åº”è¯¥æ˜¯ä¸€æ ·çš„ã€‚ï¼ˆä½ ä¹Ÿå¯ä»¥åœ¨ CSS åŠ¨ç”»ä¸­ä½¿ç”¨æ¯«ç§’æ•°ï¼Œä½†å¾ˆå°‘æœ‰äººä½¿ç”¨ã€‚ï¼‰</li>
</ul>


<p>æˆ‘ä»¬æ¥ä»”ç»†çœ‹çœ‹ä¸€ä¸ªé€‰é¡¹ï¼š<code>iterationStart</code>ã€‚</p>

<p>å½“æˆ‘ç¬¬ä¸€æ¬¡ç¢°åˆ° <code>iterationStart</code> æœ‰ç‚¹å›°æƒ‘ã€‚ä¸ºä»€ä¹ˆè¦ä»æŒ‡å®šçš„è¿­ä»£å¼€å§‹ï¼Œè€Œä¸æ˜¯åªè¦å‡å°‘è¿­ä»£æ¬¡æ•°ï¼Ÿå½“ä½¿ç”¨åè¿›åˆ¶æ•°æ—¶ï¼Œæ­¤é€‰é¡¹éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†å…¶è®¾ç½®ä¸º  <code>.5</code>ï¼ŒåŠ¨ç”»å°†å¼€å§‹ä¸€åŠã€‚è¦åšä¸€ä¸ªå®Œæ•´çš„åŠ¨ç”»éœ€è¦ä¸¤ä¸ªä¸€åŠï¼Œæ‰€ä»¥å¦‚æœè¿­ä»£æ¬¡æ•°è®¾ç½®ä¸º 1ï¼Œå¹¶ä¸”å°† <code>iterationStart</code> è®¾ç½®ä¸º  <code>.5</code>ï¼ŒåŠ¨ç”»å°†ä»ä¸€åŠåˆ°åŠ¨ç”»ç»“æŸæ’­æ”¾ï¼Œç„¶åä»åŠ¨ç”»å¼€å¤´å¼€å§‹ï¼Œç»“æŸäºä¸­é—´ï¼</p>

<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¹Ÿå¯ä»¥å°†è¿­ä»£æ¬¡æ•°è®¾ç½®ä¸ºå°äº 1ã€‚ä¾‹å¦‚ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">option</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">iterations</span><span class="o">:</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">iterationStart</span><span class="o">:</span> <span class="p">.</span><span class="mi">5</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¿™æ ·ï¼ŒåŠ¨ç”»ä¼šä»ä¸­é—´å¼€å§‹ï¼Œä¸€ç›´æ’­æ”¾åˆ°æœ€åã€‚</p>

<p>endDelayï¼šå¦‚æœè¦å°†å¤šä¸ªåŠ¨ç”»ä¸²åœ¨ä¸€èµ·ï¼Œä½†æ˜¯å¸Œæœ›åœ¨ä¸€ä¸ªåŠ¨ç”»çš„ç»“å°¾å’Œåç»­åŠ¨ç”»çš„å¼€å§‹ä¹‹é—´å­˜åœ¨å·®è·ï¼Œè¿™æ—¶ endDelay å°±å¾ˆæœ‰ç”¨ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„è§†é¢‘ï¼Œç”± Patrick Brosset æ¥è§£é‡Šã€‚</p>

<p><a href="https://www.youtube.com/embed/hWe-qukNrN8">ä¸€ä¸ª YouTube çš„è§†é¢‘</a></p>

<h2>ç¼“åŠ¨ï¼ˆeasingï¼‰</h2>

<p>åœ¨ä»»ä½•åŠ¨ç”»ä¸­ï¼Œç¼“åŠ¨éƒ½æ˜¯æœ€é‡è¦çš„å…ƒç´ ä¹‹ä¸€ã€‚WAAPI ä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ç§ä¸åŒçš„æ–¹å¼è®¾ç½®ç¼“åŠ¨ - åœ¨æˆ‘ä»¬çš„å…³é”®å¸§æ•°ç»„æˆ–æˆ‘ä»¬çš„é€‰é¡¹å¯¹è±¡å†…ã€‚</p>

<p>åœ¨ CSS ä¸­ï¼Œå¦‚æœä½¿ç”¨ <code>animation-timing-function: ease-in-out</code> ä½ å¯èƒ½ä¼šè®¤ä¸ºåŠ¨ç”»ä¼šç¼“æ…¢å¼€å§‹ï¼Œç„¶åç¼“æ…¢ç»“æŸã€‚å®é™…ä¸Šï¼Œè¿™äº›ç¼“åŠ¨åº”ç”¨åœ¨å…³é”®å¸§ä¹‹é—´ï¼Œè€Œä¸æ˜¯æ•´ä¸ªåŠ¨ç”»ã€‚è¿™å¯ä»¥å¯¹åŠ¨ç”»çš„æ„Ÿè§‰è¿›è¡Œç»†ç²’åº¦çš„æ§åˆ¶ã€‚WAAPI ä¹Ÿæä¾›è¿™ç§åŠŸèƒ½ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">keyframes</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>  <span class="p">{</span> <span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">easing</span><span class="o">:</span> <span class="s1">&#39;ease-in&#39;</span> <span class="p">},</span>
</span><span class='line'>  <span class="p">{</span> <span class="nx">opacity</span><span class="o">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="nx">easing</span><span class="o">:</span> <span class="s1">&#39;ease-out&#39;</span> <span class="p">},</span>
</span><span class='line'>  <span class="p">{</span> <span class="nx">opacity</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</span><span class='line'><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ CSS å’Œ WAAPI ä¸­ï¼Œä¸åº”è¯¥ä¼ å…¥æœ€åä¸€å¸§çš„ç¼“åŠ¨å€¼ï¼Œå› ä¸ºè¿™å°†ä¸èµ·ä½œç”¨ã€‚å¯æ˜¯å¾ˆå¤šäººä¼šçŠ¯è¿™ç§é”™è¯¯ã€‚</p>

<p>æœ‰æ—¶å€™ï¼Œåœ¨æ•´ä¸ªåŠ¨ç”»ä¸­æ·»åŠ ç¼“åŠ¨æ•ˆæœæ›´ä¸ºç›´è§‚ã€‚è¿™åœ¨ CSS æ˜¯ä¸å¯èƒ½çš„ï¼Œä½†ç°åœ¨å¯ä»¥åœ¨ WAAPI ä¸­å®ç°ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">duration</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">easing</span><span class="o">:</span> <span class="s1">&#39;ease-in-out&#39;</span><span class="p">,</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¯ä»¥çœ‹åˆ°è¿™ä¸¤ç§ç¼“åŠ¨åœ¨ CodePen ä¸Šçš„åŒºåˆ«ï¼š</p>

<p><a href="https://codepen.io/cssgrid/pen/OmrVeQ">ç‚¹æˆ‘æŸ¥çœ‹</a></p>

<h2>ç¼“åŠ¨ vs çº¿æ€§</h2>

<p>å€¼å¾—æ³¨æ„çš„æ˜¯ CSS åŠ¨ç”»å’Œ WAAPI ä¹‹é—´çš„å¦ä¸€ä¸ªåŒºåˆ«ï¼š<strong>åœ¨ CSS ä¸­ é»˜è®¤å€¼æ˜¯ easeï¼Œè€Œåœ¨ WAAPI é»˜è®¤æ˜¯ linearã€‚</strong> ease å®é™…ä¸Šæ˜¯ <code>ease-in-out</code> çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå½“ä½ æƒ³å·æ‡’æ—¶è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚åŒæ—¶ï¼Œçº¿æ€§ä»£è¡¨è‡´å‘½çš„æ²‰é—·å’Œæ— ç”Ÿå‘½ - ä¸€è‡´çš„é€Ÿåº¦çœ‹èµ·æ¥æœºæ¢°å’Œä¸è‡ªç„¶ã€‚å®ƒè¢«é€‰ä¸ºé»˜è®¤å€¼ï¼Œå¯èƒ½å› ä¸ºå®ƒæ˜¯æœ€ä¸­ç«‹çš„é€‰é¡¹ã€‚ç„¶è€Œï¼Œåœ¨ä½¿ç”¨ WAAPI æ—¶ï¼Œæ›´å¥½æ˜¯ä½¿ç”¨ç¼“åŠ¨ï¼Œä»¥å…åŠ¨ç”»çœ‹èµ·æ¥å¾ˆä¹å‘³å’Œæœºæ¢°ã€‚</p>

<h2>æ€§èƒ½</h2>

<p>WAAPI æä¾›ä¸ CSS åŠ¨ç”»ç›¸åŒçš„æ€§èƒ½æ”¹è¿›ï¼Œå°½ç®¡è¿™å¹¶ä¸æ„å‘³ç€ä¸€å®šå°±æ˜¯å¹³æ»‘çš„åŠ¨ç”»ã€‚</p>

<p>å¸Œæœ›è¿™ä¸ª API çš„æ€§èƒ½ä¼˜åŒ–åšåˆ°ï¼Œä½¿æˆ‘ä»¬å¯ä»¥é¿å…ä½¿ç”¨ <code>will-change</code>å’Œ <code>translateZ</code>â€Šæˆä¸ºå¯èƒ½ã€‚ä½†æ˜¯ï¼Œè‡³å°‘åœ¨ç›®å‰çš„æµè§ˆå™¨å®ç°ä¸­ï¼Œè¿™äº›å±æ€§åœ¨å¤„ç†æ€§èƒ½é—®é¢˜æ–¹é¢ä»ç„¶æ˜¯æœ‰å¸®åŠ©ï¼Œæœ‰å¿…è¦çš„ã€‚</p>

<p>ä½†æ˜¯ï¼Œå¦‚æœä½ çš„åŠ¨ç”»æœ‰å»¶è¿Ÿï¼Œåˆ™æ— éœ€æ‹…å¿ƒä½¿ç”¨ <code>will-change</code>ã€‚web animations è§„èŒƒçš„ä¸»è¦ä½œè€…å¯¹ <a href="https://damp-lake-50659.herokuapp.com/">Animation for Work Slack community</a> æå‡ºäº†ä¸€äº›æœ‰è¶£çš„å»ºè®®ï¼Œå¸Œæœ›ä»–ä¸ä»‹æ„æˆ‘åœ¨è¿™é‡Œé‡å¤ï¼š</p>

<blockquote><p>å¦‚æœæœ‰ä¸€ä¸ªæ­£å‘çš„å»¶è¿Ÿï¼Œä¸éœ€è¦ä½¿ç”¨ <code>will-change</code>ï¼Œå› ä¸ºæµè§ˆå™¨å°†åœ¨å»¶è¿Ÿå¼€å§‹æ—¶è¿›è¡Œåˆ†å±‚ï¼Œå½“åŠ¨ç”»å¯åŠ¨æ—¶ï¼Œå®ƒå°†å‡†å¤‡å°±ç»ªã€‚</p></blockquote>

<h2>WAAPI å¯¹æˆ˜ CSS åŠ¨ç”»ï¼Ÿ</h2>

<p>WAAPI ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¥—å·²ç»åœ¨ CSS ä¸­å®ç°çš„ JavaScript è¯­æ³•ã€‚ç„¶è€Œï¼Œå®ƒä»¬ä¸åº”è¯¥è¢«è§†ä¸ºå¯¹æ‰‹ã€‚å¦‚æœæˆ‘ä»¬åšæŒä½¿ç”¨ CSS å®ŒæˆåŠ¨ç”»å’Œè½¬æ¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ WAAPI è¿›è¡ŒåŠ¨ç”»äº¤äº’ã€‚</p>

<h2>åŠ¨ç”»å¯¹è±¡</h2>

<p><code>.animate()</code> æ–¹æ³•ä¸ä»…å¤„ç†å…ƒç´ çš„åŠ¨ç”»ï¼Œå®ƒä¹Ÿè¿”å›ä¸€äº›ä¸œè¥¿ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">myAnimation</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">keyframes</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨æ§åˆ¶å°ä¸­æŸ¥çœ‹çš„åŠ¨ç”»å¯¹è±¡</p>

<p>å¦‚æœæˆ‘ä»¬åœ¨æ§åˆ¶å°ä¸­æŸ¥çœ‹è¿”å›å€¼ï¼Œä¼šå‘ç°è¿™æ˜¯ä¸€ä¸ªåŠ¨ç”»å¯¹è±¡ã€‚è¿™ä¸ºæˆ‘ä»¬æä¾›äº†å„ç§å„æ ·çš„åŠŸèƒ½ï¼Œå…¶ä¸­ä¸€äº›æ˜¯ä¸è¨€è‡ªæ˜ï¼Œæ¯”å¦‚ <code>myAnimation.pause()</code>ã€‚é€šè¿‡æ›´æ”¹ <code>animation-play-state</code> å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ CSS åŠ¨ç”»å®ç°ç±»ä¼¼çš„ç»“æœï¼Œä½† WAAPI è¯­æ³•æ¯” <code>element.style.animationPlayState = "paused"</code> æ›´ç®€æ´ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ <code>myAnimation.reverse()</code> è½»æ¾åè½¬åŠ¨ç”»ï¼ŒåŒæ ·åœ°ï¼Œè·Ÿæˆ‘ä»¬ä½¿ç”¨è„šæœ¬æ›´æ”¹ CSS çš„ <code>animation-direction</code> å±æ€§ç›¸æ¯”ï¼Œç¨å¾®æœ‰ç‚¹è¿›æ­¥ã€‚</p>

<p>ç„¶è€Œï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½¿ç”¨ JavaScript æ“ä½œ <code>@keyframe</code> å¹¶ä¸æ˜¯ä»¶å®¹æ˜“çš„çš„äº‹ã€‚å³ä½¿æ˜¯é‡æ–°å¯åŠ¨åŠ¨ç”»è¿™æ ·ç®€å•çš„äº‹ï¼Œä¹Ÿæ˜¯éœ€è¦ä¸€äº›æŠ€å·§çš„ï¼Œå°±åƒ Chris Coyier <a href="https://css-tricks.com/restart-css-animation/">å…ˆå‰å†™è¿‡çš„é‚£æ ·</a>ã€‚ä½¿ç”¨ WAAPIï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨ <code>myAnimation.play()</code> ï¼Œå¦‚æœåŠ¨ç”»å·²ç»å®Œæˆï¼Œå°†ä»ä¸€å¼€å§‹å°±é‡æ’­åŠ¨ç”»ï¼Œæˆ–è€…å¦‚æœæˆ‘ä»¬æš‚åœæ’­æ”¾ï¼Œåˆ™ä»ä¸­é—´è¿­ä»£æ’­æ”¾åŠ¨ç”»ã€‚</p>

<p>æˆ‘ä»¬ç”šè‡³å¯ä»¥è½»æ¾åœ°æ”¹å˜åŠ¨ç”»çš„é€Ÿåº¦ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">myAnimation</span><span class="p">.</span><span class="nx">playbackRate</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// speed it up</span>
</span><span class='line'><span class="nx">myAnimation</span><span class="p">.</span><span class="nx">playbackRate</span> <span class="o">=</span> <span class="p">.</span><span class="mi">4</span><span class="p">;</span> <span class="c1">// use a number less than one to slow it down</span>
</span></code></pre></td></tr></table></div></figure>


<h2>getAnimations()</h2>

<p>è¿™ä¸ªæ–¹æ³•å°†è¿”å›æ‰€æœ‰åŠ¨ç”»å¯¹è±¡çš„æ•°ç»„ï¼ŒåŒ…å«ä½¿ç”¨ WAAPI å®šä¹‰çš„åŠ¨ç”»å’Œ CSS è½¬æ¢æˆ–åŠ¨ç”»ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">element</span><span class="p">.</span><span class="nx">getAnimations</span><span class="p">()</span> <span class="c1">// returns any animations or transitions applied to our element using  CSS or WAAPI</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¦‚æœä½ å–œæ¬¢ä½¿ç”¨ CSS æ¥å®šä¹‰å’Œä½¿ç”¨åŠ¨ç”»ï¼Œ<code>getAnimations()</code>  å…è®¸ APIâ€‹â€‹ ä¸ <code>@keyframes</code> ç»“åˆä½¿ç”¨ã€‚ä½ å¯ä»¥ç»§ç»­ä½¿ç”¨ CSS è¿›è¡Œå¤§éƒ¨åˆ†åŠ¨ç”»å·¥ä½œï¼Œç„¶ååœ¨éœ€è¦ API æ—¶è·å¾—ä½¿ç”¨ API çš„ä¼˜åŠ¿ã€‚</p>

<p>å³ä½¿ä¸€ä¸ª DOM å…ƒç´ åªä½¿ç”¨åˆ°ä¸€ä¸ªåŠ¨ç”»ï¼Œ<code>getAnimations()</code> ä¹Ÿå°†å§‹ç»ˆè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚æˆ‘ä»¬ä½¿ç”¨é‚£ä¸ªå•ä¸€çš„åŠ¨ç”»å¯¹è±¡æ¥å¤„ç†ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">h2</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;h2&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">myCSSAnimation</span> <span class="o">=</span> <span class="nx">h2</span><span class="p">.</span><span class="nx">getAnimations</span><span class="p">()[</span><span class="mi">0</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ CSS åŠ¨ç”»ä¸­ä½¿ç”¨ web animation API :)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">myCSSAnimation</span><span class="p">.</span><span class="nx">playbackRate</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
</span><span class='line'><span class="nx">myCSSAnimation</span><span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Promise å’Œ Event</h2>

<p>å¾ˆå¤šé€šè¿‡ CSS è§¦å‘çš„äº‹ä»¶ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»å¯ä»¥ä½¿ç”¨ JavaScript ä»£ç æ¥å®Œæˆï¼š â€Š <code>animationstart</code>ï¼Œ<code>animationend</code>ï¼Œ<code>animationiteration</code> å’Œ <code>transitionend</code>ã€‚ä¹‹å‰ç»å¸¸éœ€è¦ç›‘å¬åŠ¨ç”»æˆ–è½¬æ¢çš„ç»“æŸï¼Œä»¥ä¾¿ä» DOM ä¸­åˆ é™¤åº”ç”¨çš„å…ƒç´ ã€‚</p>

<p>åœ¨åŠ¨ç”»å¯¹è±¡å¯ä»¥ä½¿ç”¨ WAAPI æ¥å®Œæˆ <code>animationend</code> æˆ– <code>transitionend</code> åšçš„äº‹æƒ…ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">myAnimation</span><span class="p">.</span><span class="nx">onfinish</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">element</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>WAAPI ä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªé€‰æ‹©ï¼ševent å’Œ promiseã€‚åŠ¨ç”»å¯¹è±¡çš„ <code>.finished</code> æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªåœ¨åŠ¨ç”»ç»“æŸæ—¶çš„ promiseã€‚ä¸‹é¢è¿™æ®µä»£ç æ˜¯ä¸Šé¢ä¾‹å­çš„ promise ç‰ˆæœ¬ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">myAnimation</span><span class="p">.</span><span class="nx">finished</span><span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span>
</span><span class='line'>  <span class="nx">element</span><span class="p">.</span><span class="nx">remove</span><span class="p">())</span>
</span></code></pre></td></tr></table></div></figure>


<p>æˆ‘ä»¬æ¥çœ‹çœ‹æ¥è‡ª Mozilla å¼€å‘è€…ç½‘ç»œä¸­çš„ä¸€ä¸ªç¨å¾®å¤æ‚ç‚¹çš„ä¾‹å­ã€‚<code>Promise.all</code> æ¥å—ä¸€ä¸ª promise çš„æ•°ç»„ï¼Œä¸€æ—¦æ‰€æœ‰ promise å®Œæˆæ‰ä¼šè¿è¡Œå›è°ƒå‡½æ•°ã€‚å¯ä»¥çœ‹å‡ºï¼Œ<code>element.getAnimations()</code> è¿”å›çš„æ˜¯ä¸€ä¸ªåŠ¨ç”»å¯¹è±¡æ•°ç»„ã€‚æˆ‘ä»¬å¯ä»¥å°†æ•°ç»„ä¸­çš„æ‰€æœ‰åŠ¨ç”»å¯¹è±¡ map åˆ°æ¯ä¸ªåŠ¨ç”»å¯¹è±¡çš„ <code>.finished</code>ä¸Šï¼Œè¿™æ ·å°±è·å¾—éœ€è¦çš„ promise æ•°ç»„ã€‚</p>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªæœ‰åœ¨é¡µé¢ä¸Šçš„æ‰€æœ‰åŠ¨ç”»å®Œæˆåï¼Œæˆ‘ä»¬çš„å‡½æ•°æ‰èƒ½è¿è¡Œã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getAnimations</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">animation</span> <span class="o">=&gt;</span>
</span><span class='line'>  <span class="nx">animation</span><span class="p">.</span><span class="nx">finished</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// do something cool</span>
</span><span class='line'>  <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<h2>æœªæ¥</h2>

<p>æœ¬æ–‡ä¸­æåˆ°çš„åŠŸèƒ½åªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚ä»ç›®å‰çš„è§„èŒƒå’Œå®æ–½æ¥çœ‹ï¼Œæœªæ¥ä¼šæœ‰ä¸€ä¸ªå¾ˆå¼ºå¤§åŠ¨ç”» APIã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JavaScript å¼‚å¸¸çš„é˜²èŒƒä¸ç›‘æ§]]></title>
    <link href="http://blog.mirreal.net/blog/2017/06/21/javascript-stack-trace/"/>
    <updated>2017-06-21T23:12:00+08:00</updated>
    <id>http://blog.mirreal.net/blog/2017/06/21/javascript-stack-trace</id>
    <content type="html"><![CDATA[<p>ä¸€å¥—å®Œå–„çš„å‰ç«¯ä½“ç³»åº”å°‘ä¸äº†å¼‚å¸¸ç»Ÿè®¡ä¸ç›‘æ§ï¼Œå³ä½¿æœ‰è¶³å¤Ÿçš„è´¨é‡ä¿è¯ä½“ç³»ï¼Œéš¾å…ä¼šå‡ºç°ä¸€äº›æ„æ–™ä¹‹å¤–çš„äº‹ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚çš„ç½‘è·¯ç¯å¢ƒå’Œè¿è¡Œç¯å¢ƒä¹‹ä¸‹ã€‚ä¸ºäº†ä¿è¯ä»£ç çš„å¥å£®æ€§ä»¥åŠé¡µé¢çš„ç¨³å®šæ€§ï¼Œæˆ‘ä»¬ä»å¤šä¸ªæ–¹é¢æ¥åšå¼‚å¸¸çš„é˜²èŒƒå’Œç›‘æ§ã€‚</p>

<h2>ä¸‰ç§æ€è·¯</h2>

<h3>ä¸»åŠ¨é˜²å¾¡</h3>

<p>å¯¹äºæˆ‘ä»¬æ“ä½œçš„æ•°æ®ï¼Œå°¤å…¶æ˜¯ç”± API æ¥å£è¿”å›çš„ï¼Œæ—¶å¸¸ä¼šæœ‰ä¸€ä¸ªå¾ˆå¤æ‚çš„æ·±å±‚åµŒå¥—çš„æ•°æ®ç»“æ„ã€‚ä¸ºäº†ä»£ç çš„å¥å£®æ€§ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦å¯¹æ¯ä¸€å±‚è®¿é—®éƒ½ä½œç©ºå€¼åˆ¤æ–­ï¼Œå°±åƒè¿™æ ·ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">props</span><span class="p">.</span><span class="nx">user</span> <span class="o">&amp;&amp;</span>
</span><span class='line'><span class="nx">props</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">posts</span> <span class="o">&amp;&amp;</span>
</span><span class='line'><span class="nx">props</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">posts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span>
</span><span class='line'><span class="nx">props</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">posts</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">comments</span> <span class="o">&amp;&amp;</span>
</span><span class='line'><span class="nx">props</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">posts</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">comments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç±»ä¼¼çš„ä»£ç å¤§å®¶å¯èƒ½éƒ½å†™è¿‡ï¼Œæ²¡å†™è¿‡å¤§æ¦‚ä¹Ÿè§åˆ°åˆ«äººå†™è¿‡ã€‚çœ‹èµ·æ¥ç¡®å®ç›¸å½“åœ°ä¸ç¾è§‚ï¼Œæœ‰å¥è¯è¯´å¾—å¾ˆæ£’ï¼š</p>

<p><strong>The opposite of beautiful is not ugly, but wrong.</strong></p>

<p>æˆ‘ä»¬å¾—æ‰¾åˆ°ä¸€ç§ï¼Œæ›´ç®€å•ã€æ›´ä¼˜é›…ã€æ›´å®‰å…¨çš„æ–¹å¼æ¥å¤„ç†è¿™ç§æƒ…å½¢ã€‚å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="https://medium.com/javascript-inside/safely-accessing-deeply-nested-values-in-javascript-99bf72a0855a">Safely Accessing Deeply Nested Values In JavaScript</a>ï¼Œæ–‡ç« æåˆ°å€ŸåŠ© Ramdaã€Lensesã€Lodash ä»¥åŠ Immutable.js ç­‰ç±»åº“çš„æ–¹å¼ï¼Œå¹¶æä¾›ä¸€ä¸ªéå¸¸ç®€æ´æ˜äº†çš„åŸç”Ÿè§£å†³æ–¹æ¡ˆï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">getIn</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">p</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">xs</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">(</span><span class="nx">xs</span> <span class="o">&amp;&amp;</span> <span class="nx">xs</span><span class="p">[</span><span class="nx">x</span><span class="p">])</span> <span class="o">?</span> <span class="nx">xs</span><span class="p">[</span><span class="nx">x</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>    <span class="p">},</span> <span class="nx">o</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿™æ ·è®¿é—®å°±å¯ä»¥äº†ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">getIn</span><span class="p">([</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">],</span> <span class="nx">props</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¦‚æœæ­£å¸¸è®¿é—®åˆ°ï¼Œåˆ™è¿”å›å¯¹åº”çš„å€¼ï¼Œå¦åˆ™è¿”å› <code>null</code>ã€‚</p>

<p>è¿™é‡Œæä¾›çš„åªæ˜¯ä¸»åŠ¨é˜²å¾¡çš„ä¸€ç§æƒ…å½¢ï¼Œå…³äºå¦‚ä½•ç¼–å†™æ›´å®‰å…¨çš„ä»£ç è¿™é‡Œä¸ä½œæ·±å…¥å±•å¼€ã€‚</p>

<h3>å…¨å±€ç›‘æ§</h3>

<p>æµè§ˆå™¨æä¾› <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/GlobalEventHandlers/onerror"><code>window.onerror</code></a> API æ¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œå…¨å±€çš„é”™è¯¯ç›‘æ§ï¼š</p>

<ul>
<li>å½“ JavaScript è¿è¡Œæ—¶é”™è¯¯ï¼ˆåŒ…æ‹¬è¯­æ³•é”™è¯¯ï¼‰å‘ç”Ÿæ—¶ï¼Œä¼šæ‰§è¡Œ `window.onerror()&#8220;</li>
<li>å½“ä¸€é¡¹èµ„æºï¼ˆå¦‚ <code>&lt;img&gt;</code> æˆ– <code>&lt;script&gt;</code> ï¼‰åŠ è½½å¤±è´¥ï¼Œèƒ½è¢«å•ä¸€çš„ <code>window.addEventListener</code> æ•è·</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * @param  {String} message é”™è¯¯ä¿¡æ¯</span>
</span><span class='line'><span class="cm"> * @param  {String} source  å‘ç”Ÿé”™è¯¯çš„è„šæœ¬URL</span>
</span><span class='line'><span class="cm"> * @param  {Number} lineno  å‘ç”Ÿé”™è¯¯çš„è¡Œå·</span>
</span><span class='line'><span class="cm"> * @param  {Number} colno   å‘ç”Ÿé”™è¯¯çš„åˆ—å·</span>
</span><span class='line'><span class="cm"> * @param  {Object} error   Errorå¯¹è±¡</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">lineno</span><span class="p">,</span> <span class="nx">colno</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// ...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>å…¶ä¸­ error å¯¹è±¡åŒ…å«è¯¦ç»†çš„é”™è¯¯å †æ ˆä¿¡æ¯ï¼Œåœ¨ IE9 ä»¥å‰ï¼Œæ²¡æœ‰è¿™ä¸ªå‚æ•°ã€‚</p>

<h3>é’ˆå¯¹æ€§æ•è· try..catch</h3>

<p>å¯ä»¥é€šè¿‡ try..catch æ¥ä¸»åŠ¨æŠ“å–é”™è¯¯ï¼Œæƒ³è¦å¯¹ä¸€æ®µä»£ç  try..catchï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">try</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// ...</span>
</span><span class='line'><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">handler</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¯¹ä¸€ä¸ªå‡½æ•°åš try..catch å°è£…:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">tryify</span><span class="p">(</span><span class="nx">func</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">try</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">func</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">handleError</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">throw</span> <span class="nx">error</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>ä¸ºä»€ä¹ˆæ˜¯ script error</h2>

<p>æ–¹æ¡ˆå·²ç»æ˜ç¡®ï¼Œä½†è¿˜æœ‰ä¸€äº›é—®é¢˜ã€‚åœ¨æŸ¥çœ‹ JavaScript é”™è¯¯ç»Ÿè®¡æ—¶ï¼Œå‘ç° 80% ä»¥ä¸Šéƒ½æ˜¯ &ldquo;script error&#8221;ã€‚åŸæ¥ï¼Œå½“åŠ è½½è‡ªä¸åŒåŸŸçš„è„šæœ¬ä¸­å‘ç”Ÿè¯­æ³•é”™è¯¯æ—¶ï¼Œä¸ºé¿å…ä¿¡æ¯æ³„éœ²ï¼Œè¯­æ³•é”™è¯¯çš„ç»†èŠ‚å°†ä¸ä¼šæŠ¥å‘Šï¼Œè€Œä»£ä¹‹ç®€å•çš„ &#8220;Script error.&rdquo;</p>

<p>è€Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„é™æ€èµ„æºæ”¾åœ¨ä¸“é—¨çš„ CDN æœåŠ¡å™¨ä¸Šï¼Œè·Ÿç«™ç‚¹å¹¶ä¸åœ¨ä¸€ä¸ªåŸŸï¼Œæ‰€ä»¥å¦‚æœåªæ˜¯ç®€å•çš„æŠ“å–ï¼Œåªä¼šå¾—åˆ°ä¸€å †æ„ä¹‰ä¸å¤§çš„ <code>script error</code></p>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>

<ul>
<li>æ·»åŠ  CORS æ”¯æŒ</li>
<li>ä½¿ç”¨ try..catch</li>
</ul>


<h3>æ·»åŠ  CORS æ”¯æŒ</h3>

<p>éœ€è¦åšä¸¤ç‚¹ï¼š</p>

<p>1.åœ¨ script ä¾¿ç­¾æ·»åŠ  crossoriginï¼Œé»˜è®¤å€¼ <code>crossorigin="anonymous"</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//xxx.com/example.js&quot;</span> <span class="na">crossorigin</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨ require.js é‡Œæä¾›ä¸€ä¸ª <a href="https://github.com/requirejs/requirejs/blob/e97fe4dd894d8a07712156e17cefa28b954a9c3e/require.js#L1946">onNodeCreated hook</a>ï¼Œä¾›æˆ‘ä»¬æä¾›æ‰©å±•ï¼Œè¦æ·»åŠ  crossorigin å±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="c1">// å¦‚æœåœ¨ require.js åŠ è½½ä¹‹å‰å®šä¹‰äº† requirejsï¼Œrequire.js ä¼šå°†å…¶ä½œä¸ºä¸€ä¸ªå¯¹è±¡ä¼ å…¥ requirejs.config</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">requirejs</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">onNodeCreated</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">config</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">node</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;crossorigin&#39;</span><span class="p">,</span> <span class="s1">&#39;anonymous&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//xxx.com/require.js&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨ 2.2.0 ç‰ˆæœ¬ä»¥ä¸Šå¯ç”¨ï¼ˆå¾ˆé—æ†¾çš„æ˜¯ï¼Œç›®å‰çš„é›†æˆè§£å†³æ–¹æ¡ˆç‰ˆæœ¬åˆšå¥½ä½äºè¿™ä¸ªç‰ˆæœ¬ï¼‰ã€‚</p>

<p>2.åŒæ—¶åœ¨ CDN æœåŠ¡å™¨å¢åŠ å“åº”å¤´ <code>access-control-allow-orgin</code>ï¼Œé…ç½®å…è®¸è®¿é—® CORS çš„åŸŸï¼Œå¦åˆ™æµè§ˆå™¨ç›´æ¥å°†ç¦æ­¢åŠ è½½ã€‚</p>

<h3>try..catch</h3>

<p>è¿™ä¸€ç‚¹ä¸Šé¢ä¹Ÿæœ‰æåˆ°ï¼Œç®—æ˜¯ä¸€ç§æ¯”è¾ƒé€šç”¨ï¼Œå¯å®šåˆ¶å¼ºçš„æ–¹æ¡ˆã€‚å½“ç„¶ï¼Œåœ¨æ€§èƒ½ä¸Šä¹Ÿä¼šæœ‰ä¸€äº›æŸè€—ã€‚</p>

<p>ç»¼åˆè€ƒè™‘ï¼Œtry..catch é€šç”¨æ€§æ›´å¥½ï¼Œä½†ç”±äºå…¶åœ¨æ€§èƒ½æ–¹é¢çš„ä¸€äº›æŸè€—ï¼ŒCORS ä¼˜äº try..catch</p>

<h2>ä¸€ä¸ªç›‘æ§å°å·¥å…·</h2>

<p>éšåï¼Œä»‹ç»ä¸€ä¸ª JavaScript stack trace çš„å°å·¥å…·ï¼š<a href="https://github.com/CurtisCBS/monitor">https://github.com/CurtisCBS/monitor</a> ï¼Œå·¥å…·ç”± <a href="https://github.com/CurtisCBS">Curtis</a> å’Œ <a href="https://github.com/mirreal">mirreal</a> å…±åŒå®Œæˆã€‚</p>

<p>ä¸»è¦æ˜¯ç”¨äºæ•è·é¡µé¢ JavaScript å¼‚å¸¸æŠ¥é”™ï¼Œæ•è·å¼‚å¸¸ç±»å‹åŒ…å«:</p>

<ul>
<li>JavaScript runtime å¼‚å¸¸æ•æ‰ âˆš</li>
<li>é™æ€èµ„æº load faided å¼‚å¸¸æ•æ‰ âˆš</li>
<li>console.error çš„å¼‚å¸¸æ•è· âˆš</li>
<li>try..catch é”™è¯¯æ•è· âˆš</li>
</ul>


<p>ä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œä½†ä½¿ç”¨ script mode å¼•å…¥æ–‡ä»¶åï¼Œè°ƒç”¨ init å‡½æ•°ï¼Œè¿›è¡Œåˆå§‹åŒ–é…ç½®å’Œç›‘å¬</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//unpkg.com/jstracker@latest/dist/jstracker.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'>  <span class="nx">jstracker</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">delay</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">maxError</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">sampling</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">report</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errorLogs</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">errorLogs</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¦‚æœæ˜¯ä½¿ç”¨ module modeï¼Œå¦‚ä¸‹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// npm install jstracker --save</span>
</span><span class='line'><span class="kr">import</span> <span class="nx">jstracker</span> <span class="nx">from</span> <span class="s1">&#39;jstracker&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">jstracker</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">concat</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">report</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errorLogs</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// console.log(&#39;send&#39;)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¦‚æœè¦ä½¿ç”¨ try..catch æ•è·ï¼Œjstracker æš´éœ²å‡ºä¸€ä¸ª <code>tryJS</code> å¯¹è±¡ï¼Œå¯ä»¥å¤„ç† try..catch åŒ…è£…ï¼Œå°±åƒè¿™æ ·ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">import</span> <span class="nx">jstracker</span> <span class="nx">from</span> <span class="s1">&#39;jstracker&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">this</span><span class="p">.</span><span class="nx">handleSelect</span> <span class="o">=</span> <span class="nx">jstracker</span><span class="p">.</span><span class="nx">tryJS</span><span class="p">.</span><span class="nx">wrap</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSelect</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>æ‰€æœ‰é”™è¯¯ä¿¡æ¯ç»Ÿä¸€ç”± report å‡½æ•°å¤„ç†ï¼Œå¯ä»¥åœ¨æ­¤ä¹‹ä¸Šåšæ•°æ®å¤„ç†ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// ubt.js</span>
</span><span class='line'><span class="kr">import</span> <span class="nx">jstracker</span> <span class="nx">from</span> <span class="s1">&#39;jstracker&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kr">import</span> <span class="nx">utility</span> <span class="nx">from</span> <span class="s1">&#39;utility&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">jstracker</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">concat</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">report</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errorLogs</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kr">const</span> <span class="nx">errorLog</span> <span class="o">=</span> <span class="nx">errorLogs</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>        <span class="nx">errorLog</span><span class="p">.</span><span class="nx">ua</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">ubtTracker</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">errorLog</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">ubtTracker</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">key</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">UBT_JS_TRACKER</span><span class="o">:</span> <span class="s1">&#39;xxxx-xxxx-xxxx&#39;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">window</span><span class="p">[</span><span class="s1">&#39;__bfi&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="nb">window</span><span class="p">[</span><span class="s1">&#39;__bfi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'>        <span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">utility</span><span class="p">.</span><span class="nx">deserializeUrl</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span><span class='line'>        <span class="nb">window</span><span class="p">[</span><span class="s1">&#39;__bfi&#39;</span><span class="p">].</span><span class="nx">push</span><span class="p">([</span><span class="s1">&#39;_tracklog&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">UBT_JS_TRACKER</span><span class="p">,</span> <span class="nx">value</span><span class="p">]);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">wrapContext</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">func</span> <span class="k">in</span> <span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">ctx</span><span class="p">[</span><span class="nx">func</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jstracker</span><span class="p">.</span><span class="nx">tryJS</span><span class="p">.</span><span class="nx">wrap</span><span class="p">(</span><span class="nx">ctx</span><span class="p">[</span><span class="nx">func</span><span class="p">]);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kr">export</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">wrapContext</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">ubtTracker</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">jstracker</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h2>æ¦‚è¿°</h2>

<p>ä½œä¸ºå¼€å‘è€…ä»¥åŠé¡¹ç›®ç»´æŠ¤è€…çš„èº«ä»½ï¼Œæˆ‘ä»¬åº”å½“ç¼–å†™æ›´å®‰å…¨å¥å£®çš„ä»£ç ã€‚ä½†ç”±äºç¯å¢ƒçš„å¤šæ ·æ€§ï¼Œæ— è®ºå†å®Œå–„çš„æµ‹è¯•ï¼Œcode review éƒ½éš¾å…éƒ½æ‰€ç–æ¼ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—ç›‘æ§ç³»ç»Ÿæ¥å®Œå–„æ•´ä¸ªå‰ç«¯ä½“ç³»ã€‚</p>

<p>åœ¨ç›‘æ§çš„æ—¶å€™ï¼Œå‡ºäºåŒæºå®‰å…¨ç­–ç•¥æ— æ³•æ‹¿åˆ°å‡†ç¡®çš„é”™è¯¯ä¿¡æ¯ï¼Œåœ¨æ­¤ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p>

<ul>
<li>å¢åŠ  CORS æ”¯æŒ</li>
<li>ä½¿ç”¨ try..catch è¿›è¡Œå¼‚å¸¸æ•è·</li>
</ul>


<p>æœ€åï¼Œæˆ‘ä»¬å¯¹æ•´ä¸ªç›‘æ§å·¥ä½œå°è£…äº†ä¸€ä¸ªåŸºç¡€çš„æ ¸å¿ƒï¼Œå¯ä»¥ç›‘æ§ JavaScript Runtime å¼‚å¸¸ï¼Œèµ„æºåŠ è½½å¼‚å¸¸ï¼Œä»¥åŠ try..catch æ•è·å¼‚å¸¸ç­‰ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå®é™…å·¥ä½œä¸­çš„ç¤ºä¾‹ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[å–œæ¬¢ç”¨ Git åšçš„ä¸€äº›å°äº‹]]></title>
    <link href="http://blog.mirreal.net/blog/2017/06/12/little-things-i-like-to-do-with-git/"/>
    <updated>2017-06-12T18:00:00+08:00</updated>
    <id>http://blog.mirreal.net/blog/2017/06/12/little-things-i-like-to-do-with-git</id>
    <content type="html"><![CDATA[<blockquote><p>ä½œè€…ï¼š<a href="https://twitter.com/csswizardry">@csswizardry</a></p>

<p>åŸæ–‡ï¼š<a href="https://csswizardry.com/2017/05/little-things-i-like-to-do-with-git/">Little Things I Like to Do with Git</a></p>

<p>éšä¾¿è¯´ç‚¹ï¼šè¿™ç¯‡æ–‡ç« ä¸»è¦ä»ç®¡ç†è€…çš„è§’åº¦è°ˆè®ºäº†ä½¿ç”¨ git çš„å¿ƒå¾—ï¼Œä½¿ç”¨å¤§é‡ç¯‡å¹…ä»‹ç» <code>git log</code> çš„ä¸€äº›æ–¹æ³•å’ŒæŠ€å·§ã€‚</p>

<p>åŒæ ·åœ°ï¼Œå‘ç°å¾ˆå¤šäººå…¶å®å¹¶æ²¡æœ‰æ·±å…¥å…¨é¢åœ°å»äº†è§£è¿‡ git çš„ç”¨æ³•ï¼Œä½œä¸ºä¸€åå¼€å‘äººå‘˜ï¼Œå¤§å¤šæ•°æ—¶å€™åªè¦ä¼šä½¿ç”¨ <code>git pull</code>ï¼Œ<code>git add</code>ï¼Œ<code>git commit</code>ï¼Œ<code>git push</code> ä¼¼ä¹å°±è¶³å¤Ÿï¼Œè¿˜æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†äººåªä½¿ç”¨ç‰¹å®šçš„å›¾å½¢åŒ–å·¥å…·ã€‚ä½†äº‹å®ä¸ŠçœŸçš„æ˜¯è¿™æ ·å—ï¼Œå¯èƒ½åœ¨é‡åˆ°æŸä¸ªç¨å¾®é«˜çº§ä¸€ç‚¹çš„é—®é¢˜æˆ–è€…éœ€æ±‚å°±æ‰‹è¶³æ— æªã€‚å¯¹äºæŸä¸ªç‰¹å®šä¸ªä½“è€Œè¨€ï¼Œå¾ˆå¤šåœºæ™¯æˆ‘ä»¬æœªå¿…ä¼šé‡åˆ°ï¼Œå³ä½¿ç¢°åˆ°ä¹Ÿå¯ä»¥ç°åœºå¯»æ±‚æœç´¢å·¥å…·çš„å¸®åŠ©ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§å­¦ä¹ æ–¹å¼ï¼Œæ— æ„å¦å®šè¿™ç§æ–¹å¼ï¼Œä½†æœ€å¤§çš„é—®é¢˜å°±æ˜¯åªè§ä¸€å¶è€Œéš¾ä»¥çª¥è§æ£®æ—ã€‚åœ¨è¿™é‡Œæ¨èä¸€ä¸ªå°å·¥å…· <a href="https://github.com/Gazler/githug">githug</a>ï¼Œé€šè¿‡ä¸€ç§æ¯”è¾ƒè½»æ¾çš„æ¸¸æˆçš„æ–¹å¼æ¥ä¸€æ¢å…¨è²Œã€‚</p></blockquote>

<p>åœ¨è·Ÿæˆ‘çš„æœ‹å‹ Tim èŠå¤©çš„æ—¶å€™ï¼Œè°ˆåˆ°æˆ‘æœ‰å¤šå–œæ¬¢ Gitã€‚ä½œä¸ºç»å¸¸ä½¿ç”¨çš„ä¸€ä¸ªå·¥å…·ï¼Œå®ƒå¼ºå¤§è€Œä¼˜é›…ã€‚åœ¨è¿™é‡Œï¼Œä»‹ç»ä¸€ä¸‹æˆ‘ä¸ªäººä½¿ç”¨å¾—æœ€å¤šï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€æœ‰ç”¨çš„ä¸€äº›å°æŠ€å·§ã€‚</p>

<h2>ç®¡ç†è€…é¢æ¿</h2>

<p>æ— è®ºä½ è®¤ä¸ºåœ¨å·¥ä½œä¸­çš„æ¸¸æˆåŒ–ï¼ˆgamificationï¼‰å’Œç«äº‰æ˜¯å¥½æ˜¯åï¼Œå¯¹äºè¿™ä¸ªè¯é¢˜åœ¨ä¸åŒçš„æ—¶é—´å¯èƒ½æ˜¯å®Œå…¨ä¸åŒçš„ç»“è®ºã€‚ä½†å¦‚æœä½ å¯¹å›¢é˜Ÿæˆå‘˜åœ¨é¡¹ç›®ä¸­çš„æäº¤æ•°é‡æ„Ÿå…´è¶£ï¼Œä½¿ç”¨ <code>shortlog</code> å°±å¯ä»¥æ‰¾åˆ°ç­”æ¡ˆï¼š</p>

<p>ï¼ˆè¯·å¿½ç•¥æˆ‘ï¼‰</p>

<p>ï¼ˆæˆ‘åªæ˜¯å ä½çš„ï¼‰</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git shortlog -sn
</span><span class='line'>    <span class="m">80</span>  Harry Roberts
</span><span class='line'>    <span class="m">34</span>  Samantha Peters
</span><span class='line'>     <span class="m">3</span>  Tom Smith
</span></code></pre></td></tr></table></div></figure>


<p><code>shortlog</code> å¯ä»¥è§†ä½œå¯¹ <code>git log</code> çš„æ¦‚è¦ã€‚</p>

<ul>
<li><code>-s</code>é€‰é¡¹å°†éšè—æäº¤æè¿°ï¼Œä»…æä¾›æäº¤è®¡æ•°æ‘˜è¦</li>
<li><code>-n</code> é€‰é¡¹å°†æ ¹æ®æ¯ä¸ªä½œè€…çš„æäº¤æ•°å¯¹è¾“å‡ºè¿›è¡Œæ’åºï¼Œè€Œä¸æ˜¯é»˜è®¤çš„æŒ‰ä½œè€…å­—æ¯é¡ºåºã€‚</li>
</ul>


<p>ä¸Šé¢æ˜¾ç¤ºçš„æ˜¯é¡¹ç›®ç”Ÿå‘½å‘¨æœŸçš„æ‰€æœ‰æäº¤ï¼Œä½†æ˜¯å¦‚æœæƒ³æŸ¥çœ‹åœ¨ç‰¹å®šæ—¶é—´å†…çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ <code>--since</code> å’Œ <code>--until</code> é€‰é¡¹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git shortlog -sn --since<span class="o">=</span><span class="s1">&#39;10 weeks&#39;</span> --until<span class="o">=</span><span class="s1">&#39;2 weeks&#39;</span>
</span><span class='line'>    <span class="m">59</span>  Harry Roberts
</span><span class='line'>    <span class="m">24</span>  Samantha Peters
</span></code></pre></td></tr></table></div></figure>


<p>æˆ‘ä¸ºæ­¤é…ç½®äº†åˆ«å <code>$ git stats</code></p>

<h2>è´£ä»»äºº</h2>

<p>Git æœ‰ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ <code>blame</code> åŠŸèƒ½ï¼Œå…è®¸æˆ‘ä»¬æŸ¥çœ‹ç‰¹å®šä»£ç æ®µçš„è´Ÿè´£å¼€å‘äººå‘˜ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># See who last changed lines 5 through 10 of the buttonsâ€™ CSS:</span>
</span><span class='line'><span class="nv">$ </span>git blame -L5,10 _components.buttons.scss
</span></code></pre></td></tr></table></div></figure>


<p>è¿™ä¸€æ¡æ”¾åœ¨è¿™é‡Œè®²å¥½åƒæœ‰ç‚¹è¿‡å¤´ï¼Œåƒæ˜¯æˆ‘ä»¬åœ¨æ‰¾å¼€å‘äººå‘˜å“ªäº›åœ°æ–¹åšé”™äº†ã€‚ä½†ä¹Ÿä¸å®Œå…¨æ˜¯è¿™æ ·ï¼Œå¦ä¸€æ–¹é¢ï¼Œä»–ä»¬å¯èƒ½å·²ç»åšäº†ä¸€äº›æˆ‘ä»¬æƒ³è¦äº†è§£çš„ç‰¹åˆ«å‰å®³æˆ–æ˜¯å°è±¡æ·±åˆ»çš„äº‹æƒ…ã€‚æˆ‘ä»¬åŸæœ¬ä¼šé—®ï¼Œå“‡ï¼æˆ‘ä¹‹å‰è¿˜æ²¡æœ‰çœ‹åˆ°è¿™ä¸ªåŠŸèƒ½ï¼Œè¿˜æƒ³çŸ¥é“æ˜¯è°åšçš„ã€‚</p>

<p>ç”±äºæ˜¯ä» SVN è½¬åˆ° Gitï¼Œæˆ‘ä½¿ç”¨ <code>praise</code> ä½œä¸º <code>blame</code> çš„åˆ«åï¼Œè¿™æ ·äºŒè€…éƒ½å¯ä»¥ä½¿ç”¨ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git config --global alias.praise blame
</span></code></pre></td></tr></table></div></figure>


<p>å³ï¼Œæˆ‘ä¹Ÿå¯ä»¥è¿™æ ·åšï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># Find out who implemented Resource Hints and buy them a coffee:</span>
</span><span class='line'><span class="nv">$ </span>git praise -L18,23 _includes/head.html
</span></code></pre></td></tr></table></div></figure>


<p>åªæ˜¯ä¸€ç‚¹å°å˜åŒ–ï¼Œä½†æ•ˆæœä¸é”™ã€‚</p>

<h2>éšè—ç©ºç™½æç¤º</h2>

<p>å½“ä½¿ç”¨ <code>diff</code> æˆ– <code>show</code> æŸ¥çœ‹å…·æœ‰å¤§é‡ç©ºç™½å˜åŒ–çš„ç‰ˆæœ¬å¯¹æ¯”æ—¶ï¼Œä¼šæœ‰å¾ˆå¤šè§†è§‰å™ªéŸ³å¹²æ‰°æˆ‘ä»¬ï¼Œä½¿å¾—å¾ˆéš¾çœ‹åˆ°æ›´é‡è¦çš„å˜åŒ–å†…å®¹ã€‚</p>

<p>å¹¸è¿çš„æ˜¯ï¼Œå»é™¤è¿™ç§ç©ºç™½æç¤ºéå¸¸å®¹æ˜“ï¼Œåœ¨ <code>git diff</code> å’Œ <code>git show</code> ä½¿ç”¨ <code>-w</code> é€‰é¡¹å°±å¯ä»¥è½»æ¾æå®šã€‚æ¯”å¦‚ï¼Œä¹‹å‰ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'> a <span class="o">{</span>
</span><span class='line'>   color: <span class="nv">$color</span>-links<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>-<span class="p">&amp;</span>:hover <span class="o">{</span>
</span><span class='line'>-  color: <span class="nv">$color</span>-links-hover<span class="p">;</span>
</span><span class='line'>-<span class="o">}</span>
</span><span class='line'>+  <span class="p">&amp;</span>:hover <span class="o">{</span>
</span><span class='line'>+    color: <span class="nv">$color</span>-links-hover<span class="p">;</span>
</span><span class='line'>+    text-decoration: underline<span class="p">;</span>
</span><span class='line'>+  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä½¿ç”¨ <code>-w</code> ä¹‹åï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'> a <span class="o">{</span>
</span><span class='line'>   color: <span class="nv">$color</span>-links<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>   <span class="p">&amp;</span>:hover <span class="o">{</span>
</span><span class='line'>     color: <span class="nv">$color</span>-links-hover<span class="p">;</span>
</span><span class='line'>+    text-decoration: underline<span class="p">;</span>
</span><span class='line'>   <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç°åœ¨å¯ä»¥å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œå”¯ä¸€æœ‰æ„ä¹‰çš„å˜åŒ–æ˜¯å¢åŠ äº† <code>text-decoration: underline;</code>ï¼Œè€Œå…¶ä½™â€‹â€‹çš„ <code>diff</code> æ˜¯æœ‰ç‚¹è¯¯å¯¼æ€§çš„ã€‚</p>

<h2>ä»…æ˜¾ç¤ºå•è¯çš„å˜åŒ–è€Œä¸æ˜¯æ•´è¡Œ</h2>

<p>å†™ä»£ç è·Ÿå†™æ–‡ç« ä¸åŒï¼ŒæŸ¥çœ‹å˜åŒ–çš„å•è¯è€Œä¸æ˜¯æ•´è¡Œé€šå¸¸ä¼šæ›´æœ‰ç”¨; è¿™åœ¨ç¼–è¾‘ markdown æ–‡æ¡£æ—¶å°¤å…¶æœ‰ç”¨ï¼Œå°±åƒç°åœ¨ã€‚</p>

<p>å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬åªè¦ä½¿ç”¨ <code>--word-diff</code> é€‰é¡¹å°±èƒ½æ˜¾ç¤ºå•è¯çš„å˜åŒ–ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git diff --word-diff
</span></code></pre></td></tr></table></div></figure>


<p>è·Ÿä¸ä½¿ç”¨ <code>--word-diff</code> é€‰é¡¹çš„åŒºåˆ«è¿˜æ˜¯å¾ˆå¤§çš„ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>-My friend Tom recently gave an excellent talk
</span><span class='line'>+My good friend Tom gave an excellent talk
</span></code></pre></td></tr></table></div></figure>


<p>å¦‚æœå¯ç”¨ <code>--word-diff</code>ï¼Œæˆ‘ä»¬èƒ½å¾—åˆ°æ›´ä¾¿äºç†è§£å’Œæ›´æœ‰ç”¨çš„æ¦‚è§ˆï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>My <span class="o">{</span>+good+<span class="o">}</span> friend Tom <span class="o">[</span>-recently-<span class="o">]</span> gave an excellent talk
</span></code></pre></td></tr></table></div></figure>


<p>æ³¨æ„åªæœ‰å˜åŒ–çš„æ–‡æœ¬è¢«çªå‡ºæ˜¾ç¤ºï¼ˆé€šè¿‡ <code>{+ +}</code> å’Œ <code>[- -]</code>)</p>

<h2>æŸ¥çœ‹æœ€è¿‘å·¥ä½œçš„åˆ†æ”¯</h2>

<p>åœ¨ä»»ä½•ç»™å®šçš„é¡¹ç›®ï¼Œåœ¨è®¸å¤šä¸åŒçš„åˆ†æ”¯ä¹‹é—´åˆ‡æ¢æ˜¯å¾ˆå¸¸è§çš„ï¼Œå¹¶ä¸”è·Ÿè¸ªå®ƒä»¬å¯èƒ½ç›¸å½“æ£˜æ‰‹ã€‚æˆ‘ä»¬å¯ä»¥è®© Git å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git <span class="k">for</span>-each-ref --count<span class="o">=</span><span class="m">10</span> --sort<span class="o">=</span>-committerdate refs/heads/ --format<span class="o">=</span><span class="s2">&quot;%(refname:short)&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>é€šè¿‡è¿™ä¸ªå‘½ä»¤å¯ä»¥çŸ¥é“æœ€è¿‘åœ¨å·¥ä½œçš„ 10ï¼ˆ&ndash;count=10ï¼‰ä¸ªåˆ†æ”¯ï¼ŒæŒ‰ç…§ä¸Šæ¬¡å·¥ä½œçš„æ—¶é—´æ’åºã€‚åªæ˜¾ç¤ºæœ¬åœ°åˆ†æ”¯ï¼ˆ<code>refs/heads/</code>ï¼‰ï¼Œå¹¶é€šè¿‡ <code>--format</code> é€‰é¡¹è·å¾—æ›´å‹å¥½çš„å‘ˆç°æ–¹å¼ã€‚</p>

<p>è¿™æ˜¯ä¸€ä¸ªæœ‰ç‚¹å†—é•¿çš„å‘½ä»¤ï¼Œæ‰€ä»¥æˆ‘ä¸ºæ­¤é…ç½®åˆ«å <code>$ git recent</code>ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>git config --global alias.recent <span class="s2">&quot;for-each-ref --count=10 --sort=-committerdate refs/heads/ --format=\&quot;%(refname:short)\&quot;&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>çœ‹åˆ°æ¯ä¸ªäººéƒ½åœ¨åšä»€ä¹ˆ</h2>

<p>æœ‰æ—¶å€™ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå›¢é˜Ÿé¢†å¯¼ï¼Œäº†è§£å›¢é˜Ÿæˆå‘˜åœ¨æ‰€æœ‰åˆ†æ”¯çš„è¡Œä¸ºæ¦‚è§ˆæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚å†ä¸€æ¬¡åœ°ï¼ŒGit å¯ä»¥è®©è¿™ä¸€åˆ‡å˜å¾—å¾ˆå®¹æ˜“ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log --all --oneline --no-merges
</span></code></pre></td></tr></table></div></figure>


<p>è¿™å¯ä»¥å¾—åˆ°ä¸€ä»½å…³äºæ‰€æœ‰äººçš„æ—¥å¿—æŠ¥å‘Šç®€åŒ–ç‰ˆï¼ˆå¸¦æœ‰ <code>--no-merges</code> é€‰é¡¹ï¼‰</p>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ <code>--since</code> é€‰é¡¹æ¥é™åˆ¶è¿”å›çš„æäº¤æ•°é‡ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log --all --since<span class="o">=</span><span class="s1">&#39;2 weeks&#39;</span> --oneline --no-merges
</span></code></pre></td></tr></table></div></figure>


<p>è¿™æ ·æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿‡å»çš„ä¸¤ä¸ªæ˜ŸæœŸé‡Œï¼Œæ¯ä¸ªäººéƒ½åœ¨åšä»€ä¹ˆã€‚</p>

<p>å¯ä»¥é…ç½®ä¸€ä¸ªåˆ«å <code>$ git overview</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>git config --global alias.overview <span class="s2">&quot;log --all --since=&#39;2 weeks&#39; --oneline --no-merges&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>æé†’ä½ è‡ªå·±å·²ç»åšäº†ä»€ä¹ˆ</h2>

<p>å½“ä½ å›åˆ°ä¸€ä¸ªæ¯”è¾ƒæ—§çš„é¡¹ç›®ï¼Œæˆ–æ˜¯åœ¨é•¿æ—¶é—´ä¼‘æ¯ä¹‹åå›åˆ°åŠå…¬å®¤ï¼Œå¯èƒ½ä¸çŸ¥é“ä½ æœ€ååœ¨åšä»€ä¹ˆå·¥ä½œï¼Œè¿™ç§æƒ…å†µæ—¶å¸¸å‘ç”Ÿã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ Git è½»æ¾è·å¾—æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­çš„å·¥ä½œæƒ…å†µï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log --all --oneline --no-merges --author<span class="o">=</span>&lt;your email address&gt;
</span></code></pre></td></tr></table></div></figure>


<p>å’Œä¸Šä¸€æ¡å¾ˆç±»ä¼¼ï¼Œåªæ˜¯æˆ‘ä»¬å°†æ—¥å¿—é™åˆ¶äºæˆ‘ä»¬è‡ªå·±çš„æäº¤ï¼Œä¹Ÿå¯ä»¥å¢åŠ  <code>--since</code> é™åˆ¶ã€‚</p>

<p>è¿™ä¹Ÿæœ‰ä¸€ä¸ªåˆ«å <code>$ git recap</code>ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>git config --global alias.recap <span class="s2">&quot;log --all --oneline --no-merges --author=name@mail.com&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>ä»Šå¤©çš„å·¥ä½œ</h2>

<p>åŒæ ·åœ°ï¼Œä¸åœ¨è¿™é‡Œè®¨è®ºå¦‚ä½•è¡¡é‡å¼€å‘äººå‘˜çš„ç”Ÿäº§åŠ›ï¼Œä½†æˆ‘è§‰å¾—è®©å®¢æˆ·çŸ¥é“æˆ‘åœ¨ä»»ä½•ä¸€å¤©çš„å·¥ä½œæƒ…å†µæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä¸æ˜¯è¦ä½ ä¿ç•™å®Œæˆä»»åŠ¡çš„è¯¦ç»†åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Git è·å–æ‰€æœ‰è¿™äº›ä¿¡æ¯ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log --since<span class="o">=</span>00:00:00 --all --no-merges --oneline --author<span class="o">=</span>&lt;your email address&gt;
</span></code></pre></td></tr></table></div></figure>


<p>è¿™å°†è®°å½•ï¼ˆ<code>log</code>ï¼‰ ä½ å·¥ä½œçš„æ‰€æœ‰ï¼ˆ<code>--all</code>ï¼‰åˆ†æ”¯ï¼Œè°ï¼ˆ<code>--author</code>ï¼‰ä»ï¼ˆ<code>--since</code>ï¼‰åˆå¤œå¼€å§‹éƒ½åšäº†ä»€ä¹ˆï¼Œï¼ˆä¸åŒ…æ‹¬åˆå¹¶æäº¤ <code>--no-merges</code>ï¼‰ï¼Œå¹¶æä¾›ä¸€ä¸ªç®€å•çš„ä¸€è¡Œ ï¼ˆ<code>--oneline</code>ï¼‰ æ¦‚è¿°ã€‚</p>

<p>æˆ‘æœ‰è¿™ä¸ªåˆ«å <code>$ git today</code>ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>git config --global alias.today <span class="s2">&quot;log --since=00:00:00 --all --no-merges --oneline --author=name@mail.com&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>ç”Ÿæˆæ›´æ”¹æ—¥å¿—</h2>

<p>ç»´æŠ¤ä¸€ä»½ CHANGELOG å¯èƒ½æœ‰ç‚¹ä¹å‘³ï¼Œæˆ‘ä»¬å¿…é¡»æŸ¥çœ‹è‡ªä¸Šæ¬¡å‘å¸ƒä»¥æ¥æ‰€åšçš„æ‰€æœ‰å·¥ä½œï¼Œç„¶åæå–å…¶ä¸­æœ‰ç”¨çš„éƒ¨åˆ†ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Git æ¥ç»™æˆ‘ä»¬ä¸€ä¸ªå¥½çš„å¼€å¤´ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log --oneline --no-merges &lt;last tag&gt;..HEAD
</span></code></pre></td></tr></table></div></figure>


<p>æ³¨æ„ï¼š<code>HEAD</code> æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä½ çœç•¥ï¼ˆå³&hellip; &ndash;no-merges <last tag>..ï¼‰ï¼Œ<code>HEAD</code> ä¼šæ˜¯éšå«çš„ï¼Œå½“ç„¶è¿™æ ·å¯ä»¥èŠ‚çœå‡ æ¬¡æ•²å‡»é”®ç›˜çš„æ—¶é—´ã€‚</p>

<p>è¿™å°†åˆ›å»ºä¸€ä¸ªç®€åŒ–çš„æ—¥å¿—ï¼Œæ˜¾ç¤ºæœ€åä¸€ä¸ªå‘å¸ƒç‰ˆæœ¬å’Œ <code>HEAD</code> ä¹‹é—´çš„æ‰€æœ‰æäº¤ï¼ˆä¸åŒ…æ‹¬åˆå¹¶æäº¤ï¼‰ã€‚</p>

<p>ä¾‹å¦‚ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log --oneline --no-merges 1.0.0..
</span><span class='line'>1257b95 <span class="o">[</span>refs <span class="c">#00019] Bump version</span>
</span><span class='line'>2b9b28e <span class="o">[</span>refs <span class="c">#00019] Add auto width class</span>
</span><span class='line'>17b8eb1 <span class="o">[</span>refs <span class="c">#00015] Tidy up README.md</span>
</span><span class='line'>bbe7d05 <span class="o">[</span>refs <span class="c">#00012] Rename Supercell main mixin</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¿™å‘Šè¯‰æˆ‘ï¼Œè‡ªä»ä¸Šæ¬¡å‘å¸ƒï¼ˆ1.0.0ï¼‰åˆ°å½“å‰é¡¹ç›®çŠ¶æ€ï¼ˆ<code>HEAD</code>ï¼‰ï¼Œå·²ç»å®Œæˆå“ªäº›å·¥ä½œã€‚è¿™å¯¹äº CHANGELOG æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒã€‚</p>

<p>æ³¨æ„ï¼šä¸ä»…ä»…é€‚ç”¨äº tagï¼Œè¿˜å¯ä»¥ä½¿ç”¨æäº¤å“ˆå¸Œã€‚</p>

<h2>æ£€æŸ¥éœ€è¦æ‹‰å–å“ªäº›å˜åŒ–</h2>

<p>å¦‚æœä½ åœ¨ä¸€æ®µæ—¶é—´å†…ä¸åœ¨é¡¹ç›®ï¼Œå¯èƒ½éœ€è¦å…ˆæ£€æŸ¥ä¸Šæ¸¸çš„å˜æ›´ï¼Œç„¶åå†å°†è¿™äº›æ›´æ–°ä¸‹è½½åˆ°æœ¬åœ°åˆ†æ”¯ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log --oneline --no-merges HEAD..&lt;remote&gt;/&lt;branch&gt;
</span></code></pre></td></tr></table></div></figure>


<p>æ³¨æ„ï¼šåŒæ ·åœ°ï¼Œ<code>HEAD</code> åœ¨è¿™é‡Œæ˜¯å¯é€‰çš„ï¼Œçœç•¥å°†ä½¿å…¶éšå«ã€‚</p>

<p>ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä½ åœ¨åº¦å‡æ—¶åœ¨ç‰¹æ€§åˆ†æ”¯åšäº†ä»€ä¹ˆï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git checkout feature/fonts
</span><span class='line'><span class="nv">$ </span>git fetch
</span><span class='line'><span class="nv">$ </span>git log --oneline --no-merges ..origin/feature/fonts
</span></code></pre></td></tr></table></div></figure>


<p>æˆ‘ä½¿ç”¨è¿™ä¸ªåˆ«å <code>$ git upstream</code>ã€‚</p>

<h2>æ£€æŸ¥å³å°†ä¸Šä¼ çš„å†…å®¹</h2>

<p>æœ€å¥½çš„æƒ…å†µæ˜¯å¯ä»¥ç»å¸¸æäº¤å’Œä¸Šä¼ ï¼Œä½†å¦‚æœæŸç§åŸå› å¯¼è‡´æœ‰å¤§é‡çš„æœ¬åœ°æäº¤å°šæœªä¸Šä¼ ï¼Œå¯ä»¥å¿«é€Ÿå›é¡¾ä¸€ä¸‹éƒ½æ˜¯ä»€ä¹ˆã€‚</p>

<p>ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åè½¬ä¹‹å‰çš„å‘½ä»¤å°±èƒ½è½»æ¾å®ç°ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log --oneline --no-merges &lt;remote&gt;/&lt;branch&gt;..HEAD
</span></code></pre></td></tr></table></div></figure>


<p>ä¾‹å¦‚ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git fetch
</span><span class='line'><span class="nv">$ </span>git log --oneline --no-merges origin/feature/fonts..HEAD
</span></code></pre></td></tr></table></div></figure>


<p>æ³¨æ„ï¼šåŒæ ·åœ°ï¼Œ<code>HEAD</code> åœ¨è¿™é‡Œæ˜¯å¯é€‰çš„ï¼Œçœç•¥å°†ä½¿å…¶éšå«ã€‚</p>

<p>è¿™å°†è®°å½• <code>HEAD</code> éœ€è¦ä¸Šä¼ åˆ° <code>&lt;remote&gt;/&lt;branch&gt;</code> çš„æäº¤ã€‚</p>

<p>æˆ‘ä½¿ç”¨è¿™ä¸ªåˆ«å <code>$ git local</code>ã€‚</p>

<h2>æŸ¥çœ‹å¤æ‚æ—¥å¿—</h2>

<p>ä¸Šé¢çš„æ¯ä¸€ä¸ªä¾‹å­éƒ½ä½¿ç”¨ç®€åŒ–çš„æ—¥å¿—ï¼Œå› ä¸ºåªæƒ³å¿«é€Ÿäº†è§£å‘ç”Ÿäº†ä»€ä¹ˆã€‚å¯¹äºæ›´å¤šç»†èŠ‚ï¼Œæˆ‘ä½¿ç”¨å¸¦æœ‰ <code>--graph</code> é€‰é¡¹çš„æ—¥å¿—å’Œä¸€äº›é¢å¤–çš„é€‰é¡¹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git log --graph --all --decorate --stat --date<span class="o">=</span>iso
</span></code></pre></td></tr></table></div></figure>


<p>è¿™å°†ç»™å‡ºæ‰€æœ‰ï¼ˆ<code>--all</code>ï¼‰åˆ†æ”¯åŸºäº <code>--graph</code> çš„æäº¤è®°å½• <code>--stat</code>ï¼ˆæ·»åŠ ï¼Œåˆ é™¤ï¼‰æ—¥å¿—ã€‚<code>--decorate</code> é€‰é¡¹ä¼šå‘Šè¯‰æˆ‘ä»¬æäº¤ä¿¡æ¯é€‚ç”¨äºé‚£äº›åˆ†æ”¯ï¼Œè¿˜åŒ…å«ä¸€ä¸ªæ›´åŠ ä¸¥æ ¼çš„æ—¥æœŸæ ¼å¼ã€‚</p>

<p>æˆ‘ä½¿ç”¨è¿™ä¸ªåˆ«å <code>$ git graph</code>ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>git config --global alias.graph <span class="s2">&quot;log --graph --all --decorate --stat --date=iso&quot;</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ç§»é™¤åœ¨ ESM æ¨¡å¼ç”Ÿæˆçš„ä¸¥æ ¼æ¨¡å¼]]></title>
    <link href="http://blog.mirreal.net/blog/2017/06/05/remove-strict-node/"/>
    <updated>2017-06-05T18:00:00+08:00</updated>
    <id>http://blog.mirreal.net/blog/2017/06/05/remove-strict-node</id>
    <content type="html"><![CDATA[<h2>èµ·æº</h2>

<p>é¡¹ç›®å‡çº§æ„å»ºæ–¹å¼ï¼Œä»¥å‰çš„ä»£ç é‡‡ç”¨ AMD é£æ ¼ç»„ç»‡ä»£ç ï¼Œå¹¶ä½¿ç”¨ <code>r.js</code> å®Œæˆæ‰“åŒ…ä¼˜åŒ–å·¥ä½œã€‚åç»­æˆå‘˜é€‰æ‹©é‡‡ç”¨ ES6 çš„é£æ ¼ç¼–å†™ä»£ç ï¼Œç„¶å webpack + babel å®Œæˆæ‰“åŒ…æ„å»ºã€‚è¿ç§»å·¥ä½œå¹¶ä¸å¦‚æƒ³è±¡ä¸­é‚£ä¹ˆå®¹æ˜“ï¼Œç»ˆäºå®Œæˆå„ç§é…ç½®ï¼Œæµ‹è¯•æ—¶å€™å‘ç°é—®é¢˜ï¼šæŠ›å‡ºä¸€ä¸ªè¯­æ³•é”™è¯¯ã€‚é”™è¯¯å¾ˆå¿«è¢«å®šä½ï¼Œå±äºå†å²ä»£ç çš„ä¸è§„èŒƒå†™æ³•ï¼Œä¹‹æ‰€ä»¥ç°åœ¨æš´éœ²å‡ºæ¥æ˜¯å› ä¸ºæ–°çš„æ„å»ºæ–¹å¼ä¼šåŠ å…¥ <code>"use strict"</code>ã€‚</p>

<h2>ä¸¥æ ¼æ¨¡å¼</h2>

<p>åœ¨ç¼–å†™ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Â <code>strict mode</code>Â æ˜¯ä¸€ç§å¾ˆå¥½çš„æ–¹å¼ï¼Œä¸¥æ ¼æ¨¡å¼ä¼šå°† JavaScript é™·é˜±ç›´æ¥å˜æˆæ˜æ˜¾çš„é”™è¯¯ï¼Œæ¯”å¦‚æœªå£°æ˜å¯¼è‡´çš„å…¨å±€å˜é‡ï¼Œå¯ä»¥è®©æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­å°±å‘ç°é”™è¯¯ã€‚</p>

<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScript è¿™é—¨è¯­è¨€ä¹‹å‰å­˜åœ¨å¤§é‡ä¸å¥½çš„è®¾è®¡ï¼Œä½¿ç”¨ä¸¥æ ¼æ¨¡å¼æ„å‘³ç€åœ¨é‡‡ç”¨ä¸€ç§é™åˆ¶æ€§æ›´é«˜çš„æ–¹å¼ç¼–å†™ä»£ç ï¼ŒåŒæ—¶æ›´ â€œå®‰å…¨â€ã€‚ä½†è¿™é‡Œæ‰€è°“çš„å®‰å…¨åœ¨ç”Ÿäº§ç¯å¢ƒåˆå¯èƒ½æ˜¯å¦å¤–ä¸€å›äº‹ï¼Œå°¤å…¶æ˜¯å¯¹äºé‚£äº›ä¸Šäº†å¹´çºªçš„å†å²ä»£ç ï¼Œæˆ‘ä»¬æ›´å€¾å‘äºåœ¨ç”Ÿäº§ç¯å¢ƒå»é™¤ä¸¥æ ¼æ¨¡å¼ã€‚</p>

<h2>ES2015+</h2>

<p>ç°åœ¨å¤§éƒ¨åˆ†äººå·²ç»åœ¨ä½¿ç”¨æ›´å¼ºå¤§ï¼Œæ›´å…·æœ‰è¡¨ç°åŠ›çš„Â <code>ES2015+</code>Â ç¼–å†™ä»£ç ã€‚å¯èƒ½è¿˜ä¼šä½¿ç”¨åˆ°Â babelÂ æ¥è½¬åŒ–æˆç”¨äºç”Ÿäº§ç¯å¢ƒè¿è¡Œçš„ä»£ç ï¼Œåœ¨ä½¿ç”¨Â <code>preset es2015</code>Â æ—¶ï¼Œä¼šè‡ªåŠ¨åŠ å…¥Â <code>â€œuse strictâ€</code>ã€‚</p>

<p>babelÂ çš„å¤„ç†æ–¹å¼æ˜¯å°† ES2015 æ¨¡å—è½¬æ¢æˆÂ <code>CommonJS</code>Â æ ¼å¼çš„ï¼Œç„¶åå†ç»Ÿä¸€å¤„ç†ï¼Œå³Â <code>transform-es2015-modules-commonjs</code>ï¼Œè¿™ä¸ªæ’ä»¶ä½äºÂ <code>preset es2015</code>Â ä¸­ï¼Œå¹¶ä¸”ä¾èµ–äºÂ <code>transform-strict-mode</code></p>

<h2>ä¹Ÿè®¸ä½ ä¼šæƒ³å»æ‰ä¸¥æ ¼æ¨¡å¼</h2>

<p>ä¹Ÿè®¸ä½ ä¼šæƒ³å»æ‰ä¸¥æ ¼æ¨¡å¼ï¼Œæ¯•ç«Ÿå¯¹äºä¸€äº›å†å²ä»£ç ï¼Œå¾ˆéš¾é¢„æµ‹åŠ å…¥ä¸¥æ ¼æ¨¡å¼ä¼šå¯¼è‡´ä»€ä¹ˆå¼‚å¸¸ã€‚</p>

<!-- å¯ä»¥ä»ä¸¤ä¸ªæ–¹é¢æ¥è€ƒè™‘ï¼š -->


<ul>
<li>ç¬¬ä¸€ï¼Œåœ¨å¤„ç†è¿‡ç¨‹ä¸­å»æ‰Â <code>"use strict"</code>ï¼Œè¿™é‡Œä¸ç”¨æˆ‘ä»¬è‡ªå·±å»å†™äº†ï¼Œå€ŸåŠ©è¿™ä¸ªæ’ä»¶Â <code>transform-remove-strict-mode</code></li>
<li>ç¬¬äºŒï¼Œä¸ç”¨Â <code>transform-es2015-modules-commonjs</code>ï¼Œå¯ä»¥ä½¿ç”¨Â <code>webpack 2</code>Â ç›´æ¥å¤„ç† ES6 æ¨¡å—</li>
</ul>


<h3>æ–¹æ¡ˆä¸€</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>npm install babel-plugin-transform-remove-strict-mode --save-dev
</span></code></pre></td></tr></table></div></figure>


<p>ä¿®æ”¹Â <code>.babelrc</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;presets&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="p">[</span><span class="s2">&quot;es2015&quot;</span><span class="p">],</span>
</span><span class='line'>        <span class="s2">&quot;stage-0&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;react&quot;</span>
</span><span class='line'>    <span class="p">],</span>
</span><span class='line'>    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="s2">&quot;transform-remove-strict-mode&quot;</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>æ–¹æ¡ˆäºŒ</h3>

<blockquote><p><a href="https://babeljs.io/docs/plugins/preset-es2015/#optionsmodules">modules</a></p>

<p><code>"amd" | "umd" | "systemjs" | "commonjs" | false</code>, defaults toÂ <code>"commonjs"</code>.</p>

<p>Enable transformation of ES6 module syntax to another module type.</p>

<p>Setting this toÂ <code>false</code>Â will not transform modules.</p></blockquote>

<p>æˆ‘ä»¬å»æ‰Â <code>preset es2015</code>Â çš„æ¨¡å—å¤„ç†ï¼Œæ”¹ç”±Â <code>webpack</code>Â æ¥å¤„ç†ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;presets&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="p">[</span><span class="s2">&quot;es2015&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nt">&quot;modules&quot;</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}],</span>
</span><span class='line'>        <span class="s2">&quot;stage-0&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;react&quot;</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¿™ç§æ–¹æ¡ˆä¹Ÿèƒ½è§£å†³ä¹‹å‰é—®é¢˜ï¼Œå› ä¸ºä¹‹å‰å­˜åœ¨é—®é¢˜çš„æ¨¡å—ä½¿ç”¨ ES5 ç¼–å†™çš„ï¼Œä½¿ç”¨ AMD é£æ ¼ã€‚</p>

<p>ä½†æ˜¯ï¼Œå‚è€ƒÂ <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-strict-mode-code">http://www.ecma-international.org/ecma-262/6.0/#sec-strict-mode-code</a>Â ï¼Œåœ¨ ES6 è¯­æ³•ä¸‹ï¼Œæ¨¡å—ç³»ç»Ÿä»¥åŠ class ç­‰ä»ç„¶éƒ½æ˜¯å·¥ä½œåœ¨Â <code>strict mode</code>Â ä¸‹çš„ï¼Œè€Œ webpack2 çš„ä¹Ÿç¡®å®æ˜¯è¿™æ ·å¤„ç†çš„ã€‚</p>

<p>å®ç°å¯¹è¯­è¨€æœ¬èº«æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½¿ç”¨æ–°è¯­æ³•æ„å‘³ç€æˆ‘ä»¬è¦æŠ›å¼ƒæ‰ä»¥å‰ä¸€äº›è®¾è®¡ä¸å¥½çš„åœ°æ–¹ï¼Œç¼–å†™é«˜è´¨é‡çš„ä»£ç ã€‚</p>

<h3>å¯¹æ¯”</h3>

<p>ç›¸æ¯”è€Œè¨€ï¼Œæ–¹æ¡ˆäºŒæ›´åˆé€‚ï¼Œå› ä¸ºæ–¹æ¡ˆä¸€å¤„ç†çš„è¿‡ç¨‹å®é™…æ˜¯åˆ é™¤æ‰€æœ‰<code>"use strict"</code>ï¼Œæœ‰æ—¶å€™æœªå¿…ç¬¦åˆä½ æœ¬æ¥çš„æ„æ„¿ã€‚</p>

<p>é‡‡ç”¨æ–¹æ¡ˆäºŒè¿˜æœ‰ä¸€äº›å¥½å¤„ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨Â <code>webpack2</code>Â å·²ç»æ”¯æŒçš„Â <code>tree shaking</code>Â ä¼˜åŒ–æŠ€æœ¯ï¼Œå› ä¸ºè¿™é¡¹æŠ€æœ¯åŸºäºÂ <code>ES6 Modules</code>ï¼Œå¾—è®©Â <code>webpack</code>Â ç›´æ¥å¤„ç†æ‰èƒ½ä½¿ç”¨ã€‚</p>

<h2>åç»­</h2>

<p>è¿™ç§å±äºå†å²é—ç•™é—®é¢˜ï¼Œæ¯”å¦‚ä¸å°å¿ƒå¼•å…¥çš„å…¨å±€å˜é‡ï¼Œç±»ä¼¼çš„ä»£ç è´¨é‡é—®é¢˜è¿˜ä¸å°‘ã€‚</p>

<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ lint å·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬é¿å…è¿™ç§é—®é¢˜ï¼Œå¯¹äºä»£ç è´¨é‡çš„è¦æ±‚å¿…é¡»è‹›åˆ»ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ç¼–å†™ç°ä»£ JavaScript ä»£ç ]]></title>
    <link href="http://blog.mirreal.net/blog/2017/06/02/writing-modern-javascript-code/"/>
    <updated>2017-06-02T18:00:00+08:00</updated>
    <id>http://blog.mirreal.net/blog/2017/06/02/writing-modern-javascript-code</id>
    <content type="html"><![CDATA[<blockquote><p>åŸæ–‡ä½œè€…ï¼š<a href="https://twitter.com/scastiel">SÃ©bastien Castiel</a></p>

<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://dev.to/scastiel/writing-modern-javascript-code">Writing modern JavaScript code</a></p>

<p>è¯´ç‚¹ä»€ä¹ˆï¼šè¿™æ˜¯ä¸€ç¯‡å¾ˆæœ´ç´ çš„æ–‡ç« ï¼Œè®²çš„é“ç†éƒ½æ‡‚ï¼Œä½†å®é™…ä¸Šï¼Œåœ¨å·¥ä½œä¸­é‡åˆ°ç±»ä¼¼çš„æƒ…å½¢å´æœªå¿…å¦‚æ­¤ï¼Œç¼–å†™å¯ç»´æŠ¤ï¼Œå¯é˜…è¯»ï¼Œæ›´å®‰å…¨çš„ä»£ç æ˜¯æˆ‘ä»¬åº”æœ‰çš„è´£ä»»ã€‚</p></blockquote>

<p>æ˜¯ä¸æ˜¯è¿˜è®¤ä¸º JavaScript æ˜¯ä¸€é—¨ç”¨äºåœ¨å…‰æ ‡æ‚¬æµ®æ—¶æ”¹å˜é¡µé¢å…ƒç´ çš„è¯­è¨€ï¼Ÿè¿™äº›æ—¥å­å·²ç»ä¸å¤å­˜åœ¨ï¼Œæ¯ä¸€ç§è¯­è¨€éƒ½åœ¨éšç€æ—¶é—´æ¨ç§»è€Œå‘å±•ï¼Œæˆ‘ä»¬ä½¿ç”¨è¯­è¨€çš„æ–¹å¼åŒæ ·ä¹Ÿåœ¨å‘å±•ã€‚çœ‹ä¸€ä¸‹ä½ ä¸€ä¸¤å¹´å‰å†™çš„ä»£ç ï¼šä¼šæ„Ÿåˆ°ç¾æ„§å—ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œè¿™ç¯‡æ–‡ç« åº”è¯¥å¾ˆé€‚åˆä½ ã€‚</p>

<p>è¿™é‡Œä¼šåˆ—å‡ºä¸€äº›æ‰€è°“çš„æœ€ä½³å®è·µï¼Œç›®çš„æ˜¯è®©ä½ çš„ JavaScript ä»£ç æ›´å®¹æ˜“ç¼–å†™ï¼Œé˜…è¯»å’Œç»´æŠ¤ã€‚</p>

<h2>ä½¿ç”¨å¯æ ¼å¼åŒ–ä»£ç çš„ linter</h2>

<p>ç¬¬ä¸€ä¸ªå»ºè®®æ˜¯ä½¿ç”¨ linter å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ£€æŸ¥åœ¨ä¸åŒæ–‡ä»¶æ˜¯å¦éµå®ˆä¸€è‡´çš„è§„åˆ™ï¼Œå°¤å…¶æ˜¯å½“ä¸åŒå¼€å‘äººå‘˜åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸Šå·¥ä½œï¼šç¼©è¿›ï¼Œæ‹¬å·ä¸­çš„ç©ºæ ¼ï¼Œæ›¿æ¢ <code>==</code> ä¸º <code>===</code> &hellip;</p>

<p>ä½†æ›´é‡è¦çš„æ˜¯ï¼Œå°½å¯èƒ½ä½¿ç”¨ linter å·¥å…·è‡ªåŠ¨ä¿®å¤ä»£ç ã€‚<a href="http://eslint.org/">ESLint</a> å°±åšå¾—å¾ˆå¥½ï¼ˆå¸¦æœ‰ <code>--fix</code> é€‰é¡¹ï¼‰ï¼Œè€Œä¸”ä¸æ‰€æœ‰ä¸»æµ IDE å®Œç¾é›†æˆï¼Œå¯ä»¥åœ¨ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤æ–‡ä»¶ã€‚</p>

<p>è¿˜å¯ä»¥ä½¿ç”¨ <a href="https://github.com/prettier/prettier">Prettier</a>ï¼Œä¸è¿‡è¿™æ¬¾å·¥å…·æ›´æ³¨é‡æ ¼å¼åŒ–è€Œä¸æ˜¯é™æ€æ£€æŸ¥ï¼Œä½†å¤„ç†åçš„ç»“æœåŸºæœ¬ç›¸åŒã€‚</p>

<p>ä¸‹ä¸€æ­¥å°†ä»‹ç»ä¸ linter å·¥å…·ä¸€èµ·ä½¿ç”¨çš„è§„åˆ™ï¼š</p>

<h2>ä¸ºä½ çš„ linter å®šåˆ¶ç°ä»£åŒ–çš„è§„åˆ™</h2>

<p>å¦‚æœä¸çŸ¥é“ä½ çš„ä»£ç éœ€è¦ä»€ä¹ˆæ ·çš„è§„åˆ™ï¼Œå¯ä»¥å‚è€ƒï¼š<a href="https://standardjs.com/">StandardJS</a>ã€‚è¿™æ˜¯ä¸€ä¸ª<strong>éå¸¸</strong>ä¸¥æ ¼çš„ linterï¼Œæ— æ³•ä¿®æ”¹é…ç½®ï¼Œä½†é‡Œé¢çš„æ¯ä¸€æ¡è§„åˆ™å·²ç»è¶Šæ¥è¶Šå¤šåœ°è¢«ç¤¾åŒºæ¥çº³ã€‚æ¯”å¦‚ï¼š</p>

<ul>
<li>ä½¿ç”¨ 2 ä¸ªç©ºæ ¼ç¼©è¿›ï¼ˆæˆ‘æ›¾ç»ä½¿ç”¨ 4 ä¸ªç©ºæ ¼ï¼Œä½†å®é™…ä½¿ç”¨èµ·æ¥ 2 ä¸ªç©ºæ ¼å¾ˆä¸é”™ï¼‰</li>
<li>ä¸ä½¿ç”¨åˆ†å·ï¼ˆä¸€å¼€å§‹å¯èƒ½ä¼šè§‰å¾—å¥‡æ€ªï¼Œä½†å‡ å¤©åå°±å†ä¹Ÿå›ä¸å»äº†ï¼‰</li>
<li>åœ¨å…³é”®å­—ï¼ˆå¦‚ ifï¼‰å’ŒèŠ±æ‹¬å·ä½¿ç”¨ç©ºæ ¼ï¼Œåœ¨æ‹¬å·ä¸ä½¿ç”¨ç©ºæ ¼</li>
<li><a href="https://standardjs.com/rules.html">ç­‰ç­‰</a>ã€‚</li>
</ul>


<p>StandardJS æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Node æ¨¡å—ï¼Œå¯ä»¥è¿›è¡Œ lint å’Œä¿®å¤ä»£ç ï¼Œä½†å¦‚æœè¦åœ¨ç°æœ‰çš„å¤§å‹é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”æƒ³è¦åœç”¨ä¸€äº›è§„åˆ™ï¼ˆå› ä¸ºæœ‰äº›åœ°æ–¹å¯èƒ½éœ€è¦ä½œå¤§é‡ä¿®æ”¹ï¼‰ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <a href="https://github.com/feross/eslint-config-standard">ESLint é¢„å®šé…ç½®</a>ã€‚æ¯”å¦‚ï¼Œæˆ‘å°±åœç”¨äº†è§„åˆ™ <a href="http://eslint.org/docs/rules/no-mixed-operators">no-mixed-operators</a> å’Œ <a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/no-webpack-loader-syntax.md">import / no-webpack-loader-syntax</a>ã€‚</p>

<h2>ä½¿ç”¨ ES2015+ çš„æ–°ç‰¹æ€§</h2>

<p>å¦‚æœä½ åœ¨ä½¿ç”¨ JavaScript å¼€å‘ï¼Œæ ¹æœ¬æ²¡åŠæ³•ä¸å¬è¯´ ES2015 +ï¼ˆæˆ– ES6ï¼ŒES7 &hellip;ï¼‰çš„ç‰¹æ€§ã€‚æœ‰çš„å·²ç»æ˜¯æˆ‘ç¦»ä¸å¼€çš„ï¼š</p>

<ul>
<li>ç®­å¤´å‡½æ•°ï¼šå¯¹äºå‡½æ•°å¼ç¼–ç¨‹ï¼Œæ¯”å¦‚å†™ <code>x =&gt; x * 2</code> è¿™æ ·çš„å‡½æ•°éå¸¸æœ‰ç”¨ï¼ˆè§ä¸‹ä¸€ç‚¹ï¼‰</li>
<li>ç±»ï¼šåœæ­¢ä½¿ç”¨åŸå‹å‡½æ•°ï¼Œä½¿ç”¨ç±»æ›´é…·ç‚«ï¼ˆä½†ä¸è¦æ»¥ç”¨ï¼ŒJavaScript æ¯”ä»»ä½•é¢å‘å¯¹è±¡çš„è¯­è¨€å¥½å¤šäº†ï¼‰</li>
<li>å¯¹æ•°ç»„å’Œå¯¹è±¡çš„æ“ä½œï¼š</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">doSomething</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kr">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">doSomethingElse</span><span class="p">()</span>
</span><span class='line'>  <span class="kr">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">doSomethingWithA</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
</span><span class='line'>  <span class="kr">const</span> <span class="nx">otherResults</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">c</span><span class="o">:</span> <span class="s1">&#39;ğŸ˜º&#39;</span><span class="p">,</span> <span class="nx">d</span><span class="o">:</span> <span class="s1">&#39;ğŸ¶&#39;</span> <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="p">...</span><span class="nx">otherResults</span> <span class="p">}</span> <span class="c1">// equivalent to { a: a, b: b }</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="kr">const</span> <span class="p">{</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="p">...</span><span class="nx">rest</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">doSomething</span><span class="p">()</span> <span class="c1">// Also works with arrays!</span>
</span><span class='line'><span class="c1">// `rest` looks like { b: ..., d: &#39;ğŸ¶&#39; }</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>ä½¿ç”¨ <code>async/await</code> ç¼–å†™æ›´ç®€å•çš„å¼‚æ­¥å¤„ç†ï¼š</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Please try to write the same code with classic promises ;)</span>
</span><span class='line'><span class="nx">async</span> <span class="kd">function</span> <span class="nx">doSomething</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kr">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">getValueForA</span><span class="p">()</span>
</span><span class='line'>  <span class="kr">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">getValueForBFromA</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
</span><span class='line'>  <span class="kr">const</span> <span class="p">[</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">]</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
</span><span class='line'>    <span class="c1">// parallel execution</span>
</span><span class='line'>    <span class="nx">getValueForC</span><span class="p">(),</span> <span class="nx">getValueForDFromB</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
</span><span class='line'>  <span class="p">])</span>
</span><span class='line'>  <span class="kr">const</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">calculateTotal</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">total</span> <span class="o">/</span> <span class="mi">1000</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>æƒ³çŸ¥é“å¦‚ä½•ä½¿ç”¨è¿™äº›ç‰¹æ€§å‘¢ï¼Ÿ<a href="https://blog.castiel.me/posts/002-use-the-coolest-es6-features-everywhere.html">æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« èƒ½ç»™ä¸€äº›å»ºè®®</a>ã€‚ï¼ˆé¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Node.jsï¼Œå¯èƒ½ä¸å†éœ€è¦ Babel å°±èƒ½ä½¿ç”¨è¿™äº›æ–°ç‰¹æ€§ï¼‰</p>

<h2>ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹</h2>

<p>å‡½æ•°å¼ç¼–ç¨‹æœ€è¿‘å¾ˆçƒ­é—¨ï¼Œå–å¾—ä¸å°‘æˆå°±ï¼Œè€Œä¸”ä¸ä»…ä»…æ˜¯åœ¨ JavaScript ä¸­ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå‡½æ•°å¼ç¼–ç¨‹èƒ½ä½¿ä»£ç æ›´å…·å¯é¢„æµ‹æ€§ï¼Œç¡®å®šæ€§ï¼Œæ›´å®‰å…¨ï¼Œä¸€æ—¦ä¹ æƒ¯è¿™ç§æ–¹å¼ï¼Œä»£ç ä¼šæ›´å®¹æ˜“ç»´æŠ¤ã€‚è¿™é‡Œæœ‰ä¸€äº›ç®€å•çš„å»ºè®®ï¼š</p>

<p>é¦–å…ˆï¼Œåœæ­¢ä½¿ç”¨ for å¾ªç¯ï¼Œåœ¨å¤§å¤šæ•°ï¼ˆå¯èƒ½æ˜¯æ‰€æœ‰ï¼Ÿï¼‰æƒ…å†µä¸‹æ ¹æœ¬ä¸éœ€è¦ã€‚ä¾‹å¦‚ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">13</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">7</span> <span class="p">}]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Instead of:</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kr">const</span> <span class="nx">calculatedValue</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">value</span> <span class="o">*</span> <span class="mi">10</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">calculatedValue</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">res</span><span class="p">[</span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">calculatedValue</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Prefer:</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">arr</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">elem</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">calculatedValue</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span> <span class="o">*</span> <span class="mi">10</span> <span class="p">}))</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">elem</span> <span class="o">=&gt;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">calculatedValue</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">elem</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span><span class='line'>    <span class="p">[</span><span class="nx">elem</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">calculatedValue</span><span class="p">,</span>
</span><span class='line'>    <span class="p">...</span><span class="nx">acc</span>
</span><span class='line'>  <span class="p">}),</span> <span class="p">{})</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¥½å§ï¼Œè¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ªéå¸¸æç«¯çš„ä¾‹å­ï¼Œå¯¹äºä¸ä¹ æƒ¯å‡½æ•°å¼ç¼–ç¨‹çš„äººè€Œè¨€ï¼Œå¯èƒ½çœ‹èµ·æ¥æ›´åŠ å¤æ‚ã€‚ä½†æˆ‘ä»¬å¯ä»¥ç¨å¾®ç®€åŒ–ä¸€ä¸‹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">enrichElementWithCalculatedValue</span> <span class="o">=</span>
</span><span class='line'>  <span class="nx">elem</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">calculatedValue</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span> <span class="o">*</span> <span class="mi">10</span> <span class="p">})</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">filterElementsByValue</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">=&gt;</span>
</span><span class='line'>  <span class="nx">elem</span> <span class="o">=&gt;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">calculatedValue</span> <span class="o">&gt;</span> <span class="nx">value</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">aggregateElementInObject</span> <span class="o">=</span> <span class="p">(</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">elem</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span><span class='line'>  <span class="p">[</span><span class="nx">elem</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">calculatedValue</span><span class="p">,</span>
</span><span class='line'>  <span class="p">...</span><span class="nx">acc</span>
</span><span class='line'><span class="p">})</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">arr</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">enrichElementWithCalculatedValue</span><span class="p">)</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">filterElementsByValue</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">aggregateElementInObject</span><span class="p">,</span> <span class="p">{})</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸‰ä¸ªå‡½æ•°ï¼Œå…¶åŠŸèƒ½åŸºæœ¬ä¸Šä¸å…¶åå­—ä¸€è‡´ã€‚ç¬¬äºŒä¸ªå»ºè®®ï¼šåˆ›å»ºå±€éƒ¨å‡½æ•°ï¼ˆå³ä½¿æ˜¯åœ¨å·²ç»å­˜åœ¨çš„å‡½æ•°ä¸­ï¼‰æ¥è¯´æ˜ä»£ç çš„åŠŸèƒ½ï¼Œä¸éœ€è¦ä½¿ç”¨æ³¨é‡Šã€‚</p>

<p>æ³¨æ„ï¼Œä¸‰ä¸ªå±€éƒ¨å‡½æ•°ä¸ä¿®æ”¹å®ƒä»¬çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚æ²¡æœ‰å¤–éƒ¨å˜é‡è¢«ä¿®æ”¹ï¼Œæ²¡æœ‰å…¶ä»–æœåŠ¡è¢«è°ƒç”¨&hellip;åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå®ƒä»¬è¢«ç§°ä¸º<em>çº¯å‡½æ•°</em>ã€‚çº¯å‡½æ•°å…·æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼š</p>

<ul>
<li>å¾ˆå®¹æ˜“æµ‹è¯•ï¼Œå› ä¸ºä»ç»™å®šå‚æ•°åªæœ‰ä¸€ä¸ªå¯èƒ½çš„ç»“æœï¼Œä¸ç®¡è¢«è°ƒç”¨äº†å¤šå°‘æ¬¡;</li>
<li>æ— è®ºåº”ç”¨çŠ¶æ€å¦‚ä½•ï¼Œéƒ½èƒ½ä¿è¯ç›¸åŒçš„ç»“æœ;</li>
<li>åº”ç”¨çŠ¶æ€åœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰å’Œä¹‹åä¿æŒä¸å˜ã€‚</li>
</ul>


<p>æ‰€ä»¥æˆ‘çš„ç¬¬ä¸‰ä¸ªå»ºè®®æ˜¯ï¼šå°½å¯èƒ½åœ°ä½¿ç”¨çº¯å‡½æ•°ã€‚</p>

<h2>å…¶ä»–çš„ä¸€äº›å»ºè®®</h2>

<ul>
<li>ä¹ æƒ¯äºä½¿ç”¨å¼‚æ­¥ä»£ç ï¼Œå¹¶å¤šä½¿ç”¨ promiseï¼Œçœ‹çœ‹ <a href="http://reactivex.io/rxjs/">RxJS</a> çš„ observalesï¼ˆæœ‰<a href="http://reactivex.io/learnrx/">ä¸€ä¸ªå¾ˆæ£’çš„æ•™ç¨‹å…³äºä»å‡½æ•°å¼ç¼–ç¨‹åˆ°å“åº”å¼ç¼–ç¨‹</a>ï¼‰</li>
<li>å†™æµ‹è¯•ï¼è¿™åº”è¯¥æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œä½†æ˜¯æ®æˆ‘æ‰€çŸ¥å¾ˆå¤šé¡¹ç›®éƒ½æœ‰æœªç»æµ‹è¯•çš„ä»£ç ï¼Œå°½ç®¡æµ‹è¯• JavaScriptï¼ˆå‰ç«¯æˆ–åç«¯ï¼‰å¹¶ä¸å›°éš¾ã€‚</li>
<li>ä½¿ç”¨æœ€æ–°çš„è¯­è¨€ç‰¹æ€§ï¼šæ¯”å¦‚ä¸è¦å†å†™ <code>arr.indexOf(elem) !== -1</code>ï¼Œè€Œåº”è¯¥å†™æˆ <code>arr.includes(elem)</code>ã€‚</li>
<li>å¤§é‡é˜…è¯»æŠ€æœ¯æ–‡ç« ï¼š<a href="https://www.reddit.com/r/javascript/">JavaScript subreddit</a> æ˜¯äº†è§£ç›®å‰ç¤¾åŒºæœ€é…·åšæ³•çš„ä¸€ä¸ªå¾ˆå¥½çš„æ¥æºã€‚</li>
</ul>


<p>æ€»è€Œè¨€ä¹‹ï¼Œæœ€å¥½çš„å»ºè®®å°±æ˜¯ï¼š<strong>æ€»æ˜¯é‡æ„ä½ çš„ä»£ç </strong>ã€‚æ¯”å¦‚æ”¹è¿›ä½ ä¸€å¹´å‰å†™è¿‡çš„æ¨¡å—ï¼Ÿå€Ÿæ­¤æœºä¼šï¼Œç”¨ <code>const</code> å–ä»£ <code>var</code>ï¼Œä½¿ç”¨ç®­å¤´å‡½æ•°æˆ– <code>async/await</code> ç®€åŒ–ä»£ç &hellip;&hellip;å’Œä½ å–œæ¬¢çš„ä»£ç å·¥ä½œä¸€ä»¶å¾ˆæ„‰æ‚¦çš„äº‹ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JavaScript æ¨¡å—åŒ–ç°çŠ¶]]></title>
    <link href="http://blog.mirreal.net/blog/2017/05/29/the-state-of-javascript/"/>
    <updated>2017-05-29T18:00:00+08:00</updated>
    <id>http://blog.mirreal.net/blog/2017/05/29/the-state-of-javascript</id>
    <content type="html"><![CDATA[<blockquote><p>åŸæ–‡ä½œè€…ï¼šJohannes Ewald <a href="https://twitter.com/Jhnnns">@Jhnnns</a></p>

<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://medium.com/webpack/the-state-of-javascript-modules-4636d1774358">The state of JavaScript modules</a></p>

<p>å·²è·åŸä½œè€…æˆæƒç¿»è¯‘åŠå‘å¸ƒ</p></blockquote>

<p>ESM, CJS, UMD, AMDâ€Šâ€”â€Šåˆ°åº•åº”è¯¥é€‰æ‹©å“ªä¸€ä¸ªï¼Ÿ</p>

<p>æœ€è¿‘ <a href="https://twitter.com/addyosmani/status/859296190323597313">åœ¨ twitter</a> ä¸Šæœ‰å¾ˆå¤šå…³äº <a href="http://2ality.com/2014/09/es6-modules-final.html">ES Module</a> ç°çŠ¶çš„è®¨è®ºï¼Œ<a href="https://twitter.com/bradleymeck/status/863061949021650944">å°¤å…¶æ˜¯åœ¨ Node.js ä¸Š</a>ï¼Œä»–ä»¬è®¡åˆ’å¼•å…¥æ–°çš„æ–‡ä»¶æ‰©å±•å <code>*.mjs</code>ã€‚äººä»¬æœ‰è¶³å¤Ÿç†ç”±å¯¹æ­¤æ„Ÿåˆ° <a href="https://twitter.com/tankredhase/status/861864123922907136">æ‹…å¿§å’Œä¸ç¡®å®š</a>ï¼Œå› ä¸ºè¿™ä¸ªè¯é¢˜å¼‚å¸¸å¤æ‚ï¼Œæ¥ä¸‹æ¥ä¼šå°½åŠ›é˜è¿°æ¸…æ¥šé—®é¢˜ã€‚</p>

<h2>æ¥è‡ªè¿œå¤çš„ææƒ§</h2>

<p>å¤§å¤šæ•°å‰ç«¯å¼€å‘è€…åº”è¯¥è¿˜è®°å¾— <a href="https://medium.com/@trek/last-week-i-had-a-small-meltdown-on-twitter-about-npms-future-plans-around-front-end-packaging-b424dd8d367a">Javascript ä¾èµ–ç®¡ç†çš„é»‘æš—æ—¶æœŸ</a>ã€‚é‚£ä¸ªæ—¶å€™ï¼Œä½ éœ€è¦æŠŠä¸€ä¸ªåº“å¤åˆ¶ç²˜è´´åˆ° vendor æ–‡ä»¶å¤¹ï¼Œç„¶åä½œä¸ºä¸€ä¸ªå…¨å±€å˜é‡å¼•å…¥ï¼Œè¦è‡ªå·±å»æŒ‰æ¬¡åºç»„åˆæ‰€æœ‰ä¸œè¥¿ï¼Œå¯èƒ½è¿˜è¦ç®¡ç†å‘½åç©ºé—´ã€‚</p>

<p>åœ¨è¿‡å»çš„é‚£äº›å¹´ï¼Œæˆ‘ä»¬èƒ½æ·±åˆ»ä½“ä¼šåˆ°å…¬å…±æ¨¡å—æ ¼å¼åŒ–å’Œä¸­å¤®æ¨¡å—ç®¡ç†çš„ä»·å€¼ã€‚</p>

<p>åœ¨ä»Šå¤©ï¼Œä¸ç®¡æ˜¯å‘å¸ƒè¿˜æ˜¯ä½¿ç”¨ä¸€ä¸ªåº“éƒ½è¦å®¹æ˜“å¾—å¤šï¼Œåªéœ€è¦ä½¿ç”¨ <code>npm publish</code> å’Œ <code>npm install</code> å‘½ä»¤å°±è¡Œã€‚è¿™å°±æ˜¯äººä»¬ä¼šé‚£ä¹ˆç´§å¼ ä¸¤ç§æ¨¡å—ç³»ç»Ÿå…¼å®¹æ€§é—®é¢˜çš„åŸå› ï¼šä»–ä»¬ä¸æƒ³å¤±å»å·²æœ‰çš„èˆ’é€‚åŒºã€‚</p>

<p>æ¥ä¸‹æ¥æˆ‘ä¼šè§£é‡Šå’Œæ€»ç»“ç°æœ‰å®ç°çš„æƒ…å†µï¼Œä»¥åŠä¸ºä»€ä¹ˆ Node ç”Ÿæ€è¿ç§»åˆ° ES Moduleï¼ˆESMï¼‰ä¼šé‚£ä¹ˆéš¾ã€‚åœ¨æœ€åï¼Œæ€»ç»“è¿™äº›å˜åŒ–å¯¹ webpack ä½¿ç”¨è€…å’Œæ¨¡å—ä½œè€…æœ‰ä»€ä¹ˆå½±å“ã€‚</p>

<h2>ç°æœ‰å®ç°</h2>

<p>ç›®å‰ï¼ŒESM æœ‰ä¸‰ç§æ–¹å¼çš„å®ç°ï¼š</p>

<ul>
<li>æµè§ˆå™¨</li>
<li>webpack ä»¥åŠç±»ä¼¼çš„æ„å»ºå·¥å…·</li>
<li>Nodeï¼ˆæœªå®Œæˆï¼Œ<a href="https://twitter.com/rauschma/status/866334160218095617">ä½†å¯èƒ½åœ¨å¹´åº•ä½œä¸ºä¸€ä¸ªå®éªŒåŠŸèƒ½</a>ï¼‰</li>
</ul>


<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£ç°åœ¨çš„è®¨è®ºï¼Œé¦–å…ˆè¦çŸ¥é“ ES2015 åŒ…å«ä¸¤ç§æ¨¡å¼ï¼š</p>

<ul>
<li><code>script</code> ç”¨äºå…·æœ‰å…¨å±€å‘½åç©ºé—´çš„å¸¸è§„è„šæœ¬</li>
<li><code>module</code> ç”¨äºå…·æœ‰æ˜ç¡®å¯¼å…¥å’Œå¯¼å‡ºçš„æ¨¡å—åŒ–ä»£ç </li>
</ul>


<p>å¦‚æœä½ è¯•å›¾åœ¨ <code>script</code> æ ‡ç­¾ä½¿ç”¨ <code>import</code> æˆ–è€… <code>export</code> è¯­å¥ï¼Œä¼šæŠ›å‡ºä¸€ä¸ª SyntaxErrorã€‚è¿™ç§è¯­å¥åœ¨å…¨å±€ç¯å¢ƒä¸‹æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚å¦ä¸€æ–¹é¢ï¼Œ<code>module</code> æ¨¡å¼å³æ„å‘³ç€<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Strict_mode">ä¸¥æ ¼æ¨¡å¼</a>ï¼Œç¦æ­¢ä½¿ç”¨æŸäº›è¯­è¨€ç‰¹æ€§ï¼Œæ¯”å¦‚ <code>with</code> è¯­å¥ã€‚å› æ­¤ï¼Œéœ€è¦åœ¨è„šæœ¬è¢«è§£æå’Œæ‰§è¡Œä¹‹å‰å®šä¹‰æ¨¡å¼ã€‚</p>

<h2>æµè§ˆå™¨ä¸­çš„ ESM</h2>

<p>æˆªè‡³åˆ° 2017 å¹´ 5 æœˆï¼Œæ‰€æœ‰ä¸»æµæµè§ˆå™¨éƒ½å¼€å§‹åšäº† ESM çš„å®ç°å·¥ä½œã€‚ä¸è¿‡ï¼Œå¤§éƒ¨åˆ†ä»å¤„äºåœ¨å®éªŒæ€§è´¨ã€‚è¿™é‡Œä¸ä¼šåšè¯¦ç»†ä»‹ç»ï¼Œå› ä¸º <a href="https://jakearchibald.com/2017/es-modules-in-browsers/">Jake Archibald å·²ç»å†™äº†ä¸€ç¯‡å¾ˆå‰å®³çš„æ–‡ç« </a>ã€‚</p>

<p>é™¤äº†ä¸€äº›å°çš„å›°éš¾ï¼Œåœ¨æµè§ˆå™¨ä¸­å®ç°èµ·æ¥éå¸¸å®¹æ˜“ï¼Œå› ä¸ºä»¥å‰å¹¶æ²¡æœ‰æ¨¡å—ç³»ç»Ÿã€‚æƒ³è¦æŒ‡å®š <code>module</code> æ¨¡å¼ï¼Œéœ€è¦åœ¨ <code>script</code> æ ‡ç­¾æ·»åŠ  <code>type="module"</code> å±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;module&quot;</span> <span class="na">src=</span><span class="s">&quot;main.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œç°åœ¨åªèƒ½ä½¿ç”¨æœ‰æ•ˆçš„ <code>URL</code> ä½œä¸ºæ¨¡å—æ ‡è¯†ç¬¦ã€‚æ¨¡å—æ ‡è¯†ç¬¦æ˜¯ç”¨äº require æˆ– import å…¶ä»–æ¨¡å—çš„å­—ç¬¦ä¸²ã€‚ä¸ºäº†ç¡®ä¿æœªæ¥å…¼å®¹ CJS æ¨¡å—æ ‡è¯†ç¬¦ï¼Œâ€œçº¯â€ å¯¼å…¥æ ‡è¯†ç¬¦ï¼ˆå¦‚ <code>import "lodash"</code>ï¼‰ç°åœ¨è¿˜ä¸æ”¯æŒã€‚æ¨¡å—æ ‡è¯†ç¬¦å¿…é¡»æ˜¯ç»å¯¹ <code>URL</code> æˆ–è€…æ˜¯ä»¥ <code>/</code>ï¼Œ  <code>./</code>,  <code>../</code> å¼€å¤´ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Supported:</span>
</span><span class='line'><span class="kr">import</span> <span class="p">{</span><span class="nx">foo</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;https://jakearchibald.com/utils/bar.js&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kr">import</span> <span class="p">{</span><span class="nx">foo</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;/utils/bar.js&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kr">import</span> <span class="p">{</span><span class="nx">foo</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./bar.js&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kr">import</span> <span class="p">{</span><span class="nx">foo</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../bar.js&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Not supported:</span>
</span><span class='line'><span class="kr">import</span> <span class="p">{</span><span class="nx">foo</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;bar.js&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kr">import</span> <span class="p">{</span><span class="nx">foo</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;utils/bar.js&#39;</span><span class="p">;</span>
</span><span class='line'><span class="c1">// Example from https://jakearchibald.com/2017/es-modules-in-browsers/</span>
</span></code></pre></td></tr></table></div></figure>


<p>åŒæ ·éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦å¤„åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œæ¯ä¸ªå¯¼å…¥ä¹Ÿå°†è¢«è§£æä¸º <code>module</code>ï¼Œè€Œä¸”æ²¡æœ‰åŠæ³• <code>import</code> ä¸€ä¸ª <code>script</code>ã€‚</p>

<h2>ESM ä¸ webpack</h2>

<p>ç±»ä¼¼ webpack è¿™æ ·çš„æ„å»ºå·¥å…·é€šå¸¸ä¼šå°è¯•ç”¨ <code>module</code> æ¨¡å¼è§£æä»£ç ï¼Œæœ‰é—®é¢˜å†åˆ‡å›åˆ° <code>script</code> æ¨¡å¼ã€‚è¿™äº›å·¥å…·æœ€ç»ˆä¼šç”Ÿæˆä¸€æ®µ <code>script</code>ï¼Œé€šå¸¸æ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ¨¡æ‹Ÿ CJS å’Œ ESM è¡Œä¸ºçš„æ¨¡å—è¿è¡Œæ—¶ã€‚</p>

<p>æˆ‘ä»¬ä»¥è¿™ä¸¤ä¸ªç®€å•çš„ ESM ä¸ºä¾‹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// a.js</span>
</span><span class='line'><span class="kr">export</span> <span class="kd">let</span> <span class="nx">number</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
</span><span class='line'><span class="kr">export</span> <span class="kd">function</span> <span class="nx">incr</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">number</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// test.js</span>
</span><span class='line'><span class="kr">import</span> <span class="p">{</span> <span class="nx">number</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;./a&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">number</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>webpack ä½¿ç”¨å‡½æ•°åŒ…è£…å™¨å°è£…æ¨¡å—èŒƒå›´å’Œå¯¹è±¡å¼•ç”¨æ¥æ¨¡æ‹Ÿ <a href="http://2ality.com/2015/07/es6-module-exports.html">ESM å®æ—¶ç»‘å®š</a>ã€‚æ¯æ¬¡ç¼–è¯‘ï¼Œè¿˜åŒ…æ‹¬ä¸€ä¸ªæ¨¡å—è¿è¡Œæ—¶ï¼Œè´Ÿè´£å¼•å¯¼å’Œç¼“å­˜æ¨¡å—ã€‚æ­¤å¤–ï¼Œå°†æ¨¡å—æ ‡è¯†è½¬æ¢ä¸ºæ•°å­—æ¨¡å— IDã€‚è¿™æ ·å¯ä»¥å‡å°‘æ‰“åŒ…çš„å¤§å°å’Œå¼•å¯¼æ—¶é—´ã€‚</p>

<p>è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹ç¼–è¯‘è¾“å‡ºï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">modules</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// This is the module runtime.</span>
</span><span class='line'>    <span class="c1">// It&#39;s only included once per compilation.</span>
</span><span class='line'>    <span class="c1">// Other chunks share the same runtime.</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">installedModules</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>    <span class="c1">// The require function</span>
</span><span class='line'>    <span class="kd">function</span> <span class="nx">__webpack_require__</span><span class="p">(</span><span class="nx">moduleId</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="p">...</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'>    <span class="c1">// Load entry module and return exports</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">__webpack_require__</span><span class="p">(</span><span class="nx">__webpack_require__</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="p">})</span>
</span><span class='line'><span class="p">([</span> <span class="c1">// An array that maps module ids to functions</span>
</span><span class='line'>    <span class="c1">// a.js as module id 0</span>
</span><span class='line'>    <span class="kd">function</span> <span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">__webpack_exports__</span><span class="p">,</span> <span class="nx">__webpack_require__</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">__webpack_exports__</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">configurable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">get</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">number</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>        <span class="kd">let</span> <span class="nx">number</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="kd">function</span> <span class="nx">incr</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">number</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="c1">// test.js as module id 1</span>
</span><span class='line'>    <span class="kd">function</span> <span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">__webpack_exports__</span><span class="p">,</span> <span class="nx">__webpack_require__</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">__WEBPACK_IMPORTED_MODULE_0__a__</span> <span class="o">=</span> <span class="nx">__webpack_require__</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Object reference as &quot;live binding&quot;</span>
</span><span class='line'>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">__WEBPACK_IMPORTED_MODULE_0__a__</span><span class="p">[</span><span class="s2">&quot;a&quot;</span> <span class="cm">/* number */</span><span class="p">]);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç®€åŒ–çš„ webpack è¾“å‡ºï¼Œæ¨¡æ‹Ÿ ES Modules è¡Œä¸º</p>

<p>ç»“æœå·²ç»ç®€åŒ–å¹¶åˆ é™¤äº†ä¸€äº›ä¸æ­¤ç¤ºä¾‹æ— å…³çš„ä»£ç ã€‚ä½ ä¼šå‘ç°ï¼Œwebpack åœ¨ <code>exports</code> å¯¹è±¡ä¸Šå°†æ‰€æœ‰ <code>export</code> è¯­å¥æ›¿æ¢æˆ <code>Object.defineProperty</code>ï¼Œå¹¶ä½¿ç”¨å±æ€§è®¿é—®å™¨æ›¿æ¢å¯¹å¼•å…¥å€¼çš„æ‰€æœ‰å¼•ç”¨ã€‚è¿˜è¦æ³¨æ„æ¯ä¸ª ESM å¼€å§‹æ—¶çš„ <code>"use strict"</code> æŒ‡ä»¤ï¼Œè¿™æ˜¯ç”± webpack è‡ªåŠ¨æ·»åŠ ï¼Œåœ¨ ESM ä¸­å¿…é¡»æ˜¯ä¸¥æ ¼æ¨¡å¼ã€‚</p>

<p>è¿™ç§å®ç°åªæ˜¯æ¨¡æ‹Ÿï¼Œå› ä¸ºå®ƒè¯•å›¾æ¨¡ä»¿ ESM å’Œ CJS çš„è¡Œä¸º &ndash; ä½†ä¸æ˜¯ä¸å…¶å®Œå…¨ä¿æŒä¸€è‡´ã€‚æ¯”å¦‚ï¼Œè¿™ç§æ¨¡æ‹Ÿå¹¶ä¸ç¬¦åˆæŸäº›è¾¹ç¼˜æƒ…å†µã€‚çœ‹ä¸‹é¢è¿™ä¸ªæ¨¡å—ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¦‚æœä½ é€šè¿‡åŠ ä¸Š <code>babel-preset-es2015</code> çš„ Babel æ¥è¿è¡Œï¼Œç»“æœæ˜¯ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºï¼ŒBabel å‡è®¾é»˜è®¤æ˜¯ ESMï¼Œå› ä¸º <code>module</code> æ¨¡å¼å³ä»£è¡¨ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šå°† <code>this</code> åˆå§‹åŒ–ä¸º <code>undefined</code>ã€‚</p>

<p>ç„¶è€Œï¼Œä½¿ç”¨ webpackï¼Œç»“æœæ˜¯ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨å¼•å¯¼æ¨¡å—æ—¶ï¼Œ<code>this</code> å°†æŒ‡å‘ <code>exports</code> ï¼Œä¸ Node.js ä½¿ç”¨çš„ CJS è¡Œä¸ºä¸€è‡´ã€‚è¿™æ˜¯å› ä¸ºè¯­æ³•ä¸Šä¸ç¡®å®šæ˜¯ <code>script</code> è¿˜æ˜¯ <code>module</code>ï¼Œè§£æå™¨æ— æ³•åˆ¤æ–­è¯¥æ¨¡å—æ˜¯ ESM è¿˜æ˜¯ CJSã€‚åœ¨ä¸æ˜ç¡®çš„æ—¶å€™ï¼Œwebpack ä¼šæ¨¡æ‹Ÿ CJSï¼Œå› ä¸ºå®ƒä»ç„¶æ˜¯æœ€å—æ¬¢è¿çš„æ¨¡å—é£æ ¼ã€‚</p>

<p>è¿™ç§æ¨¡æ‹Ÿå…¶å®å·²ç»åŒ…å«äº†å¾ˆå¤šæƒ…å†µï¼Œå› ä¸ºæ¨¡å—ä½œè€…é€šå¸¸ä¼šé¿å…è¿™ç§ä»£ç ã€‚ç„¶è€Œï¼Œâ€œå¾ˆå¤šæƒ…å†µâ€å¯¹äºåƒ Node.js è¿™æ ·çš„å¹³å°æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºå®ƒéœ€è¦ä¿è¯æ‰€æœ‰æœ‰æ•ˆçš„ JavaScript ä»£ç éƒ½èƒ½æ­£å¸¸è¿è¡Œã€‚</p>

<h2>Node.js ä¸­çš„ ESM</h2>

<p>Node.js åœ¨æ‰§è¡Œ ESM æ—¶é‡åˆ°äº†éº»çƒ¦ï¼Œå› ä¸ºä»ç„¶éœ€è¦æ”¯æŒ CJSï¼Œè¯­æ³•çœ‹èµ·æ¥ç›¸ä¼¼ï¼Œä½†è¿è¡Œæ—¶è¡Œä¸ºå®Œå…¨ä¸åŒã€‚<a href="https://github.com/nodejs/CTC">Node.js æ ¸å¿ƒæŠ€æœ¯å§”å‘˜ä¼š</a>ï¼ˆCTCï¼‰æˆå‘˜ James M Snell æ’°å†™äº†<a href="https://hackernoon.com/node-js-tc-39-and-modules-a1118aecf95e">ä¸€ç¯‡å¾ˆå¥½çš„æ–‡ç« æ¥è§£é‡Š CJS ä¸ ESM ä¹‹é—´çš„å·®å¼‚</a>ã€‚</p>

<p>å½’ç»“èµ·æ¥ï¼ŒCJS æ˜¯ä¸€ä¸ªåŠ¨æ€æ¨¡å—ç³»ç»Ÿï¼ŒESM æ˜¯é™æ€æ¨¡å—ç³»ç»Ÿã€‚</p>

<h3>CJS</h3>

<ul>
<li>å…è®¸åŠ¨æ€åŒæ­¥ <code>require()</code></li>
<li>å¯¼å‡ºä»…åœ¨æ¨¡å—æ‰§è¡Œåæ‰çŸ¥é“</li>
<li>å¯¼å‡ºå¯ä»¥åœ¨æ¨¡å—åˆå§‹åŒ–åæ·»åŠ ï¼Œæ›¿æ¢å’Œåˆ é™¤</li>
</ul>


<h3>ESM</h3>

<ul>
<li>åªå…è®¸é™æ€åŒæ­¥ <code>import</code></li>
<li>åœ¨æ¨¡å—æ‰§è¡Œä¹‹å‰ï¼Œå¯¼å…¥å’Œå¯¼å‡ºå·²ç»å…³è”</li>
<li>å¯¼å…¥å’Œå¯¼å‡ºæ˜¯ä¸å¯å˜çš„</li>
</ul>


<p>ç”±äº  CJS æ—©äº ES2015ï¼Œæ‰€ä»¥ä¸€ç›´åœ¨ <code>script</code> æ¨¡å¼ä¸‹è§£æï¼Œå°è£…é€šè¿‡ä½¿ç”¨å‡½æ•°åŒ…è£…å™¨å®ç°ã€‚åœ¨ Node.js ä¸­åŠ è½½ CJSï¼Œå®é™…ä¸Šä¼šæ‰§è¡Œä¸æ­¤ç±»ä¼¼çš„ä»£ç ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">exports</span><span class="o">:</span> <span class="p">{}</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">require</span> <span class="o">=</span> <span class="nx">makeRequireFunction</span><span class="p">();</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">filename</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span><span class="p">;</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">dirname</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">__filename</span><span class="p">,</span> <span class="nx">__dirname</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="cm">/* YOUR CODE */</span>
</span><span class='line'><span class="p">})(</span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">filename</span><span class="p">,</span> <span class="nx">dirname</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¯¹ Node.js çš„ CommonJS æ¨¡å—çš„ç®€å•å‡½æ•°åŒ…è£…</p>

<p>é—®é¢˜å‡ºç°äº†ï¼Œå°†ä¸¤ä¸ªæ¨¡å—ç³»ç»Ÿé›†æˆåˆ°åŒä¸€ä¸ªè¿è¡Œæ—¶æ—¶ï¼ŒESM å’Œ CJS ä¹‹é—´çš„å¾ªç¯ä¾èµ–å¯èƒ½ä¼šè¿…é€Ÿå¯¼è‡´ç±»ä¼¼æ­»é”çš„æƒ…å†µã€‚</p>

<p>è€Œä¸”ï¼Œç”±äºç°æœ‰ CJS æ¨¡å—æ•°é‡åºå¤§ï¼Œä¹Ÿä¸èƒ½ç›´æ¥æ”¾å¼ƒå¯¹ CJS çš„æ”¯æŒã€‚ä¸ºäº†é¿å… Node.js ç”Ÿæ€çš„ä¸­æ–­ï¼Œæœ‰ä¸¤ç‚¹å·²ç»å¾ˆæ˜æ˜¾ï¼š</p>

<ul>
<li>ç°æœ‰çš„ CJS ä»£ç å¿…é¡»ä»¥ç›¸åŒçš„æ–¹å¼ç»§ç»­å·¥ä½œ</li>
<li>ä¸¤ä¸ªæ¨¡å—ç³»ç»Ÿéƒ½å¿…é¡»åŒæ—¶ä¸”å°½å¯èƒ½æ— ç¼åœ°å·¥ä½œ</li>
</ul>


<h3>ç›®å‰çš„æƒè¡¡</h3>

<p>2017 å¹´ 3 æœˆï¼Œç»è¿‡å‡ ä¸ªæœˆçš„è®¨è®ºï¼ŒCTC ç»ˆäºæ‰¾åˆ°äº†ä¸€ç§è§£å†³é—®é¢˜çš„åŠæ³•ã€‚ç”±äºåœ¨ ES è§„èŒƒå’Œå¼•æ“ä¸æ”¹å˜çš„æƒ…å†µä¸‹æ— æ³•è¿›è¡Œæ— ç¼é›†æˆï¼Œ<a href="https://github.com/bmeck/node-eps/blob/a1eab9bf023bbe13a79ddb18f0622a5d57215f9b/002-es-modules.md">CTC å†³å®šå¼€å§‹ä¸€äº›æƒè¡¡ä¹‹åçš„å®ç°å·¥ä½œ</a>ï¼š</p>

<h4>1.ESM å¿…é¡»æ˜¯ <code>*.mjs</code> æ–‡ä»¶æ‰©å±•å</h4>

<p>è¿™æ˜¯ç”±äºä¸Šé¢æåŠçš„æ¨¡ç³Šè¯­æ³•é—®é¢˜ï¼Œæ— æ³•é€šè¿‡è§£ææ¥ç¡®åˆ‡çŸ¥æ™“ JavaScript ä»£ç æ˜¯ä»€ä¹ˆç±»å‹ã€‚ä¸ºäº† Node.js å‘åå…¼å®¹çš„ç›®æ ‡ï¼Œä½œè€…éœ€è¦åŠ å…¥ä¸€ç§æ–°æ¨¡å¼ã€‚<a href="https://github.com/nodejs/node/wiki/ES6-Module-Detection-in-Node#detection-problem">å·²ç»æœ‰å…³äºå„ç§æ›¿ä»£å“çš„è®¨è®º</a>ï¼Œä½†ä½¿ç”¨ä¸åŒæ–‡ä»¶æ‰©å±•åæ˜¯è§£å†³ç›®å‰é—®é¢˜çš„æœ€ä½³æƒè¡¡ã€‚</p>

<h4>2.CJS åªèƒ½å¼‚æ­¥å¯¼å…¥ ESM import()</h4>

<p>Node.js å°†å¼‚æ­¥åŠ è½½ ESMï¼Œä»¥ä¾¿å°½å¯èƒ½æ¥è¿‘æµè§ˆå™¨çš„è¡Œä¸ºã€‚å› æ­¤ï¼ŒåŒæ­¥çš„ <code>require()</code> åœ¨ ESM æ˜¯ä¸å¯èƒ½çš„ï¼Œå¹¶ä¸”ä¾èµ–äº ESM çš„æ¯ä¸ªåŠŸèƒ½éƒ½éœ€è¦å¼‚æ­¥ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">driverPromise</span> <span class="o">=</span> <span class="kr">import</span><span class="p">(</span><span class="s2">&quot;dbdriver&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">exports</span><span class="p">.</span><span class="nx">readFromDb</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">query</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>   <span class="k">return</span> <span class="p">(</span><span class="nx">await</span> <span class="nx">driverPromise</span><span class="p">).</span><span class="nx">read</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h4>3. CJS å‘ ESM æš´éœ²ä¸€ä¸ªä¸å¯å˜çš„é»˜è®¤å¯¼å‡º</h4>

<p>ä½¿ç”¨ Babel æˆ– Webpackï¼Œæˆ‘ä»¬é€šå¸¸å°† CJS é‡æ„ä¸º ESMï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// CJS</span>
</span><span class='line'><span class="kr">const</span> <span class="p">{</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">);</span>
</span><span class='line'><span class="c1">// ESM</span>
</span><span class='line'><span class="kr">import</span> <span class="p">{</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;c&quot;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>å†ä¸€æ¬¡åœ°ï¼Œä»–ä»¬çš„è¯­æ³•çœ‹èµ·æ¥å¾ˆç›¸ä¼¼ï¼Œä½†å¿½ç•¥äº† CJS ä¸­æ²¡æœ‰å‘½åå¯¼å‡ºçš„äº‹å®ã€‚åªæœ‰ä¸€ä¸ªå«åš <code>default</code> çš„å¯¼å‡ºï¼Œç­‰åŒäºåœ¨ CJS æ¨¡å—å®Œæˆè®¡ç®—åä¸€ä¸ªä¸å¯å˜çš„ <code>module.exports</code> ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œæœ‰å¯èƒ½å°† <code>module.exports</code> è§£æ„æˆå‘½åå¯¼å…¥ï¼Œä½†è¿™éœ€è¦å¯¹æ ‡å‡†ä½œæ›´å¤§çš„å˜æ›´ã€‚<a href="https://github.com/bmeck/node-eps/blob/a1eab9bf023bbe13a79ddb18f0622a5d57215f9b/002-es-modules.md#461-default-imports">è¿™å°±æ˜¯ç°åœ¨ CTC å†³å®šé‡‡å–è¿™ç§æ–¹å¼çš„åŸå› </a>ã€‚</p>

<h4>4.æ¨¡å—èŒƒå›´çš„å˜é‡ç±»ä¼¼ <code>module</code>ï¼Œ<code>require</code> ä»¥åŠ <code>__filename</code> åœ¨ ESM ä¸å­˜åœ¨</h4>

<p>Node.js å’Œæµè§ˆå™¨ä¼šå®ç°ä¸€äº› ESM çš„ç‰¹æ€§ï¼Œ<a href="https://github.com/whatwg/html/issues/1013">ä½†æ ‡å‡†åŒ–è¿‡ç¨‹ä»åœ¨è¿›è¡Œä¸­</a>ã€‚</p>

<p>é‰´äºå°† CJS å’Œ ESM é›†æˆåˆ°ä¸€ä¸ªè¿è¡Œæ—¶çš„å·¥ç¨‹æŒ‘æˆ˜ï¼ŒCTC åœ¨è¯„ä¼°è¾¹ç¼˜æƒ…å†µå’Œæƒè¡¡æ–¹é¢åšäº†éå¸¸å¥½çš„å·¥ä½œã€‚æ¯”å¦‚ä½¿ç”¨ä¸åŒçš„æ–‡ä»¶æ‰©å±•åæ˜¯å°±æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„è§£å†³æ–¹æ¡ˆã€‚</p>

<p>å®é™…ä¸Šï¼Œä¸€ä¸ªæ–‡ä»¶æ‰©å±•åå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å¦‚ä½•è§£é‡Šçš„æç¤ºã€‚å¦‚æœä¸€ä¸ª <code>module</code> ä¸æ˜¯ <code>script</code>ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ä¸åŒçš„æ–‡ä»¶æ‰©å±•åã€‚å…¶ä»–å·¥å…·ï¼ˆå¦‚ linter æˆ– IDE ï¼‰ä¹Ÿå¯ä»¥è·å–ç›¸åŒä¿¡æ¯ã€‚</p>

<p>å½“ç„¶ï¼Œå¼•å…¥æ–°çš„æ–‡ä»¶æ‰©å±•åæœ‰æˆæœ¬ï¼Œä½†æ˜¯ä¸€æ—¦æœåŠ¡å™¨å’Œå…¶ä»–åº”ç”¨ç¨‹åºç¡®è®¤ <code>*.mjs</code> ä¸ºJavaScriptï¼Œæˆ‘ä»¬å¾ˆå¿«å°±ä¼šå¿˜è®°è¿™ä¸ªäº‰è®®ã€‚</p>

<h2>å°† * .mjs ä½œä¸º Node.js çš„ Python 3ï¼Ÿ</h2>

<p>è€ƒè™‘åˆ°æ‰€æœ‰è¿™äº›é™åˆ¶ï¼Œäººä»¬å¯èƒ½ä¼šé—®ï¼Œè¿™ç§è¿‡æ¸¡å°†å¯¹ç°åœ¨çš„ç”Ÿæ€é€ æˆä»€ä¹ˆæ ·çš„æŸå®³ã€‚è™½ç„¶ CTC ä¼šåŠªåŠ›è§£å†³é—®é¢˜ï¼Œä½†ç¤¾åŒºå¦‚ä½•é‡‡ç”¨è¿™ä¸€ç‚¹ä»ç„¶å­˜åœ¨å¾ˆå¤§ä¸ç¡®å®šæ€§ã€‚è¿™ç§ä¸ç¡®å®šæ€§ <a href="https://twitter.com/sindresorhus/status/861987349529452545">è¢«ä¼—å¤šçŸ¥åçš„ NPM æ¨¡å—ä½œè€…</a> å†æ¬¡å¼ºè°ƒï¼Œä»–ä»¬å£°ç§°å°†ä¸ä¼šåœ¨æ¨¡å—ä¸­ä½¿ç”¨ <code>*.mjs</code>ã€‚</p>

<p><a href="http://blog.thezerobit.com/2014/05/25/python-3-is-killing-python.html">Python 3 is killing Python</a></p>

<p>å¾ˆéš¾é¢„æµ‹ç¤¾åŒºå¦‚ä½•ååº”ï¼Œä½†æ˜¯åº”è¯¥ä¸ä¼šå¯¹ç°åœ¨çš„ç”Ÿæ€é€ æˆå¤§ç ´åï¼Œç”šè‡³èƒ½çœ‹åˆ°ä» CJS å¹³ç¨³è¿‡æ¸¡åˆ° ESMã€‚ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š</p>

<h3>1.ä¸ CJS ä¸¥æ ¼å‘åå…¼å®¹</h3>

<p>é‚£äº›ä¸å–œæ¬¢ ESM çš„æ¨¡å—ä½œè€…å¯ä»¥ç»§ç»­ä½¿ç”¨ CJSï¼Œä¿è¯è‡ªå·±ä¸è¢«æ’æŒ¤å‡ºå±€ã€‚è¿™æ ·ä»–ä»¬è‡ªå·±çš„ä»£ç ä¸ä¼šå—åˆ°é‡‡ç”¨ ESM çš„å½±å“ï¼Œé™ä½è¿ç§»åˆ°å¦ä¸€ä¸ªè¿è¡Œæ—¶çš„å¯èƒ½æ€§ï¼Œè®© NPM è¿ç§»åˆ°æ–°ç”Ÿæ€å˜å¾—å®¹æ˜“ã€‚ä» CJS åˆ° ESM çš„é‡æ„ç»™åŒ…ç»´æŠ¤è€…å¸¦æ¥é¢å¤–å·¥ä½œï¼Œä¸èƒ½æŒ‡æœ›æ‰€æœ‰äººéƒ½æœ‰æ—¶é—´ã€‚</p>

<h3>2. CJS åœ¨ ESM ä¸­çš„æ— ç¼æ•´åˆ</h3>

<p>ä» ESM å¯¼å…¥ CJS æ¨¡å—éå¸¸ç®€å•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCJS ä»…å¯¼å‡ºä¸€ä¸ªé»˜è®¤å€¼ã€‚ä¸€æ—¦å¤„äº ESMï¼Œç”šè‡³å¯èƒ½æ ¹æœ¬ä¸ä¼šæ³¨æ„åˆ°ä¾èµ–å…³ç³»ä½¿ç”¨çš„æ¨¡å—é£æ ¼ï¼Œå°¤å…¶æ˜¯ä¸åœ¨ CJS ä¸­ä½¿ç”¨ <code>await import()</code>ç›¸æ¯”ã€‚</p>

<p>ç”±äº ESM çš„è¿™ä¸ªä¼˜ç‚¹ä»¥åŠå…¶ä»–æœ‰ç‚¹ï¼Œæ¯”å¦‚å¼€ç®±å³ç”¨çš„ <a href="https://webpack.js.org/guides/tree-shaking/">tree shaking</a> å’Œæµè§ˆå™¨å…¼å®¹æ€§ï¼Œé¢„è®¡åœ¨æœªæ¥å‡ å¹´å†…ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‘ ESM çš„ç¼“æ…¢è€Œç¨³å®šçš„è¿‡æ¸¡ã€‚CJS çš„ç‰¹æ€§ï¼Œå¦‚åŠ¨æ€ <code>require()</code> å’ŒçŒ´å­è¡¥ä¸å¯¼å‡ºï¼Œåœ¨ Node.js ç¤¾åŒºä¸€ç›´æ˜¯æœ‰äº‰è®®çš„ï¼Œä¸æ¯” ESM å¸¦æ¥çš„å¥½å¤„ã€‚</p>

<h2>è¿™äº›å¯¹æˆ‘æ¥è¯´æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</h2>

<p>å› ä¸ºæœ€è¿‘è¿™äº›äº‹æƒ…ï¼Œå¾ˆå®¹æ˜“å¯¹ç›®å‰å­˜åœ¨çš„æ‰€æœ‰é€‰æ‹©å’Œé™åˆ¶æ„Ÿåˆ°å›°æƒ‘ã€‚åœ¨æ¥ä¸‹æ¥ï¼Œæ•´ç†äº†å¼€å‘äººå‘˜é¢ä¸´çš„å…¸å‹é—®é¢˜ä»¥åŠæˆ‘ä»¬çš„å›ç­”ï¼š</p>

<h3>ç°åœ¨éœ€è¦é‡æ„ç°æœ‰çš„ä»£ç å—ï¼Ÿ</h3>

<p><strong>ä¸éœ€è¦</strong>ã€‚Node.js æ‰åˆšåˆšå¼€å§‹å®ç° ESMï¼Œä»ç„¶æœ‰å¤§é‡çš„å·¥ä½œè¦åšã€‚<a href="https://medium.com/the-node-js-collection/an-update-on-es6-modules-in-node-js-42c958b890c">James M Snell é¢„è®¡è‡³å°‘è¿˜éœ€è¦ä¸€å¹´æ—¶é—´</a>ï¼Œè¿˜æœ‰å¾ˆå¤šå˜åŒ–çš„ä½™åœ°ï¼Œæ‰€ä»¥ç°åœ¨é‡æ„æ˜¯ä¸å®‰å…¨çš„ã€‚</p>

<h3>åº”è¯¥åœ¨æ–°ä»£ç ä¸­ä½¿ç”¨ ESM å—ï¼Ÿ</h3>

<ul>
<li><strong>å¦‚æœä½ å·²ç»æœ‰æˆ–è€…æ‰“ç®—ä½¿ç”¨åƒ webpack è¿™æ ·çš„æ„å»ºå·¥å…·ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„</strong>ã€‚è¿™å°†æ›´å®¹æ˜“å®Œæˆä»£ç åº“çš„è¿‡æ¸¡ï¼Œå¹¶ä½¿ tree shaking æˆä¸ºå¯èƒ½ã€‚ä½†è¦å°å¿ƒï¼šä¸€æ—¦ Node.js æ”¯æŒåŸç”Ÿ ESMï¼Œå¯èƒ½éœ€è¦é‡æ„å…¶ä¸­çš„ä¸€äº›éƒ¨åˆ†ã€‚</li>
<li><strong>å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªåº“ï¼Œç­”æ¡ˆæ˜¯ä¹Ÿè‚¯å®šçš„</strong>ï¼Œä½ çš„æ¨¡å—ä½¿ç”¨è€…å°†å—ç›Šäº tree shakingã€‚</li>
<li><strong>å¦‚æœä½ ä¸æƒ³è¿›è¡Œæ„å»ºæ“ä½œï¼Œæˆ–è€…æ­£åœ¨ç¼–å†™ä¸€ä¸ª Node.js åº”ç”¨ç¨‹åºï¼Œè¿˜æ˜¯ç”¨ CJS å§</strong>ã€‚</li>
</ul>


<h3>ç°åœ¨åº”è¯¥ä½¿ç”¨ .mjs å—ï¼Ÿ</h3>

<p><strong>ä¸è¦è¿™æ ·åš</strong>ï¼Œç›®å‰æ²¡æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œå·¥å…·æ”¯æŒä¾ç„¶è–„å¼±ã€‚å»ºè®®ä¸€æ—¦åŸç”Ÿ ESM æ”¯æŒç™»é™† Node.jsï¼Œå°½å¿«å¼€å§‹è¿ç§»ã€‚è®°ä½ï¼Œ<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types">æµè§ˆå™¨åªå…³å¿ƒ MIME ç±»å‹ï¼Œè€Œä¸æ˜¯æ–‡ä»¶æ‰©å±•å</a>ã€‚</p>

<h3>åº”è¯¥å…³å¿ƒæµè§ˆå™¨å…¼å®¹æ€§å—ï¼Ÿ</h3>

<p>æ˜¯çš„ï¼Œéœ€è¦åœ¨ä¸€å®šç¨‹åº¦ä¸Šå…³æ³¨è¿™ä¸ªé—®é¢˜ã€‚ ä¸åº”è¯¥åœ¨å¯¼å…¥è¯­å¥ä¸­çœç•¥ <code>.js</code> æ‰©å±•åï¼Œå› ä¸ºæµè§ˆå™¨éœ€è¦å®Œæ•´çš„ URLï¼Œæ— æ³•åƒ Node.js è¿™æ ·æ‰§è¡Œè·¯å¾„æŸ¥è¯¢ã€‚åŒæ ·ï¼Œåº”è¯¥é¿å… <code>index.js</code> æ–‡ä»¶ã€‚ä¸è¿‡ï¼Œäººä»¬å¹¶ä¸ä¼šå¾ˆå¿«åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ NPM è½¯ä»¶åŒ…ï¼Œå› ä¸ºä»ç„¶ä¸èƒ½ bare å¯¼å…¥ã€‚</p>

<h3>ä½œä¸ºåº“ä½œè€…è¯¥æ€ä¹ˆåŠï¼Ÿ</h3>

<p>ç”¨ ESM ç¼–å†™ä»£ç ï¼Œå¹¶ä½¿ç”¨ <a href="https://rollupjs.org/">Rollup</a> æˆ– Webpack è½¬æ¢æˆå•ä¸ª CJS æ¨¡å—ï¼Œç„¶ååœ¨ <code>package.json</code> å°† <code>main</code> å­—æ®µæŒ‡å‘æ­¤ CJS åŒ…ï¼Œå¹¶å°† <a href="https://github.com/rollup/rollup/wiki/pkg.module"><code>module</code></a> å­—æ®µæŒ‡å‘åŸå§‹ ESMã€‚å¦‚æœè¿˜ä½¿ç”¨ ESM ä¹‹å¤–çš„å…¶ä»–æ–°è¯­è¨€åŠŸèƒ½ï¼Œåˆ™åº”ç¼–è¯‘æˆ ES5ï¼Œå¹¶æä¾› CJS å’Œ ESM çš„æ‰“åŒ…ã€‚è¿™æ ·ï¼Œä½ çš„åº“ç”¨æˆ·ä»ç„¶å¯ä»¥ä» tree shaking è·åˆ©è€Œæ— éœ€å¯¹ä»£ç è¿›è¡Œè½¬æ¢ã€‚</p>

<p>çœ‹ä¸€ä¸‹è¿™äº›å®Œæˆ tree shaking çš„æ¨¡å—</p>

<h2>æ€»ç»“</h2>

<p>å…³äº ES æ¨¡å—æœ‰å¾ˆå¤šä¸ç¡®å®šæ€§ã€‚ç”±äºç›®å‰ Node.js åœ¨å®ç°ä¸Šçš„æƒè¡¡ï¼Œå¼€å‘äººå‘˜æ‹…å¿ƒå¯èƒ½ä¼šç ´å Node.js çš„ç”Ÿæ€ã€‚</p>

<p>è¿™äº›è¿˜ä¸ä¼šå‘ç”Ÿï¼Œæœ‰ä¸¤ä¸ªåŸå› ï¼š<strong>CJS çš„ä¸¥æ ¼çš„åå‘å…¼å®¹å’Œ CJS åœ¨ ESM ä¸­çš„æ— ç¼é›†æˆ</strong>ã€‚</p>

<p>åœ¨ Node.js å‘å¸ƒåŸç”Ÿ ESM æ”¯æŒä¹‹å‰ï¼Œåº”è¯¥ä»ç„¶ä½¿ç”¨ Rollup å’Œ Webpack ç­‰å·¥å…·ã€‚å®ƒä»¬åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ¨¡æ‹Ÿäº† ESM ç¯å¢ƒï¼Œä½†è¦æ³¨æ„å®ƒä»¬ä¸å®Œå…¨ç¬¦åˆè§„èŒƒã€‚æ­¤å¤–ï¼Œä½¿ç”¨æ‰“åŒ…ä»ç„¶æ˜¯ä¸ª<a href="https://peerigon.github.io/talks/2016-08-26-jsconf-is-future-frontend-tooling/#36">å¾ˆå¥½çš„é€‰æ‹©</a>ï¼Œä¸€æ—¦å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ NPM è½¯ä»¶åŒ…ã€‚</p>

<p>æˆ‘ä»¬ webpack å›¢é˜Ÿæ­£åœ¨åŠªåŠ›åšä¸€äº›å·¥ä½œï¼Œå¸®åŠ©å¼€å‘è€…å¹³ç¨³è¿‡æ¸¡ã€‚ä¸ºäº†è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬è®¡åˆ’åœ¨ Node.js çš„ ESM æ”¯æŒæˆç†Ÿåï¼Œæ¨¡æ‹Ÿ Node.js å¯¼å…¥ CJS çš„æ–¹å¼ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JS/React å¼€å‘è€…çš„ Atom ç»ˆæé…ç½®]]></title>
    <link href="http://blog.mirreal.net/blog/2017/05/28/my-atom-editor-setup-for-js-react/"/>
    <updated>2017-05-28T18:00:00+08:00</updated>
    <id>http://blog.mirreal.net/blog/2017/05/28/my-atom-editor-setup-for-js-react</id>
    <content type="html"><![CDATA[<blockquote><p>åŸæ–‡ä½œè€…ï¼šElad Ossadon</p>

<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://medium.com/productivity-freak/my-atom-editor-setup-for-js-react-9726cd69ad20">The Ultimate Atom Editor Setup (+for JS/React)</a></p></blockquote>

<p>æ ¹æ®å¤šå¹´ä»¥æ¥ä¸æ–­å®Œå–„ Sublime Text é…ç½®çš„ç»éªŒï¼Œå†³å®šè¿™æ¬¡ç»™ Atom ä¹Ÿæ¥ä¸€ä¸ªå¤§æ”¹é€ ã€‚è¿™ä¸ªè¿‡ç¨‹èŠ±è´¹äº†å¥½å‡ ä¸ªæœˆçš„æ—¶é—´ï¼Œä½†æˆæœè¿˜æ˜¯å¾ˆå“æœ‰æˆæ•ˆçš„ï¼Œæˆ‘ç°åœ¨éå¸¸æ»¡æ„è¿™ä»½é…ç½®ã€‚</p>

<p>è¿™ä»½æ¸…å•å°†åˆ†ä¸ºå®ç”¨å·¥å…·å’Œ React ä¸“ç”¨ï¼Œå¹¶æ¶‰åŠåˆ°å¿«æ·é”®ç»‘å®šã€‚</p>

<h2>å®ç”¨å·¥å…·</h2>

<h3><a href="https://atom.io/packages/atom-beautify">atom-beautify</a></h3>

<p>å¯ä»¥åœ¨ Atom ä¸­ ç¾åŒ– HTMLï¼ŒCSSï¼ŒJavaScriptï¼ŒPHPï¼ŒPythonï¼ŒRubyï¼ŒJavaï¼ŒCï¼ŒC ++ï¼ŒCï¼ƒï¼ŒObjective-Cï¼ŒCoffeeScriptï¼ŒTypeScriptï¼ŒColdfusionï¼ŒSQLç­‰ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒƒ+âŒ¥+B</code></p>

<h3><a href="https://atom.io/packages/prettier-atom">prettier-atom</a></h3>

<p>ä½¿ç”¨ Prettier æ¥æ ¼å¼åŒ– JavaScript ä»£ç ï¼Œé…æœ‰å¼ºå¤§çš„ ESlint é›†æˆã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒƒ+âŒ¥+F</code></p>

<h3><a href="https://atom.io/packages/atom-transpose">atom-transpose</a></h3>

<p>Atom çš„è½¬ç½®æ›´åƒæ˜¯å­—ç¬¦ä¸²ç¿»è½¬ã€‚åœ¨ Sublime å¯ä»¥å°†é€‰ä¸­çš„ä¸¤ä¸ªå­—ç¬¦ä¸²è¿›è¡Œäº¤æ¢ï¼Œçœ‹èµ·æ¥æ›´æœ‰ç”¨ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ¥+T</code></p>

<h3><a href="https://atom.io/packages/case-keep-replace">case-keep-replace</a></h3>

<p>ä½¿ç”¨è¿™ä¸ªæ’ä»¶å¯ä»¥åœ¨æ›¿æ¢æ–‡æœ¬çš„æ—¶å€™å¯ä»¥ä¿ç•™åŸæ¥çš„å‘½åé£æ ¼ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ˜+âŒƒ+R</code></p>

<h3><a href="https://atom.io/packages/change-case">change-case</a></h3>

<p>ä¸€ä¸ªå¯ä»¥å¿«é€Ÿæ”¹å˜å½“å‰é€‰æ‹©æ–‡æœ¬å‘½åæ–¹å¼çš„å·¥å…·ã€‚æ¯”å¦‚å¯ä»¥ä» <code>camelCase</code> è½¬æ¢åˆ° <code>snake_case</code> ç­‰ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ˜+K âŒ˜+C/S</code></p>

<h3><a href="https://atom.io/packages/copy-path">copy-path</a></h3>

<p>å¯ä»¥çµæ´»åœ°å¤åˆ¶æ–‡ä»¶è·¯å¾„ã€‚</p>

<h3><a href="https://atom.io/packages/duplicate-line-or-selection">duplicate-line-or-selection</a></h3>

<p>é‡å¤é€‰æ‹©æ–‡æœ¬æˆ–è€…é‡å¤ä¸€è¡Œï¼Œè·Ÿ Sublime Text çš„è¡Œä¸ºä¸€è‡´ï¼ŒAtom å¯ä»¥é‡å¤ä¸€æ•´è¡Œã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ˜+â‡§+D</code></p>

<h3><a href="https://atom.io/packages/editorconfig">editorconfig</a></h3>

<p>å¸®åŠ©å¼€å‘äººå‘˜åœ¨ä¸åŒçš„ç¼–è¾‘å™¨ä¹‹é—´ä¿æŒä¸€è‡´çš„ç¼–ç é£æ ¼ã€‚</p>

<h3><a href="https://atom.io/packages/file-icons">file-icons</a></h3>

<p>Atom çš„æ–‡ä»¶ç‰¹å®šå›¾æ ‡æ’ä»¶ï¼Œä¾¿äºåŒºåˆ†ä¸åŒæ–‡ä»¶ç±»å‹ã€‚</p>

<h3><a href="https://atom.io/packages/git-plus">git-plus</a></h3>

<p>VIM é£æ ¼çš„ git æ’ä»¶ï¼Œåœ¨æ²¡æœ‰ç»ˆç«¯å‘½ä»¤è¡Œçš„æ—¶å€™è¿›è¡Œæäº¤ç­‰å…¶ä»– git æ“ä½œã€‚</p>

<h3><a href="https://atom.io/packages/highlight-selected">highlight-selected</a></h3>

<p>é€šè¿‡åŒå‡»ä¸€ä¸ªè¯æ¥é«˜äº®æ•´ä¸ªæ–‡ä»¶ç›¸åŒçš„è¯ã€‚</p>

<h3><a href="https://atom.io/packages/local-history">local-history</a></h3>

<p>ç”¨äºç»´æŠ¤æœ¬åœ°æ–‡ä»¶å†å²çš„æ’ä»¶ï¼ˆå¯¹ä»£ç æ–‡ä»¶è¿›è¡Œæ›´æ”¹çš„å†å²è®°å½•ï¼‰ã€‚</p>

<h3><a href="https://atom.io/packages/project-manager">project-manager</a></h3>

<p>è½»æ¾è®¿é—®æ‰€æœ‰é¡¹ç›®ï¼Œè¿˜èƒ½å¯¹é¡¹ç›®ç‰¹å®šè®¾ç½®å’Œé€‰é¡¹è¿›è¡Œç®¡ç†ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ˜+âŒƒ+P</code></p>

<h3><a href="https://atom.io/packages/atom-reveal-file-in-finder">atom-reveal-file-in-finder</a></h3>

<p>å¯ä»¥åœ¨å·¥ä½œåŒºæˆ–è€…æ–‡ä»¶é€‰é¡¹å¡ä¸Šæ‰“å¼€æ–‡ä»¶åˆ° Finder ä¸Šï¼Œå¿«æ·å‘½ä»¤å·²ç»æ·»åŠ åˆ° <code>âŒ˜+â‡§*+P</code> ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ˜+âŒƒ+P</code></p>

<h3><a href="https://atom.io/packages/related">related</a></h3>

<p>related æä¾›äº†è®¿é—®ä¸å½“å‰æ‰“å¼€çš„æ–‡ä»¶ç›¸å…³çš„æ–‡ä»¶çš„å¿«é€Ÿæ–¹å¼ã€‚ ä¾‹å¦‚ï¼Œåœ¨ <code>.js</code> å’Œ <code>.spec.js</code> æ–‡ä»¶ä¹‹é—´åˆ‡æ¢ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ˜+â‡§+ R</code></p>

<p>æˆ‘çš„ JS å…³è”é…ç½® (Menu > Packages > Related > Edit related patterns):</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>'([^\\/]+)(?!\\.spec).js(x?)$': [
</span><span class='line'>  'tests/$1.spec.js$2#create',
</span><span class='line'>]
</span><span class='line'>'tests/(.+).spec.js(x?)$': [
</span><span class='line'>  '$1.js$2',
</span><span class='line'>]</span></code></pre></td></tr></table></div></figure>


<h3><a href="https://atom.io/packages/set-syntax">set-syntax</a></h3>

<p>ä¸€ç§ç®€å•çš„å‘½ä»¤æ–¹å¼æ¥è®¾ç½®å½“å‰æ–‡ä»¶è¯­æ³•ï¼Œä¸ Sublime ç±»ä¼¼ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ˜+â‡§+P</code></p>

<h3><a href="https://atom.io/packages/sort-lines">sort-lines</a></h3>

<p>æ’åº/åˆ é™¤é‡å¤è¡Œã€‚</p>

<h3><a href="https://atom.io/packages/Sublime-Style-Column-Selection">sublime-style-column-selection</a></h3>

<p>alt +å•å‡»è·¨è¡Œé€‰æ‹©æ–‡æœ¬å—ï¼Œæ¯è¡Œéƒ½æœ‰æ’å…¥ç¬¦å·ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ¥+Drag</code></p>

<h3><a href="https://atom.io/packages/tab-foldername-index">tab-foldername-index</a></h3>

<p>å¯ä»¥æ›¿æ¢ TAB æ ‡ç­¾å†…å®¹çš„æ’ä»¶ï¼Œåœ¨æ‰“å¼€ç›¸åŒæ–‡ä»¶åçš„æ–‡ä»¶æ—¶ä¿è¯æ›´é«˜çš„å¯è¯»æ€§ã€‚</p>

<h3><a href="https://atom.io/packages/sync-settings">sync-settings</a></h3>

<p>è·¨ Atom å®ä¾‹åŒæ­¥è®¾ç½®ï¼Œé”®ç›˜æ˜ å°„ï¼Œç”¨æˆ·æ ·å¼ï¼Œåˆå§‹åŒ–è„šæœ¬ï¼Œä»£ç æ®µå’Œå·²å®‰è£…çš„è½¯ä»¶åŒ…ã€‚ æˆ‘å°†æ‰€æœ‰è®¾ç½®å¤‡ä»½åˆ° Gist å¹¶åœ¨å·¥ä½œ/ä¸ªäººè®¡ç®—æœºä¹‹é—´è¿›è¡ŒåŒæ­¥ã€‚</p>

<h3><a href="https://atom.io/packages/toggle-quotes">toggle-quotes</a></h3>

<p>å¿«é€Ÿåˆ‡æ¢å­—ç¬¦ä¸²çš„å•å¼•å·å’ŒåŒå¼•å·ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ˜+â‡§+â€™</code></p>

<h3><a href="https://atom.io/packages/atom-spotify2">atom-spotify2</a></h3>

<p>åœ¨ Atom çŠ¶æ€æ ä¸­æ˜¾ç¤ºåœ¨ Spotify ä¸­å½“å‰æ’­æ”¾æ­Œæ›²ã€‚ ä¸æ˜¯å¿…è¦çš„ï¼Œä½†å¾ˆæœ‰è¶£ã€‚</p>

<h2>HTML/CSS/JS/React Specific Packages</h2>

<h3><a href="https://atom.io/packages/atom-ternjs">atom-ternjs</a></h3>

<p>ä½¿ç”¨ Tern ä¸º Atom æä¾› JavaScript ä»£ç æ™ºèƒ½æç¤ºï¼Œæ”¯æŒ ES5ï¼ŒES6ï¼ŒES7ï¼ŒNode.jsï¼ŒjQueryï¼ŒAngularç­‰ã€‚</p>

<h3><a href="https://atom.io/packages/atom-wrap-in-tag">atom-wrap-in-tag</a></h3>

<p>ä¸ºé€‰æ‹©çš„æ–‡æœ¬å¢åŠ æ ‡ç­¾ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ¥+â‡§+W</code></p>

<h3><a href="https://atom.io/packages/autoclose-html">autoclose-html</a></h3>

<p>è‡ªåŠ¨æ·»åŠ å…³é—­æ ‡ç­¾ã€‚</p>

<h3><a href="https://atom.io/packages/autocomplete-modules">autocomplete-modules</a></h3>

<p>è‡ªåŠ¨è¡¥å…¨ <code>require/import</code> å£°æ˜ã€‚</p>

<h3><a href="https://atom.io/packages/color-picker">color-picker</a></h3>

<p>å¾ˆå‰å®³çš„é¢œè‰²é€‰æ‹©å™¨ã€‚</p>

<p>å¿«æ·é”®ï¼š<code>âŒ˜+â‡§+D</code></p>

<h3><a href="https://atom.io/packages/docblockr">docblockr</a></h3>

<p>æ›´å®¹æ˜“çš„æ–¹å¼å†™æ–‡æ¡£æ³¨é‡Šã€‚</p>

<p>ä½¿ç”¨æ–¹å¼ï¼š<code>/** &lt;tab&gt;</code></p>

<h3><a href="https://atom.io/packages/emmet">emmet</a></h3>

<p>ä¸€ä¸ªå¤§å¤§æé«˜ HTML å’Œ CSS å·¥ä½œæµç¨‹çš„æ’ä»¶ã€‚ <a href="http://emmet.io/">å…³äº Emmet</a></p>

<h3><a href="https://atom.io/packages/emmet-jsx-css-modules">emmet-jsx-css-modules</a></h3>

<p>é€‚ç”¨äº css æ¨¡å—çš„ emmet å·¥å…·ã€‚ <code>.foo</code> ç°åœ¨å°†æ‰©å±•ä¸º <code>&lt;div className = {style.foo}&gt; &lt;/ div&gt;</code>ï¼Œè€Œä¸æ˜¯ <code>&lt;div className =â€œfooâ€&gt; &lt;/ div&gt;</code>ã€‚</p>

<h3><a href="https://atom.io/packages/es6-javascript">es6-javascript</a></h3>

<p>ä¸€ç»„ä¸“æ³¨ ES6ï¼Œç”¨äºä¼˜åŒ–ç°ä»£ JavaScript å¼€å‘ç”Ÿäº§åŠ›çš„å‘½ä»¤é›†ï¼Œ ç›®æ ‡æ˜¯ç¬¦åˆ <a href="https://github.com/airbnb/javascript">Airbnb æ¨èçš„ä»£ç è§„èŒƒ</a>ã€‚</p>

<h3><a href="https://atom.io/packages/js-hyperclick">js-hyperclick</a> &amp; <a href="https://atom.io/packages/hyperclick">hyperclick</a></h3>

<p>ç‚¹å‡»è·³åˆ°å˜é‡æˆ–è€… import å®šä¹‰ï¼Œjs-hyperclick ä¾èµ–äº hyperclickã€‚</p>

<h3><a href="https://atom.io/packages/pigments">pigments</a></h3>

<p>åœ¨é¡¹ç›®æ–‡ä»¶ä¸­æ˜¾ç¤ºé¢œè‰²ã€‚</p>

<h3><a href="https://atom.io/packages/linter-eslint">linter-eslint</a></h3>

<p>æ’ä»¶ <a href="https://github.com/AtomLinter/Linter">Linter</a> ä¸º <a href="http://eslint.org/">eslint</a> æä¾› UI æ¥å£ï¼Œç”¨äºå¯¹ JavaScript æ–‡ä»¶è¿›è¡Œé™æ€æ£€æŸ¥ã€‚</p>

<h3><a href="https://atom.io/packages/tree-view-copy-relative-path">tree-view-copy-relative-path</a></h3>

<p>å…è®¸ä» tree view å¤åˆ¶æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚</p>

<h3><a href="https://atom.io/packages/lodash-snippets">lodash-snippets</a></h3>

<p>åœ¨ Atom ä¸­å¿«é€Ÿä½¿ç”¨ lodash çš„ä»£ç æç¤ºã€‚</p>

<h3><a href="https://atom.io/packages/language-babel">language-babel</a></h3>

<p>æ”¯æŒ JavaScript ES201xï¼ŒReact JSXï¼ŒFlowå’ŒGraphQLè¯­æ³•ã€‚</p>

<h3><a href="https://atom.io/packages/react-es7-snippets">react-es7-snippets</a></h3>

<p>React ES7 snippets for atom</p>

<h3><a href="https://atom.io/packages/atom-jest-snippets">atom-jest-snippets</a></h3>

<p>Jest æµ‹è¯•æç¤º</p>

<h2>æˆ‘çš„ä¸»é¢˜</h2>

<h3>UI Theme: <a href="https://atom.io/themes/one-dark-ui">one-dark-ui</a></h3>

<h3>Syntax Theme: <a href="https://atom.io/themes/dracula-theme">dracula-theme</a></h3>

<h2>Install EVERYTHING!</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>apm install atom-beautify prettier-atom atom-spotify2 atom-transpose case-keep-replace change-case copy-path duplicate-line-or-selection editorconfig file-icons git-plus highlight-selected local-history project-manager related set-syntax atom-reveal-file-in-finder sort-lines sublime-style-column-selection tab-foldername-index sync-settings toggle-quotes atom-wrap-in-tag atom-ternjs autoclose-html autocomplete-modules color-picker docblockr emmet emmet-jsx-css-modules es6-javascript js-hyperclick hyperclick pigments linter-eslint tree-view-copy-relative-path lodash-snippets language-babel react-es7-snippets atom-jest-snippets one-dark-ui dracula-theme</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ç§‘å­¦ä¸Šç½‘çš„æ–¹æ³•å’ŒåŸç†]]></title>
    <link href="http://blog.mirreal.net/blog/2016/06/10/the-method-and-principle-of-breaking-the-wall/"/>
    <updated>2016-06-10T18:15:50+08:00</updated>
    <id>http://blog.mirreal.net/blog/2016/06/10/the-method-and-principle-of-breaking-the-wall</id>
    <content type="html"><![CDATA[<p>é€—ä½ å‘¢ï¼Œè¿™é‡Œæ²¡æœ‰ä½ æƒ³è¦çš„ä¸œè¥¿ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ä½¿ç”¨ ES6 çš„æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜]]></title>
    <link href="http://blog.mirreal.net/blog/2016/05/14/compatibility-problem-with-es6/"/>
    <updated>2016-05-14T16:35:34+08:00</updated>
    <id>http://blog.mirreal.net/blog/2016/05/14/compatibility-problem-with-es6</id>
    <content type="html"><![CDATA[<p>ä»¥å‰å¯¹æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜åªæ˜¯å¤§æ¦‚çŸ¥é“ä¸€äº›ç‚¹ï¼Œæ²¡æƒ³åˆ°è¿™æ¬¡çœŸæ­£ç€æ‰‹å»åšçš„æ—¶å€™ï¼Œè¿˜æ˜¯ç¢°åˆ°äº†å¾ˆå¤šé—®é¢˜ã€‚åˆšå¼€å§‹çš„æ—¶å€™ä¸€è¾¹è§£å†³é—®é¢˜ï¼Œä¸€è¾¹æƒ³ç€ï¼šç”¨ IE8 çš„éƒ½æ˜¯ç¥ç»ç—…ï¼Œåˆ°åæ¥ï¼Œæˆ‘å‘ç°å®Œäº†ï¼ŒI LOVE IEã€‚</p>

<h2>0x00 èµ·æº</h2>

<p>åœ¨è¿™æ¬¡åšå°èœœ PC ç‰ˆçš„æ—¶å€™ï¼Œç”±äºæ—©äº PC ç‰ˆï¼Œæ— çº¿ç‰ˆå·²ç»é‡æ–°è®¾è®¡äº†å…¨æ–°ç‰ˆï¼Œåšäº†å¾ˆå¤šæ¶æ„ä¸Šçš„ä¼˜åŒ–è°ƒæ•´ã€‚æ‰€ä»¥åœ¨åšçš„æ—¶å€™æŠŠæ— çº¿ç‰ˆçš„å‰ç«¯æ¶æ„æ‹¿äº†è¿‡æ¥ï¼Œä¸»è¦çš„è€ƒè™‘å°±æ˜¯å“ç‰Œå’ŒåŠŸèƒ½ä¿æŒè·Ÿæ— çº¿ç‰ˆç»Ÿä¸€çš„åŒæ—¶ï¼ŒæŠ€æœ¯ä¸Šä¹Ÿå¯ç›¸äº’æ”¯æŒä»¥åŠç»„ä»¶å¤ç”¨ã€‚</p>

<p>æ— çº¿ç‰ˆæ•´ä¸ªæ¶æ„è®¾è®¡æ˜¯åŒäº‹åšçš„ï¼ŒæŠ€æœ¯ä¸Šä¸»è¦é‡‡ç”¨ ES6 + Webpack + Babel çš„æ–¹å¼ï¼Œç”±äºé¡¹ç›®çš„ç‹¬ç‰¹æ€§å’Œç‰¹æ®Šéœ€æ±‚ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨ä»»ä½•æ¡†æ¶ï¼Œåªå¼•å…¥ zepto ä½œä¸ºä¸€ä¸ªæ ‡å‡†æ”¯æ’‘åº“ã€‚</p>

<p>è€Œ PC ç‰ˆçš„æ¶æ„è·Ÿæ— çº¿ç‰ˆåŸºæœ¬ä¿æŒä¸€è‡´ï¼Œä¸»è¦æ˜¯æŠŠ zepto æ¢æˆäº† jQueryã€‚</p>

<p>ä¸‹é¢æ˜¯ä¸€äº›åŸºæœ¬çš„å¼€å‘ä¾èµ–ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;babel-core&quot;</span><span class="p">:</span> <span class="s2">&quot;~6.3.15&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;babel-loader&quot;</span><span class="p">:</span> <span class="s2">&quot;~6.2.0&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;babel-preset-es2015&quot;</span><span class="p">:</span> <span class="s2">&quot;~6.3.13&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;babel-preset-stage-0&quot;</span><span class="p">:</span> <span class="s2">&quot;~6.3.13&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;babel-runtime&quot;</span><span class="p">:</span> <span class="s2">&quot;~6.3.13&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;extract-text-webpack-plugin&quot;</span><span class="p">:</span> <span class="s2">&quot;~0.9.1&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;less-loader&quot;</span><span class="p">:</span> <span class="s2">&quot;~2.2.1&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;nunjucks-loader&quot;</span><span class="p">:</span> <span class="s2">&quot;~1.0.7&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;style-loader&quot;</span><span class="p">:</span> <span class="s2">&quot;~0.10.2&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;webpack&quot;</span><span class="p">:</span> <span class="s2">&quot;~1.12.9&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;webpack-dev-server&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.10.1&quot;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>0x01 polyfill</h2>

<p>ç”±äº Babel é»˜è®¤åªè½¬æ¢è½¬å„ç§ ES2015 è¯­æ³•ï¼Œè€Œä¸è½¬æ¢æ–°çš„ APIï¼Œæ¯”å¦‚ Promiseï¼Œä»¥åŠ Object.assignã€Array.from è¿™äº›æ–°æ–¹æ³•ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦æä¾›ä¸€äº› ployfill æ¥æ¨¡æ‹Ÿå‡ºè¿™æ ·ä¸€ä¸ªæä¾›åŸç”Ÿæ”¯æŒåŠŸèƒ½çš„æµè§ˆå™¨ç¯å¢ƒã€‚</p>

<p>ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š<code>babel-runtime</code> å’Œ <code>babel-polyfill</code>ã€‚</p>

<h3>babel-runtime</h3>

<p>babel-runtime çš„ä½œç”¨æ˜¯æ¨¡æ‹Ÿ ES2015 ç¯å¢ƒï¼ŒåŒ…å«å„ç§åˆ†æ•£çš„ polyfill æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è‡ªå·±çš„æ¨¡å—é‡Œå•ç‹¬å¼•å…¥ï¼Œæ¯”å¦‚ promiseï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kr">import</span> <span class="s1">&#39;babel-runtime/core-js/promise&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>å®ƒä»¬ä¸ä¼šåœ¨å…¨å±€ç¯å¢ƒæ·»åŠ æœªå®ç°çš„æ–¹æ³•ï¼Œåªæ˜¯è¿™æ ·æ‰‹åŠ¨å¼•ç”¨æ¯ä¸ª polyfill ä¼šéå¸¸ä½æ•ˆï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© <code>Runtime transform</code> æ’ä»¶æ¥è‡ªåŠ¨åŒ–å¤„ç†è¿™ä¸€åˆ‡ã€‚</p>

<p>é¦–å…ˆä½¿ç”¨ npm å®‰è£…ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>npm install babel-plugin-transform-runtime --save-dev
</span></code></pre></td></tr></table></div></figure>


<p>ç„¶ååœ¨ webpack é…ç½®æ–‡ä»¶çš„ babel-loader å¢åŠ é€‰é¡¹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">loader</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;babel-loader&quot;</span><span class="p">],</span>
</span><span class='line'><span class="nx">query</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>  <span class="s2">&quot;transform-runtime&quot;</span>
</span><span class='line'>  <span class="p">],</span>
</span><span class='line'>  <span class="nx">presets</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;es2015&#39;</span><span class="p">,</span> <span class="s1">&#39;stage-0&#39;</span><span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>babel-polyfill</h3>

<p>è€Œ <code>babel-polyfill</code> æ˜¯é’ˆå¯¹å…¨å±€ç¯å¢ƒçš„ï¼Œå¼•å…¥å®ƒæµè§ˆå™¨å°±å¥½åƒå…·å¤‡äº†è§„èŒƒé‡Œå®šä¹‰çš„å®Œæ•´çš„ç‰¹æ€§ï¼Œä¸€æ—¦å¼•å…¥ï¼Œå°±ä¼šè·‘ä¸€ä¸ª <code>babel-polyfill</code> å®ä¾‹ã€‚ç”¨æ³•å¦‚ä¸‹ï¼š</p>

<p>1.å®‰è£… babel-polyfill</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>npm install babel-polyfill --save
</span></code></pre></td></tr></table></div></figure>


<p>2.åœ¨å…¥å£æ–‡ä»¶ä¸­å¼•ç”¨ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kr">import</span> <span class="s1">&#39;babel-polyfill&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>å°ç»“ï¼š</h3>

<p>å…¶å®åšåˆ°è¿™äº›ï¼Œåœ¨å¤§éƒ¨åˆ†æµè§ˆå™¨å°±å¯ä»¥æ­£å¸¸è·‘äº†ï¼Œä½†æˆ‘ä»¬åšçš„æ˜¯ä¸€ä¸ªç”¨æˆ·ç¯å¢ƒå¾ˆä¸ç¡®å®šçš„äº§å“ï¼Œå¯¹ä¸€äº›å¹´ä»£ä¹…è¿œä½†åˆä¸å®¹å¿½è§†çš„è¿è¡Œç¯å¢ƒï¼Œæ¯”å¦‚ IE8ï¼Œæˆ‘ä»¬åšçš„è¿˜ä¸å¤Ÿã€‚</p>

<p>æ¥ä¸‹æ¥å°†å¼€å§‹è®²è¿°æˆ‘ä»¬åœ¨å…¼å®¹æ€§æ–¹é¢é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œå’Œè§£å†³æ–¹æ³•ã€‚</p>

<h2>0x02 å¼€å§‹åœ¨ IE8 è¿è¡Œ</h2>

<p>æœ€å¼€å§‹åšçš„æ—¶å€™å¹¶æ²¡æœ‰é’ˆå¯¹ IE åšä¸€äº›å…¼å®¹æ€§æ–¹é¢çš„å¤„ç†ï¼Œç»“æœåœ¨ IE8 ä¸Šä¸€è·‘ä¸€å †é—®é¢˜ã€‚</p>

<p>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬æŠŠ <code>jQuery</code> æ¢æˆ 1.12.1 ï¼Œå› ä¸º 2.X å·²ç»ä¸å†æ”¯æŒ IE8ã€‚</p>

<p>ä½†å¹¶æ²¡æœ‰åƒæˆ‘ä»¬æƒ³è±¡ä¸­çš„é‚£æ ·ï¼Œåªæ˜¯ç®€å•æ¢ä¸€ä¸‹ <code>jQuery</code> ç‰ˆæœ¬å°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†ã€‚</p>

<h2>0x03 default or catch</h2>

<p>è¿™æ˜¯é‡åˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚åœ¨å…¼å®¹æ€§æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå¯¹ä¸‹é¢çš„ä»£ç ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">_interopRequireDefault</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">obj</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">__esModule</span> <span class="o">?</span> <span class="nx">obj</span> <span class="o">:</span> <span class="p">{</span> <span class="k">default</span><span class="o">:</span> <span class="nx">obj</span> <span class="p">};</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>æˆ–è€…è¿™ç§ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">_main2</span><span class="p">.</span><span class="k">default</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨ IE8 ä¸‹ä¼šç›´æ¥æŠ¥â€ç¼ºå°‘æ ‡è¯†ç¬¦ã€å­—ç¬¦ä¸²æˆ–æ•°å­—â€çš„é”™ã€‚</p>

<p>æˆ‘ä»¬å¾—åœ¨å¯¹è±¡çš„å±æ€§ä¸ŠåŠ  <code>''</code> æ‰å¯ä»¥ã€‚å°±åƒä¸‹é¢è¿™æ ·ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">_interopRequireDefault</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">obj</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">__esModule</span> <span class="o">?</span> <span class="nx">obj</span> <span class="o">:</span> <span class="p">{</span> <span class="err">â€˜</span><span class="k">default</span><span class="err">â€™</span><span class="o">:</span> <span class="nx">obj</span> <span class="p">};</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">_main2</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>è‡³äºåŸå› ï¼Œå¹¶ä¸æ˜¯ IE8 ä¸‹å¯¹è±¡çš„å±æ€§å¿…é¡»å¾—åŠ  <code>''</code> æ‰è¡Œï¼Œè€Œæ˜¯ <code>default</code> çš„é—®é¢˜ï¼Œä½œä¸ºä¸€ä¸ªå…³é”®å­—ï¼ŒåŒæ ·çš„é—®é¢˜è¿˜åŒ…æ‹¬ <code>catch</code>ã€‚</p>

<p>è¿™ä¸¤ç§æƒ…å†µï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ <code>transform-es3-property-literals</code> å’Œ <code>transform-es3-member-expression-literals</code> è¿™ä¸¤ä¸ªæ’ä»¶æå®šã€‚</p>

<p>æ€»ä¹‹ï¼Œåœ¨å¹³æ—¶å†™ä»£ç çš„æ—¶å€™é¿å…ä½¿ç”¨å…³é”®å­—ï¼Œæˆ–è€…ä¿ç•™å­—ä½œä¸ºå¯¹è±¡çš„å±æ€§å€¼ï¼Œå°¤å…¶æ˜¯åœ¨ä¹ æƒ¯ä¸åŠ å¼•å·çš„æƒ…å†µä¸‹ã€‚ç›¸å…³è®¨è®ºï¼š<a href="https://github.com/airbnb/javascript/issues/61">Allow reserved words for properties</a></p>

<h2>0x04 es5-shimã€es5-sham</h2>

<p>ä¸ºäº†å…¼å®¹åƒ IE8 è¿™æ ·çš„è€ç‰ˆæœ¬æµè§ˆå™¨ï¼Œæˆ‘ä»¬å¼•å…¥ <code>es5-shim</code> ä½œä¸º polyfillã€‚</p>

<p>ä½†åœ¨é‡åˆ° <code>Object.defineProperty</code> ä»æç¤º &ldquo;å¯¹è±¡ä¸æ”¯æŒæ­¤æ“ä½œ&rdquo;</p>

<blockquote><p>As currently implemented, the Object.defineProperty shim will not install on IE8 because IE8 already has such a method. However, the built-in IE8 method only works when applied to DOM objects.</p></blockquote>

<p>å…¶å® es5-shim æ˜ç¡®è¯´æ˜ï¼Œè¿™ä¸ªæ–¹æ³•çš„ polyfill åœ¨ IE8 ä¼šå¤±è´¥ï¼Œå› ä¸º IE8 å·²ç»æœ‰ä¸ªåŒåçš„æ–¹æ³•ï¼Œä½†åªæ˜¯ç”¨äº DOM å¯¹è±¡ã€‚</p>

<p>åŒæ ·çš„é—®é¢˜è¿˜åŒ…æ‹¬ <code>Object.create</code>ï¼Œä¸Šè¿°é—®é¢˜å¯ä»¥å†å¼•å…¥ es5-sham è§£å†³.</p>

<h2>0x05 addEventListener</h2>

<p>é¡¹ç›®ä¸­æœ‰éƒ¨åˆ†ä»£ç ç›´æ¥ä½¿ç”¨ <code>addEventListener</code> è¿™ä¸ª APIï¼Œä½†åœ¨ IE8 ä¸‹çš„äº‹ä»¶ç»‘å®šå¹¶ä¸æ˜¯è¿™ä¸ªæ–¹æ³•ã€‚</p>

<p>è¿™ä¸ªé—®é¢˜å¾ˆå®¹æ˜“è§£å†³ï¼Œä¹Ÿæ— éœ€å»å†™é¢å¤–çš„ polyfillã€‚æˆ‘ä»¬å·²ç»æŠŠ jQuery æ¢æˆ 1.xï¼Œæ‰€ä»¥åªéœ€æŠŠä»£ç ä¸­ <code>addEventListener</code> æ¢æˆ <code>jQuery</code> çš„å†™æ³•å°± Okay äº†ã€‚</p>

<p><code>jQuery</code> å…¶å®ä¸ºæˆ‘ä»¬å°è£…äº†å¾ˆå¤š APIï¼Œå¹¶åšäº†å¾ˆå¤šå…¼å®¹æ€§çš„å°è£…ï¼Œç±»ä¼¼çš„åªè¦ä½¿ç”¨å°è£…å¥½çš„å°±å¯ä»¥äº†ã€‚</p>

<h2>0x06 æ— æ³•è·å–æœªå®šä¹‰æˆ– null å¼•ç”¨çš„å±æ€§</h2>

<p>è¿™ä¸ªé—®é¢˜æ˜¯åœ¨ç‰¹å®šåœºæ™¯ä¸‹ã€è½¬äººå·¥ã€‘å‡ºç°çš„ï¼Œå‡ºç°é—®é¢˜çš„ä¸æ˜¯ IE8ï¼Œè€Œæ˜¯ IE9 å’Œ IE10ã€‚</p>

<p>åŸå› æ˜¯ ocs å®ä¾‹åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºæ²¡æœ‰è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚</p>

<p>é€šè¿‡å®‰è£… <code>transform-es2015-classes</code> å’Œ <code>transform-proto-to-assign</code> è§£å†³ã€‚</p>

<p>åœ¨é…ç½®é¡¹åŠ ä¸Šè¿™ä¸¤ä¸ªæ’ä»¶çš„é…ç½®ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;plugins&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>      <span class="p">[</span><span class="s2">&quot;transform-es2015-classes&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="s2">&quot;loose&quot;</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}],</span>
</span><span class='line'>      <span class="s2">&quot;transform-proto-to-assign&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>0x07 postMessage</h2>

<p>è™½ç„¶ <code>postMessage</code> æ˜¯ HTML5 çš„ç‰¹æ€§ï¼Œä½† IE8 å’Œ Firefox3 å¾ˆæ—©å°±å®ç°äº†è¿™ä¸ª APIï¼Œå½“ç„¶ï¼Œè·Ÿåæ¥çš„æ ‡å‡†å¹¶ä¸ä¸€è‡´ã€‚è¿™å…¶å®ä¹Ÿä¸èƒ½æ€ª IE8ã€‚</p>

<blockquote><p>The postMessage method is supported in Internet Explorer from version 8, Firefox from version 3 and Opera from version 9.5.</p></blockquote>

<p>æˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·å»ä½¿ç”¨ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">parent</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span><span class="nx">success</span><span class="o">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="err">â€˜</span><span class="nx">mirreal</span><span class="err">â€™</span><span class="p">},</span> <span class="err">â€˜</span><span class="o">*</span><span class="err">â€™</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä½†æ˜¯ä¸ºäº†å…¼å®¹ IE8ï¼Œæˆ‘ä»¬å¾—è½¬æˆå­—ç¬¦ä¸²ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">parent</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">success</span><span class="o">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;mirreal&quot;</span><span class="p">}),</span> <span class="err">â€˜</span><span class="o">*</span><span class="err">â€™</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼šåœ¨ IE8 ä¸‹ <code>window.postMessage</code> æ˜¯åŒæ­¥çš„ã€‚</p>

<blockquote><p>window.postMessage is syncronouse in IE 8</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">syncronouse</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">syncronouse</span><span class="p">);</span> <span class="c1">// åœ¨ IE8 ä¸‹ä¼šåœ¨æ§åˆ¶å°æ‰“å° true</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nx">syncronouse</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>0x08 IE8/IE9 çš„æ§åˆ¶å°</h2>

<p>é‡åˆ°ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜ï¼Œåœ¨åˆšå¼€å§‹é‡åˆ°çš„æ—¶å€™ï¼ˆå…¶å®ææ¸…æ¥šåŸå› ï¼Œå¥½åƒä¹ŸæŒºæ­£å¸¸çš„ï¼‰ï¼Œå°èœœåœ¨ IE8 IE9 æ— æ³•åŠ è½½ã€‚åœ¨ IE8 é‚£ä¸ªå¤è€æµè§ˆå™¨çš„å·¦ä¸‹è§’ï¼Œå¥½åƒä¹Ÿæ˜¯å”¯ä¸€ä¼šåœ¨é¡µé¢æç¤ºè„šæœ¬é”™è¯¯çš„æµè§ˆå™¨ï¼Œæç¤º <code>script error</code>ã€‚</p>

<p>ç¬¬ä¸€ååº”å°±æ˜¯åº”è¯¥åˆæ˜¯æŸä¸ªå‡½æ•°åœ¨ IE ä¸‹ä¸æ”¯æŒï¼Œå‡†å¤‡æ‰“å¼€æ§åˆ¶å°çœ‹çœ‹åˆ°åº•å“ªé‡ŒæŠ¥é”™ï¼Œç»“æœå´ä»€ä¹ˆäº‹éƒ½æ²¡æœ‰äº†ï¼Œé¡µé¢ç«Ÿç„¶é¡ºç•…åœ°åŠ è½½å‡ºæ¥äº†ï¼Œè¿™ä¸‹è¯¥æ€ä¹ˆè°ƒè¯•å¥½å‘¢ï¼Ÿ</p>

<p>å¼€å§‹æ€è€ƒï¼šä»€ä¹ˆä¸œè¥¿æ˜¯ä¾èµ–æ§åˆ¶å°è€Œå­˜åœ¨çš„ï¼Œåˆ°åº•ä¼šæ˜¯ä»€ä¹ˆå‘¢ã€‚ã€‚ã€‚å…¶å®å°±æ˜¯æ§åˆ¶å°æœ¬èº«ã€‚</p>

<p>åŸå› å°±æ˜¯æˆ‘ä»¬åœ¨ä»£ç ä¸­æ·»åŠ äº†ä¸€äº›æ§åˆ¶ä¿¡æ¯ä¼šæ‰“å°åœ¨æ§åˆ¶å°ï¼Œè€Œ IE8/IE9 è¦å¼€å¯ IE Dev Tools æ‰èƒ½ä½¿ç”¨ <code>console</code> å¯¹è±¡ã€‚</p>

<p>åˆ‡å¿ŒæŠŠ IE8/9 æƒ³æˆ Chrome/Firefoxï¼Œä»¥ä¸ºæ°¸è¿œæœ‰ <code>window.console</code> å¯ç”¨.ç»ˆäºï¼ŒIE10 æ”¹é‚ªå½’æ­£ï¼Œ<code>console</code> ä¸å†åƒæ®µèª‰çš„å…­è„‰ç¥å‰‘æ—¶æœ‰æ—¶æ— ã€‚</p>

<blockquote><p>console.log is there in IE8, but the console object isn&rsquo;t created until you open DevTools. Therefore, a call to console.log may result in an error, for example if it occurs on page load before you have a chance to open the dev tools.</p></blockquote>

<p>ä½†åªè¦ IE8/9 è¿˜åœ¨ä¸€å¤©ï¼Œconsole æ£€æŸ¥è¿˜æ˜¯ä¸èƒ½å°‘çš„</p>

<p>äº‹å®ä¸Šï¼ŒIE8/9 ä»æœªæ­»å»ï¼Œæ‰€ä»¥ï¼Œå¾—å†™æˆè¿™æ ·ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;log here&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¦æ˜¯æœ‰ä¸€å † <code>console.log</code>, <code>console.count</code>, <code>console.error</code>, <code>console.time</code>, <code>console.profile</code>ï¼Œ&hellip; è¿™æ ·å»å†™ï¼Œé‚£è¿˜ä¸æŠŠäººå†™åˆ°æ¶å¿ƒæ­»ã€‚</p>

<p>å†™ä¸ªç®€å•çš„ console polyfill å§ï¼Œæ£€æµ‹æ˜¯å¦å­˜åœ¨ <code>console</code>ï¼Œä¸å­˜åœ¨å¯ä»¥åˆ›è§ä¸€ä¸ªåŒåçš„ç©ºæ–¹æ³•è¾¾åˆ°ä¸æŠ¥é”™çš„ç›®çš„ã€‚å½“ç„¶ï¼Œç”Ÿäº§ç¯å¢ƒçš„ä»£ç å…¶å®ä¹Ÿä¸ä¼šæœ‰é‚£ä¹ˆå¤šå¥‡å¥‡æ€ªæ€ªçš„ <code>console</code>ã€‚</p>

<h2>0x09 å®šä¹‰æ–‡æ¡£å…¼å®¹æ€§</h2>

<p><code>X-UA-Compatible</code> å½“åˆæ˜¯é’ˆå¯¹ IE8 æ–°åŠ çš„ä¸€ä¸ªé…ç½®ã€‚ç”¨äºä¸º IE8 æŒ‡å®šä¸åŒçš„é¡µé¢æ¸²æŸ“æ¨¡å¼ï¼Œæ¯”å¦‚ä½¿ç”¨ IE7 å…¼å®¹æ¨¡å¼ï¼Œæˆ–è€…æ˜¯é‡‡ç”¨æœ€æ–°çš„å¼•æ“ã€‚</p>

<p>ç°åœ¨åŸºæœ¬ä¹Ÿä¸éœ€è¦å‰è€…çš„é™çº§æ¨¡å¼ï¼Œæ›´å¤šçš„æ˜¯å†™å…¥ <code>IE=edge</code> æ”¯æŒæœ€æ–°ç‰¹æ€§ã€‚è€Œ <code>chrome=1</code> åˆ™ä¼šæ¿€æ´» Google Chrome Frameï¼Œå‰ææ˜¯ä½ çš„ IE å®‰è£…è¿‡è¿™ä¸ªæ’ä»¶ã€‚</p>

<p>æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Œå½“ç„¶æœ‰ç”¨ï¼Œæœ‰äº› API æ˜¯ä½œä¸ºæ–°ç‰¹æ€§å­˜åœ¨äº IE8 ä¸­çš„ï¼Œæ¯”å¦‚ <code>JSON</code>ï¼Œä¸å¼€å¯çš„è¯å°±ç”¨ä¸äº†ã€‚</p>

<h3>ä¸ºä»€ä¹ˆè¦ç”¨ X-UA-Compatibleï¼Ÿ</h3>

<p>åœ¨ IE8 åˆšæ¨å‡ºçš„æ—¶å€™ï¼Œå¾ˆå¤šç½‘é¡µç”±äºé‡æ„çš„é—®é¢˜ï¼Œæ— æ³•é€‚åº”è¾ƒé«˜çº§çš„æµè§ˆå™¨ï¼Œæ‰€ä»¥ä½¿ç”¨ <code>X-UA-Compatible</code> å¼ºåˆ¶ IE8 é‡‡ç”¨ä½ç‰ˆæœ¬æ–¹å¼æ¸²æŸ“ã€‚</p>

<p>æ¯”å¦‚ï¼šä½¿ç”¨ä¸‹é¢è¿™æ®µä»£ç åï¼Œå¼€å‘è€…æ— éœ€è€ƒè™‘ç½‘é¡µæ˜¯å¦å…¼å®¹ IE8 æµè§ˆå™¨ï¼Œåªè¦ç¡®ä¿ç½‘é¡µåœ¨ IE6ã€IE7 ä¸‹çš„è¡¨ç°å°±å¯ä»¥äº†ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="na">content=</span><span class="s">&quot;IE=EmulateIE7&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>è€Œè¿™æ®µä»£ç ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="na">content=</span><span class="s">&quot;IE=edge,chrome=1&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>IE=edge</code> å‘Šè¯‰ IE ä½¿ç”¨æœ€æ–°çš„å¼•æ“æ¸²æŸ“ç½‘é¡µï¼Œ<code>chrome=1</code> åˆ™å¯ä»¥æ¿€æ´» Chrome Frame[1]ã€‚</p>

<h2>0x0a æ¡ä»¶æ³¨é‡Š or æ¡ä»¶ç¼–è¯‘</h2>

<p>æœ€åè¯´è¯´ IE çš„æ¡ä»¶æ³¨é‡Šï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>!    [if !IE]    The NOT operator. This is placed immediately in front of the feature, operator, or subexpression to reverse the Boolean meaning of the expression.
</span><span class='line'>
</span><span class='line'>lt    [if lt IE 5.5]  The less-than operator. Returns true if the first argument is less than the second argument.
</span><span class='line'>
</span><span class='line'>lte   [if lte IE 6]   The less-than or equal operator. Returns true if the first argument is less than or equal to the second argument.
</span><span class='line'>
</span><span class='line'>gt    [if gt IE 5]    The greater-than operator. Returns true if the first argument is greater than the second argument.
</span><span class='line'>
</span><span class='line'>gte   [if gte IE 7]   The greater-than or equal operator. Returns true if the first argument is greater than or equal to the second argument.
</span><span class='line'>
</span><span class='line'>( )   [if !(IE 7)]    Subexpression operators. Used in conjunction with boolean operators to create more complex expressions.
</span><span class='line'>
</span><span class='line'>&amp; [if (gt IE 5)&amp;(lt IE 7)]    The AND operator. Returns true if all subexpressions evaluate to true
</span><span class='line'>
</span><span class='line'>| [if (IE 6)|(IE 7)]  The OR operator. Returns true if any of the subexpressions evaluates to true.
</span></code></pre></td></tr></table></div></figure>


<p>å¦å¤–ä¸€ä¸ªç±»ä¼¼çš„ä¸œè¥¿æ˜¯åœ¨ Javascript ä¸­çš„æ¡ä»¶ç¼–è¯‘ï¼ˆconditional compilationï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™æ®µç®€å•çš„ä»£ç æ¥åšæµè§ˆå™¨å—…æ¢ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">isIE</span> <span class="o">=</span> <span class="cm">/*@cc_on!@*/</span><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨å…¶ä»–æµè§ˆå™¨ä¸­ï¼Œfalse å‰çš„è¢«è§†ä¸ºæ³¨é‡Šï¼Œè€Œåœ¨ IE ä¸­ï¼Œ<code>/*@cc_on .... @*/</code> ä¹‹é—´çš„éƒ¨åˆ†å¯ä»¥è¢« IE è¯†åˆ«å¹¶ä½œä¸ºç¨‹åºæ‰§è¡Œï¼ŒåŒæ—¶å¯ç”¨ IE çš„æ¡ä»¶ç¼–è¯‘ã€‚</p>

<p>å¸¸ç”¨å˜é‡å¦‚ä¸‹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>* @_win32 å¦‚æœåœ¨ Win32 ç³»ç»Ÿä¸Šè¿è¡Œï¼Œåˆ™ä¸º trueã€‚
</span><span class='line'>* @_win16 å¦‚æœåœ¨ Win16 ç³»ç»Ÿä¸Šè¿è¡Œï¼Œåˆ™ä¸º trueã€‚
</span><span class='line'>* @_mac å¦‚æœåœ¨ Apple Macintosh ç³»ç»Ÿä¸Šè¿è¡Œï¼Œåˆ™ä¸º trueã€‚
</span><span class='line'>* @_alpha å¦‚æœåœ¨ DEC Alpha å¤„ç†å™¨ä¸Šè¿è¡Œï¼Œåˆ™ä¸º trueã€‚
</span><span class='line'>* @_x86 å¦‚æœåœ¨ Intel å¤„ç†å™¨ä¸Šè¿è¡Œï¼Œåˆ™ä¸º trueã€‚
</span><span class='line'>* @_mc680x0 å¦‚æœåœ¨ Motorola 680x0 å¤„ç†å™¨ä¸Šè¿è¡Œï¼Œåˆ™ä¸º trueã€‚
</span><span class='line'>* @_PowerPC å¦‚æœåœ¨ Motorola PowerPC å¤„ç†å™¨ä¸Šè¿è¡Œï¼Œåˆ™ä¸º trueã€‚
</span><span class='line'>* @_jscript å§‹ç»ˆä¸º trueã€‚
</span><span class='line'>* @_jscript_build åŒ…å« JavaScript è„šæœ¬å¼•æ“çš„ç”Ÿæˆå·ã€‚
</span><span class='line'>* @_jscript_version åŒ…å« major.minor æ ¼å¼çš„ JavaScript ç‰ˆæœ¬å·ã€‚
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>Internet Explorer 11 ä¹‹å‰çš„æ‰€æœ‰ç‰ˆæœ¬çš„ Internet Explorer éƒ½æ”¯æŒæ¡ä»¶ç¼–è¯‘ã€‚  ä» Internet Explorer 11 æ ‡å‡†æ¨¡å¼å¼€å§‹ï¼ŒWindows 8.x åº”ç”¨å•†åº—åº”ç”¨ä¸æ”¯æŒæ¡ä»¶ç¼–è¯‘ã€‚</p></blockquote>

<h2>åï¼š</h2>

<p>ä¹‹å‰ä¸€ç›´åœ¨åšç§»åŠ¨ç«¯çš„å¼€å‘ï¼Œæ²¡æƒ³åˆ°åš PC ç«¯ä¹Ÿä¼šé‡åˆ°è¿™ä¹ˆå¤šçš„å…¼å®¹æ€§é—®é¢˜ã€‚ä¸åŒäºç§»åŠ¨ç«¯è®¾å¤‡çš„ç¹æ‚å’Œä¸ç¡®å®šæ€§ï¼ŒPC ç‰ˆçš„å…¼å®¹æ›´ä¾§é‡äºå¯¹ç‰¹å®šæµè§ˆå™¨çš„ç‰¹æ€§çš„äº†è§£ï¼Œç›¸æ¯”è€Œè¨€æ›´ä¸ºæ˜ç¡®ï¼Œè€Œéå› ä¸ºæŸä¸€æ¬¾æ‰‹æœºçš„è¯¡å¼‚è¡¨ç°ã€‚</p>

<h2>å‚è€ƒæ–‡æ¡£ï¼š</h2>

<p><a href="https://github.com/airbnb/javascript/issues/61">Allow reserved words for properties</a></p>

<p><a href="https://github.com/es-shims/es5-shim/issues/5">IE8 defineProperty/getOwnPropertyDescriptor clash with shim</a></p>

<p><a href="http://babeljs.io/docs/plugins/transform-runtime/">Runtime transform</a></p>

<p><a href="https://github.com/babel/babel/blob/master/packages/babel-plugin-transform-runtime/src/definitions.js">babel-plugin-transform-runtime definitions</a></p>

<p><a href="https://github.com/babel/babelify/issues/133">super() not calling parent&rsquo;s constructor on IE9</a></p>

<p><a href="http://help.dottoro.com/ljgheukc.php">postMessage method (window) Javascript</a></p>

<p><a href="https://msdn.microsoft.com/library/gg589530(v=vs.85">ä½¿ç”¨ F12 å·¥å…·æ§åˆ¶å°æŸ¥çœ‹é”™è¯¯å’ŒçŠ¶æ€</a>.aspx)</p>

<p><a href="https://msdn.microsoft.com/zh-cn/library/cc288325(v=vs.85">å®šä¹‰æ–‡æ¡£å…¼å®¹æ€§</a>.aspx)</p>

<p><a href="https://msdn.microsoft.com/zh-cn/library/121hztk3(v=vs.94">æ¡ä»¶ç¼–è¯‘ (JavaScript)</a>.aspx)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ä¸ºä»€ä¹ˆæ˜¯ JSONP]]></title>
    <link href="http://blog.mirreal.net/blog/2016/04/01/what-is-jsonp-and-why/"/>
    <updated>2016-04-01T21:06:58+08:00</updated>
    <id>http://blog.mirreal.net/blog/2016/04/01/what-is-jsonp-and-why</id>
    <content type="html"><![CDATA[<!-- # JSONPï¼Œè·¨åŸŸï¼Œå®‰å…¨ç­–ç•¥ï¼Œä»¥åŠ WHY

æœåŠ¡å™¨ç«¯ã€æµè§ˆå™¨ç«¯

åŸç”Ÿå®ç°ï¼ŒåŒ…è£… Api

åŒæ­¥è¯·æ±‚ï¼Ÿå¼‚æ­¥è¯·æ±‚

æ–‡ä»¶ä¸Šä¼ 

å®‰å…¨ï¼Œè·¨åŸŸé—®é¢˜ -->


<h2>AJAXã€JSONã€JSONP</h2>

<p>åœ¨ WEB å¼€å‘ä¸­ï¼Œç»å¸¸è§åˆ°è¯¸å¦‚ AJAXã€JSONã€JSONP è¿™äº›è¯ï¼Œä½†è¿™ä¸‰ç§ä¸œè¥¿åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œåˆæœ‰ä»€ä¹ˆå…³ç³»å’ŒåŒºåˆ«ã€‚</p>

<h3>AJAX ï¼ˆAsynchronous JavaScript + XMLï¼‰</h3>

<blockquote><p>Ajax isnâ€™t a technology. Itâ€™s really several technologies, each flourishing in its own right, coming together in powerful new ways. Ajax incorporates:</p><p>* standards-based presentation using XHTML and CSS;<br/>* dynamic display and interaction using the Document Object Model;<br/>* data interchange and manipulation using XML and XSLT;<br/>* asynchronous data retrieval using XMLHttpRequest;<br/>* and JavaScript binding everything together.</p><footer><strong>Jesse James Garrett,</strong> <cite><a href='http://adaptivepath.org/ideas/ajax-new-approach-web-applications/'>Ajax: A New Approach to Web Applications</a></cite></footer></blockquote>


<p>å¼‚æ­¥ JavaScript + XML, æœ¬èº«ä¸æ˜¯ä¸€ç§æŠ€æœ¯, æ˜¯åœ¨2005å¹´ç”± Jesse James Garrett æå‡ºçš„ä¸€ä¸ªæœ¯è¯­, æè¿°äº†ä¸€ç§ç»“åˆä½¿ç”¨å¤§é‡å·²æœ‰æŠ€æœ¯çš„æ–¹å¼, åŒ…æ‹¬: HTML æˆ– XHTML, CSS, JavaScript, DOM, XML, XSLT, è¿˜æœ‰æœ€é‡è¦çš„ XMLHttpRequest å¯¹è±¡.</p>

<p>å°½ç®¡åœ¨ AJAX ä¸­ X ä»£è¡¨ XML, ä½†ç°åœ¨ JSON ä½¿ç”¨çš„æ›´å¤šï¼Œå› ä¸º JSON å…·æœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œæ¯”å¦‚æ›´è½»é‡å¹¶ä¸”æ˜¯ JavaScript çš„ä¸€éƒ¨åˆ†. åœ¨ AJAX æ¨¡å‹ä¸­ JSON å’Œ XML éƒ½ç”¨äºæ‰¿è½½ä¿¡æ¯.</p>

<h3>JSONï¼ˆJavascript Object Notationï¼‰</h3>

<p>JSON æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚ç”±é“æ ¼æ‹‰æ–¯Â·å…‹ç½—å…‹ç¦ç‰¹ï¼ˆDouglas Crockfordï¼‰åœ¨ 2012 å¹´å‘æ˜ï¼Œå¹¶é€æ¸å–ä»£ XML æˆä¸ºäº‹å®ä¸Šçš„æ•°æ®äº¤æ¢æ ¼å¼æ ‡å‡†ã€‚</p>

<p>JSON åŸºäº JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999çš„ä¸€ä¸ªå­é›†ã€‚ä½†é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºè¯­è¨€çš„æ–‡æœ¬æ ¼å¼ï¼Œå¹¶ä½¿ç”¨äº†ç±»ä¼¼äº C è¯­è¨€å®¶æ—çš„ä¹ æƒ¯ã€‚</p>

<p>åœ¨ JSON ä¸­ï¼Œä¸€å…± 6 ç§æ•°æ®ç±»å‹ï¼š</p>

<ul>
<li>numberï¼šè·Ÿ Javascript çš„æ•°å€¼ä¸€è‡´ï¼Œé™¤å»æœªæ›¾ä½¿ç”¨çš„å…«è¿›åˆ¶ä¸åå…­è¿›åˆ¶æ ¼å¼ï¼Œå’Œä¸€äº›ç¼–ç ç»†èŠ‚</li>
<li>booleanï¼š<code>true</code> å’Œ <code>false</code></li>
<li>stringï¼šæ˜¯ç”±åŒå¼•å·åŒ…å›´çš„ä»»æ„æ•°é‡Unicodeå­—ç¬¦çš„é›†åˆï¼Œä½¿ç”¨åæ–œçº¿è½¬ä¹‰</li>
<li>nullï¼š<code>null</code></li>
<li>arrayï¼šæ•°ç»„æ˜¯å€¼ï¼ˆvalueï¼‰çš„æœ‰åºé›†åˆã€‚ä¸€ä¸ªæ•°ç»„ä»¥â€œ[â€ï¼ˆå·¦ä¸­æ‹¬å·ï¼‰å¼€å§‹ï¼Œâ€œ]â€ï¼ˆå³ä¸­æ‹¬å·ï¼‰ç»“æŸï¼Œå€¼ä¹‹é—´ä½¿ç”¨â€œ,â€ï¼ˆé€—å·ï¼‰åˆ†éš”</li>
<li>objectï¼šå¯¹è±¡æ˜¯ä¸€ä¸ªæ— åºçš„â€œâ€˜åç§°/å€¼â€™å¯¹â€é›†åˆã€‚ä¸€ä¸ªå¯¹è±¡ä»¥â€œ{â€ï¼ˆå·¦æ‹¬å·ï¼‰å¼€å§‹ï¼Œâ€œ}â€ï¼ˆå³æ‹¬å·ï¼‰ç»“æŸï¼Œæ¯ä¸ªâ€œåç§°â€åè·Ÿä¸€ä¸ªâ€œ:â€ï¼ˆå†’å·ï¼‰ï¼›â€œâ€˜åç§°/å€¼â€™ å¯¹â€ä¹‹é—´ä½¿ç”¨â€œ,â€ï¼ˆé€—å·ï¼‰åˆ†éš”</li>
</ul>


<p>ä»¥åŠä¸Šé¢çš„ä»»æ„ç»„åˆã€‚</p>

<p>åœ¨ javascript ä¸­æœ‰ä¸€ä¸ªå…¨å±€çš„å¯¹è±¡ JSONï¼ŒåŒ…å«ä¸¤ä¸ªæ–¹æ³• <code>JSON.stringify()</code> å’Œ <code>JSON.parse()</code>ï¼Œç”¨äºåºåˆ—åŒ–å’Œè§£æ JSONã€‚</p>

<h3>JSONPï¼ˆJSON with Paddingï¼‰</h3>

<p>æœ€åˆæ˜¯å¼€å‘è€…ä¸ºäº†è§£å†³è·¨åŸŸé—®é¢˜æå‡ºæ¥çš„ä¸€ä¸ªé¢‡ä¸ºå¥‡æ€ªçš„ä¸œè¥¿ï¼Œäº§ç”ŸåŸå› å’Œåå­—ä¸€æ ·å¤æ€ªï¼Œå…‰å¬åå­—ææ€•æ²¡å‡ ä¸ªäººçŸ¥é“è¯´çš„æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚</p>

<p>å› ä¸º ajax è¯·æ±‚æ”¶åˆ°åŒæºç­–ç•¥çš„é™åˆ¶ä¸å…è®¸è·¨åŸŸè®¿é—®ï¼Œè€Œåœ¨å®é™…å¼€å‘ä¸­åˆå¸¸å¸¸ä¼šæœ‰ç±»ä¼¼çš„éœ€æ±‚ã€‚</p>

<p>åˆšå¥½ <code>&lt;script&gt;</code> æ ‡ç­¾å¯ä»¥å¼•ç”¨å…¶ä»–ç«™ç‚¹çš„é™æ€èµ„æºï¼Œæƒ³æƒ³æˆ‘ä»¬æœ‰æ—¶å€™åœ¨ç«™ç‚¹å¼•å…¥çš„æ•°æ®ç»Ÿè®¡ç±»çš„ jsã€‚</p>

<p>ä½†æˆ‘ä»¬è¦çš„æ˜¯æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸€æ®µé™æ€ä»£ç ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>

<p>è¿™è¿˜ä¸ç®€å•å—ï¼Œè®©æœåŠ¡å™¨åŠ¨æ€ç”Ÿæˆ js ï¼Œå†æŠŠæ•°æ®æ”¾è¿›å»ä¸å°±å¯ä»¥å—ã€‚ä¸ºäº†åŒºåˆ†ä¸æ•°æ®ï¼Œè¿˜éœ€è¦é’ˆå¯¹è¿”å›çš„æ•°æ®åšä¸€ä¸ªæ ‡è¯†ï¼Œå…¶å®å°±æ˜¯åœ¨æ•°æ®å¤–é¢åŒ…è£¹ä¸€ä¸ªå‡½æ•°åã€‚</p>

<p>ç„¶åéœ€è¦æµè§ˆå™¨ç«¯é¢„å…ˆè®¾ç½®å¥½è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›çš„æ•°æ®å°±ç›¸å½“äºä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯¹è·å–æ•°æ®çš„å¤„ç†ã€‚</p>

<h3>æ€»ç»“</h3>

<ol>
<li>AJAX æ˜¯ä¸€ç±»æŠ€æœ¯çš„é›†åˆï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯ <code>XMLHttpRequest</code></li>
<li>JSON æ˜¯ä¸€ä¸ªæ•°æ®äº¤æ¢æ ¼å¼</li>
<li>JSONP æ˜¯ä¸ºäº†è§£å†³è·¨åŸŸé—®é¢˜æå‡ºæ¥çš„ä¸€ç§è·å–æ•°æ®çš„æ–¹å¼</li>
</ol>


<h2>ä¸‹é¢ä¸¾ä¸ªæ —å­</h2>

<h3>æœåŠ¡å™¨</h3>

<p>è¿™é‡Œä½¿ç”¨ node è¿”å›ä¸€æ®µç®€å•çš„æ•°æ®ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * ä¸€ä¸ªç®€å•çš„ http æœåŠ¡å™¨,è¿”å› json æ•°æ®</span>
</span><span class='line'><span class="cm"> * è·Ÿ node ä¸»é¡µä¸Šçš„é‚£ä¸ªç»å…¸ä¾‹å­æ²¡å¤ªå¤§å·®åˆ«</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">urllib</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">host</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">9999</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span> <span class="s1">&#39;Mirreal&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="o">:</span> <span class="s1">&#39;24&#39;</span><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="nx">urllib</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">query</span> <span class="o">&amp;&amp;</span> <span class="nx">params</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span>  <span class="nx">params</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">callback</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span> <span class="c1">// jsonp</span>
</span><span class='line'>    <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span> <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/javascript&#39;</span> <span class="p">});</span>
</span><span class='line'>    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span> <span class="c1">// æ™®é€šçš„json</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="nx">host</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;server is listening on port &#39;</span> <span class="o">+</span> <span class="nx">port</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>æµè§ˆå™¨</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="c1">// zepto çš„å†™æ³•</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://127.0.0.1:9999&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span> <span class="nx">_input_charset</span><span class="o">:</span> <span class="s1">&#39;utf-8&#39;</span> <span class="p">},</span>
</span><span class='line'>  <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;jsonp&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">timeout</span><span class="o">:</span> <span class="mi">300</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">context</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">),</span>
</span><span class='line'>  <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Ajax error!&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¿™æ ·å°±å¾ˆè½»æ¾çš„é€šè¿‡ JSONP çš„æ–¹å¼è·å–åˆ°æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦å…³å¿ƒé‡Œé¢ç©¶ç«Ÿæ˜¯æ€ä¹ˆä¸€å›äº‹ï¼Œä½†ç»å¸¸ä¼šæœ‰äººé—®èµ·åƒâ€œä¸ºä»€ä¹ˆ jsonp ä¸èƒ½ä½¿ç”¨ POST æ–¹æ³•â€çš„é—®é¢˜ï¼Œå…¶å®ç¨å¾®äº†è§£ä¸€ä¸‹ JSONP çš„åŸç†ï¼Œè¿™ç§é—®é¢˜å®Œå…¨å°±ä¸å­˜åœ¨äº†ã€‚</p>

<p>è™½ç„¶åƒ jQuery è¿™ç±»åº“å°† jsonp å°è£…åˆ° Ajax ä¸Šï¼Œä½†å‡†ç¡®æ¥è®²æ˜¯ä¸å¯¹çš„ã€‚å› ä¸º jsonp åªæ˜¯é€šè¿‡åŠ¨æ€åœ°é€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾å»è¯·æ±‚ä¸€æ®µ js ä»£ç ï¼ˆæˆ–è€…å«æ•°æ®ï¼‰ï¼Œè€Œéä½¿ç”¨ XMLHttpRequest ï¼ŒåŸç†å°±åƒä¸‹é¢è¿™æ ·ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * å¯¹ jsonp çš„ä¸€ç§ç®€å•å°è£…</span>
</span><span class='line'><span class="cm"> * @param {Object} options</span>
</span><span class='line'><span class="cm"> * @returns null</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">getJsonp</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">callbackName</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">callbackName</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">scriptElem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">scriptElem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">&#39;?callback=&#39;</span> <span class="o">+</span> <span class="nx">callbackName</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">scriptElem</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">delete</span> <span class="nb">window</span><span class="p">[</span><span class="nx">callbackName</span><span class="p">];</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">scriptElem</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="s1">&#39;load error&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">delete</span> <span class="nb">window</span><span class="p">[</span><span class="nx">callbackName</span><span class="p">];</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">window</span><span class="p">[</span><span class="nx">callbackName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">success</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// è°ƒç”¨</span>
</span><span class='line'>  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">scriptElem</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¿™æ®µä»£ç å¯¹ JSONP è¿›è¡Œä¸€å±‚ç®€å•åŒ…è£…ï¼Œè°ƒç”¨ä¹Ÿå¾ˆç®€å•ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getJsonp</span><span class="p">({</span>
</span><span class='line'>  <span class="s1">&#39;url&#39;</span><span class="o">:</span> <span class="s1">&#39;http://127.0.0.1:9999/&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;callbackName&#39;</span><span class="o">:</span> <span class="s1">&#39;log&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;success&#39;</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;æˆ‘æ˜¯å›è°ƒå‡½æ•°,æˆ‘æ‹¿åˆ°æ•°æ®äº†&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>çœ‹ä¸Šå»ä»£ç è¿˜æŒºé•¿çš„ï¼Œå®é™…ä¸Šæ ¸å¿ƒä»£ç ä¸å¤šï¼Œåˆ†ä¸‰æ­¥ï¼š</p>

<h4>1.åˆ›å»ºä¸€ä¸ª <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Œå¹¶è®¾ç½®å…¶ url</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">scriptElem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nx">scriptElem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">&#39;?callback=&#39;</span> <span class="o">+</span> <span class="nx">callbackName</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h4>2.è®¾ç½®å›è°ƒå‡½æ•°</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nb">window</span><span class="p">[</span><span class="nx">callbackName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">success</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¿™é‡Œç®€å•å¤„ç†ï¼Œç›´æ¥æŠŠä¼ å…¥çš„å›è°ƒå‡½æ•°è®¾ç½®æˆå…¨å±€çš„</p>

<h4>3.è°ƒç”¨</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">scriptElem</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>å®é™…ä¸Šå°±æ˜¯æŠŠ <code>&lt;script&gt;</code> åŠ åˆ° html æ–‡æ¡£ä¸­ï¼Œè¿™æ ·å°±ä¼šå»åŠ è½½æ ‡ç­¾çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª js æ–‡ä»¶ã€‚</p>

<p>ä½†é€šå¸¸ç°å®ä¸­è·‘çš„ä»£ç å†…å®¹ä¼šæ›´å¤šï¼ŒåŒ…å«ä¸€äº›é”™è¯¯æ§åˆ¶ã€å‚æ•°æ‹¼æ¥ã€è¶…æ—¶å¤„ç†ã€æ€§èƒ½å®‰å…¨ç­‰æ–¹é¢çš„ï¼Œä½†å®ƒä»ç„¶æ¸…æ¥šåœ°æè¿° JSONP çš„åŸç†ã€‚</p>

<h2>å®‰å…¨</h2>

<p>æ—©æœŸçš„æµè§ˆå™¨å¤„äºå®‰å…¨å±‚é¢çš„è€ƒé‡ï¼Œä½¿ç”¨åŒæºç­–ç•¥ï¼Œé™åˆ¶äº†ä¸€ä¸ªæºï¼ˆoriginï¼‰ä¸­åŠ è½½æ–‡æœ¬æˆ–è„šæœ¬ä¸æ¥è‡ªå…¶å®ƒæºï¼ˆoriginï¼‰ä¸­èµ„æºçš„äº¤äº’æ–¹å¼ã€‚</p>

<p>ä½†æ˜¯éšç€äº’è”ç½‘çš„å‘å±•å‚¬ç”Ÿäº†è·¨åŸŸè®¿é—®è¿›è¡Œæ•°æ®äº¤äº’çš„éœ€æ±‚ï¼Œäºæ˜¯ JSONP å°±äº§ç”Ÿäº†ï¼Œä»¥åŠåæ¥çš„ CORS æœºåˆ¶ï¼Œå…è®¸ XMLHttpRequest å¯¹è±¡å‘èµ·è·¨åŸŸçš„è¯·æ±‚ã€‚</p>

<p>ä½†æ˜¯å¦ä¸€æ–¹é¢ï¼Œä¹Ÿå¢åŠ äº†å®‰å…¨é£é™©ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™åº”å½“æ›´åŠ è°¨æ…å°å¿ƒï¼Œé˜²æ­¢ XSSã€CSRF ç­‰æ”»å‡»ã€‚</p>

<!-- JSONP çš„å®‰å…¨é—®é¢˜é€šå¸¸å±äº CSRFï¼ˆ Cross-site request forgery è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰æ”»å‡»èŒƒç•´ã€‚ -->


<h2>å…¶ä»–</h2>

<h3>æ•°æ®é¢„è§ˆ</h3>

<p>ä¹‹å‰ç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆè°ƒç”¨ä¸€äº›æ¥å£è¿”å›çš„æ•°æ®æ— æ³•ä½¿ç”¨ Chrome é¢„è§ˆï¼Œæˆ‘è‡ªå·±å†™æµ‹è¯•æ¥å£çš„æ—¶å€™ä¹Ÿç¢°åˆ°è¿‡ã€‚å…¶å®è¿™é‡Œå®Œå…¨æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯å¯è¨€ï¼Œåªæ˜¯å› ä¸ºæ²¡æœ‰åœ¨ response å¤´éƒ¨åŠ ä¸Š <code>Content-Type: application/javascript</code>ï¼Œä»…æ­¤è€Œå·²ã€‚</p>

<h2>å‚è€ƒæ–‡æ¡£</h2>

<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/AJAX">AJAX | MDN</a></li>
<li>Jesse James Garrett çš„æ–‡ç« ï¼š<a href="http://adaptivepath.org/ideas/ajax-new-approach-web-applications/">Ajax: A New Approach to Web Applications</a></li>
<li><a href="http://www.json.org/json-zh.html">JSON</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[2015 to 2016]]></title>
    <link href="http://blog.mirreal.net/blog/2016/03/07/2015-to-2016/"/>
    <updated>2016-03-07T16:54:15+08:00</updated>
    <id>http://blog.mirreal.net/blog/2016/03/07/2015-to-2016</id>
    <content type="html"><![CDATA[<p>åœ¨è¿™ä¸ªæ—¶é—´å†™ç‚¹ä¸œè¥¿ï¼Œä¸çŸ¥é“ä¼šä¸ä¼šæ˜¾å¾—å¤ªæ™šã€‚</p>

<p>æˆ‘æ—¶å¸¸ä¼šé™·å…¥ä¸€ç§æ²¡æœ‰æ•…äº‹çš„å¢ƒåœ°ï¼Œç©¶æ ¹é—®åº•ï¼Œå¤§æ¦‚æ˜¯ä»æ¥æ²¡æœ‰å¾ˆè¿«åˆ‡åœ°å»äº‰å–ä»€ä¹ˆï¼Œä»€ä¹ˆæ‰æ˜¯æˆ‘çš„ä¸œè¥¿ï¼Œæˆ‘å¥½æƒ³å¹¶ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæˆ‘è¦æ‹¿åˆ°ä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä¾ç„¶ä¸æ˜ç™½ã€‚</p>

<p>å½“ç„¶ï¼Œè¿™æ ·è¿‡å¾—ï¼Œä¹Ÿè¿‡å¾—ä¸‹å»ï¼Œåªæ˜¯å½“å›é¦–çš„æ—¶å€™ï¼Œå¥½åƒä»€ä¹ˆäº‹éƒ½æ²¡æœ‰å‘ç”Ÿè¿‡ä¸€æ ·ã€‚</p>

<p>ç°åœ¨çš„æˆ‘ï¼Œè·Ÿå»å¹´çš„æˆ‘ä¼¼ä¹å¹¶æ²¡æœ‰å¤ªå¤§å·®åˆ«ï¼Œä¸åŒçš„æ˜¯ï¼Œä¹Ÿè®¸æ˜¾å¾—æ²§æ¡‘äº›è®¸ã€‚</p>

<p>æ›¾ç»æˆ‘ä¼šæƒ³ï¼Œç­‰åˆ°æˆ‘æ‹¿åˆ°ä¸€ä¸ªçœŸæ­£å€¼å¾—æ‹¿å‡ºæ‰‹çš„æˆå°±ï¼Œæˆ‘ä¸€å®šè¦å¤§å£°å‘Šè¯‰æ‰€æœ‰æœ‹å‹ï¼Œæ‰€æœ‰è®¤è¯†çš„äººï¼Œæˆ‘ä¸å·®ã€‚</p>

<p>é‚£äº›çœ‹é‡æˆ‘ï¼Œæˆ–è€…æ˜¯çœ‹è½»æˆ‘çš„äººï¼Œæˆ‘æƒ³å‘Šè¯‰è¿™ä¸ªä¸–ç•Œï¼Œè¿™ä¸ªå®¶ä¼™å¹¶ä¸æ˜¯ä¸€ä¸ªåºŸç‰©ã€‚</p>

<p>ä½†ï¼Œè¿™ä¸ªæƒ…æ™¯è¿Ÿè¿Ÿæœªå‡ºç°ï¼Œæˆ‘è¿˜æ˜¯åƒä¸ªåºŸç‰©ä¼¼çš„æ´»ç€ï¼Œä¸æ–­åœ°é™·å…¥åºŸç‰©ç†è®ºï¼Œéš¾ä»¥è‡ªæ‹”ã€‚</p>

<p>æˆ‘èµ°ç€èµ°ç€ï¼Œå‘ç°ï¼Œå³ä½¿æ˜¯æœ€äº²è¿‘çš„äººï¼Œä¹Ÿæ­£åœ¨ç¦»æˆ‘è¿œå»ï¼Œæˆ‘æƒ³ï¼Œç”±ä»–ä»¬å»å§ï¼Œæˆ‘ç»§ç»­æ¼‚æ³Šï¼Œæ— ä¾çš„ç”Ÿæ´»ï¼Œå°±è¿™æ ·è‹Ÿä¸”ç€ã€‚</p>

<p>åœ¨æŸä¸ªä¸–ç•Œçš„è§’è½é‡Œï¼Œå°±è¿™æ ·ä¸€ä¸ªäººæ´»ç€ã€‚</p>

<p><br><br></p>

<p>ä¸Šå¤©ä¹Ÿæ›¾å¸¦æˆ‘ä¸è–„ï¼Œèµäºˆæˆ‘æœ€ç¾ä¸½çš„é‚‚é€…ï¼Œå¹¶åº¦è¿‡äº†ä¸€æ®µæœ€å¿«ä¹çš„æ—¶å…‰ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[æˆ‘æ˜¯æ€ä¹ˆæˆäº†ä¸€åç¨‹åºå‘˜]]></title>
    <link href="http://blog.mirreal.net/blog/2015/05/06/how-to-be-a-programmer/"/>
    <updated>2015-05-06T20:55:13+08:00</updated>
    <id>http://blog.mirreal.net/blog/2015/05/06/how-to-be-a-programmer</id>
    <content type="html"><![CDATA[<p>ç¨‹åºå‘˜æ˜¯è¿™ä¸ªä¸–ç•Œç»™æˆ‘ä»¬è¿™ç§ä»¥å†™ä»£ç ä¸ºç”Ÿçš„ä¸€ç±»äººçš„ä¸€ç§ç§°è°“ï¼Œç„¶è€Œï¼Œæˆ‘ä»¬è¿˜ä¸å¾—ä¸æ¥å—ï¼Œå¦‚æœå¯ä»¥ï¼Œæˆ‘ä»¬æ›´æ„¿æ„æ¢ä¸ªåå­—ã€‚</p>

<p>è¯»é«˜ä¸­æ—¶æ¥è§¦åˆ°ç”µè„‘æŠ¥ï¼Œå¼€å§‹äº†è§£è®¡ç®—æœºçš„ä¸€äº›ä¸œè¥¿ï¼Œè™½ç„¶åˆä¸­æ—¶ä¹Ÿä¸Šè¿‡â€œå¾®æœºâ€è¯¾ï¼Œä½†åŸºæœ¬åªæ˜¯å½¢å¼ä¸Šçš„ï¼Œæ¥è§¦ä¸€ä¸‹è®¡ç®—æœºç½¢äº†ï¼Œé‚£æ—¶å€™æœºæˆ¿çš„ç”µè„‘è£…çš„æ˜¯Windows 98ï¼Œä¸Šè¯¾æ—¶éƒ½åœ¨ç©æ¸¸æˆï¼Œæ³¡æ³¡é¾™ï¼ŒæŠ¢æ»©ç™»é™†ã€‚</p>

<p>é«˜ä¸­æ—¶æœŸï¼Œé˜…è¯»æŠ¥çº¸æ›´åƒæ˜¯å­¦ä¹ ä¹‹å¤–çš„å¨±ä¹ï¼Œç”Ÿæ´»æœ¬æ¥å°±å¾ˆä¹å‘³ã€‚ä½†æ˜¯ï¼Œæˆ‘æ²¡æœ‰è‡ªå·±çš„ç”µè„‘ï¼Œä¹Ÿæ²¡æœ‰å­¦ä¹ è¿‡ç¼–ç¨‹è¯­è¨€ã€‚é«˜äºŒçš„æ—¶å€™ï¼Œæœ‰äº†è‡ªå·±çš„ç¬¬ä¸€éƒ¨æ‰‹æœºï¼Œè¯ºåŸºäºš5320XMï¼Œé‚£æ—¶å€™iPhoneè¿˜æ²¡æˆä¸ºè¡—æœºï¼Œæ²¡è¿›å…¥ä¸­å›½ï¼Œå½“ç„¶æ°´è´§æ€»æ˜¯æœ‰çš„ï¼Œå¸‚é¢ä¸Šä¹Ÿåªæœ‰å±ˆæŒ‡å¯æ•°çš„å‡ æ¬¾Androidæ‰‹æœºã€‚æ€»ä¹‹ï¼Œæ­¤æ—¶è§¦æ‘¸æ—¶ä»£ä»æœªåˆ°æ¥ã€‚</p>

<!-- more -->


<p>æœ‰äº†ä¸€éƒ¨æ‰‹æœºï¼Œå°±å¯ä»¥æ¥å…¥äº’è”ç½‘ï¼Œä¸€çª¥è¿™ä¸ªä¿¡æ¯çˆ†ç‚¸çš„ä¸–ç•Œã€‚ç”šè‡³æ²‰è¿·äºæ‰‹æœºï¼Œå°±åƒç°åœ¨è®¸å¤šçš„ä½å¤´ä¸€æ—ï¼Œè™½ç„¶é‚£æ—¶å€™æ‰‹æœºåº”ç”¨å…¶å®çœŸä¸å¤šï¼Œå¾ˆå¤šç”¨æ‰‹æœºçš„äººåªæ˜¯å°†å…¶ä½œä¸ºæ‰“ç”µè¯çš„å·¥å…·ã€‚ç§»åŠ¨äº’è”ç½‘ï¼Œè²Œä¼¼è¿˜æ²¡æœ‰è¿™ä¸ªä¸œè¥¿ï¼Œä½†æˆ‘ä¸é‚£ä¹ˆçœ‹ï¼Œæˆ‘ä»ä¸€å¼€å§‹å°±ä¸æ˜¯ä¸ºäº†æ‰“ç”µè¯ï¼Œç°åœ¨çš„äººåº”è¯¥ä¼šç†è§£ã€‚</p>

<p>ç„¶åï¼Œè¿›å…¥å¤§å­¦ï¼Œå¥½åƒæ•´ä¸ªä¸–ç•Œéƒ½ä¸åŒäº†ï¼Œç¦»å¼€å®¶ä¹¡ï¼Œæ¥åˆ°é™Œç”Ÿçš„åŸå¸‚ã€‚åœ¨å¤§ä¸€ä¸‹å­¦æœŸæ—¶ï¼Œå­¦ä¹ C++ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦åˆ°ç¼–ç¨‹è¯­è¨€ï¼Œè¿˜ä¸Šè¿‡è®¡ç®—æœºç½‘ç»œè¯¾ã€‚ä½†å½“æ—¶å°±æ˜¯ä»€ä¹ˆéƒ½ä¸æ‡‚ï¼Œå³ä½¿æœŸæœ«è€ƒè¯•æ‹¿åˆ°90åˆ†ï¼Œä½†å®é™…ä¸Šä»ç„¶æ¯”ä¸€æ— æ‰€çŸ¥å¥½ä¸äº†å¤šå°‘ã€‚</p>

<p>åæ¥å°±æ”¾ä»»è‡ªæµäº†ï¼Œå¤§å­¦ç”Ÿæ´»æ˜¯å¾ˆè½»æ¾çš„ï¼Œä»€ä¹ˆå‹åŠ›éƒ½æ²¡æœ‰ï¼Œå¦‚æœä½ æƒ³ï¼Œä½ å¯ä»¥å¤§ä¸ä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥æ¯«æ— é•¿è¿›ã€‚æ„è¯†åˆ°è¿™ç‚¹å¹¶ä¸å›°éš¾ï¼Œéš¾çš„æ˜¯åœ¨è¿™ç§å¯èƒ½æ— äººæŒ‡ç‚¹çš„æƒ…å†µä¸‹çªå›´ã€‚å¤§äºŒå¼€å§‹è®²äº†æ•°æ®ç»“æ„è¯¾ï¼Œè€å¸ˆæ˜¯å¤§ä¸€è®²ç¦»æ•£æ•°å­¦çš„é‚£ä½ï¼Œé‚£æ—¶è€å¸ˆè¯´äº†ä¸€å¥ä¸çŸ¥æ˜¯å¥½ä¹…ä¸è§è¿˜æ˜¯åˆè§é¢äº†çš„è¯ï¼Œè®©æˆ‘ä¸€ç›´è§‰å¾—å¥½åƒæ˜¯æ˜¨å¤©å‘ç”Ÿçš„äº‹ã€‚å™¢ï¼Œè¿™æ—¶è¿˜ä¸Šäº†æ•°æ®åº“çš„è¯¾ï¼Œè§‰å¾—å¾ˆæ–°é²œï¼Œä½†æ²¡è§‰å¾—å¥½ç©ï¼Œè€å¸ˆå…¶å®å¾ˆä¸é”™ï¼Œå¯æƒœå½“æ—¶æ²¡èƒ½ä½“ä¼šåˆ°ã€‚è€å¸ˆå¶ç„¶æåˆ°æ›¾ç»åˆ›è¿‡ä¸šï¼Œä¸€ç¬”å¸¦è¿‡ï¼Œæˆ‘ä»¬ä¼¼ä¹ä¹Ÿå¹¶ä¸åœ¨æ„ã€‚åæ¥ï¼Œè€å¸ˆåœ¨13å¹´åˆåˆ›ç«‹ä¸€å®¶å…¬å¸ï¼Œå·²ç»å®ŒæˆBè½®èèµ„ï¼Œè¾¾åˆ°æ•°åäººçš„è§„æ¨¡ï¼Œä½†ä»ç„¶æ¥å­¦æ ¡ä¸Šè¯¾ï¼Œè¿™äº›éƒ½æ˜¯åæ¥å¾—çŸ¥çš„ã€‚</p>

<p>åˆ°äº†å¤§äºŒä¸‹å­¦æœŸï¼Œå¥½åƒæ²¡ä»€ä¹ˆæœ‰è¶£çš„è¯¾äº†ã€‚æˆ‘ä¹Ÿå¼€å§‹æ€è€ƒå‡ºè·¯ï¼Œå› ä¸ºçªç„¶å‘ç°æ—¶é—´ä¸å¤šã€‚è®°å¾—ï¼Œåœ¨å›¾ä¹¦é¦†æ‹¿äº†ä¸€æœ¬ä¹¦ï¼ŒHTML5 canvasåŸºç¡€æ•™ç¨‹ã€‚é‚£æ—¶å€™ï¼Œå›¾ä¹¦é¦†è®²HTML5è¿˜æ²¡æœ‰å‡ æœ¬ã€‚å¤§äºŒç»“æŸçš„é‚£ä¸ªæš‘å‡ï¼Œæˆ‘å€Ÿäº†ä¸€å †ä¹¦å›å®¶ï¼Œæœ‰canvasé‚£æœ¬ï¼Œæœ‰head first HTML5ï¼Œæœ‰è®ºé“HTML5ï¼Œè¿˜æœ‰å‡ æœ¬è²Œä¼¼ï¼Œè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡è¿™ä¹ˆå¹²ï¼Œç›´æ¥ä»åº”ç”¨å…¥æ‰‹ï¼Œå¹¶ä¾è‘«èŠ¦ç”»ç“¢ï¼Œå†™äº†äººç”Ÿä¸­ç¬¬ä¸€ä¸ªæ¸¸æˆï¼Œä»£å·moon9ã€‚è¿™ä¸ªæš‘å‡ï¼Œè¿‡å¾—å¾ˆå……å®ï¼Œè™½ç„¶å¤§éƒ¨åˆ†æ—¶é—´éƒ½å‘†åœ¨å®¶é‡Œï¼Œçœ‹ä¹¦ï¼Œæ•²ä»£ç ã€‚</p>

<p>å¤§ä¸‰å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘ç»™è‡ªå·±å®šä¸‹ä¸€ä¸ªå°ç›®æ ‡ï¼Œæ¯å‘¨è¯»ä¸€æœ¬ä¹¦ï¼Œæ— æ‰€è°“ç±»å‹ï¼Œæ¼«ç”»éƒ½å¯ä»¥ã€‚ä¹Ÿå°±æ˜¯å› ä¸ºè¿™ä¸ªå°å°çš„å†³å®šï¼Œæˆ‘æ‰¾åˆ°äº†è®¸å¤šå¥½ç©çš„ä¸œè¥¿ã€‚é»‘å®¢ä¸ç”»å®¶ï¼Œç½—ç´ çš„æ•…äº‹å°±æ˜¯è¿™æ—¶å€™è¯»çš„ï¼Œæˆ‘è¿˜è®°å¾—é‚£æ—¶åœ¨è‹±å›½æ–‡å­¦é‚£æ ä¹±ç¿»ï¼Œä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆå°±æ‹¿èµ·è¿™æœ¬ä¹¦ï¼Œè™½ç„¶è¿™æœ¬ä¹¦æœ¬ä¸è¯¥å½’ç±»åˆ°è‹±å›½æ–‡å­¦ï¼Œæˆ‘å› æ­¤å¼€å§‹äº†è§£æ•°ç†é€»è¾‘è¿™ä¸ªå…¨æ–°çš„é¢†åŸŸï¼Œç„¶åæˆ‘å»äº†è§£å“¥å¾·å°”ï¼Œç»´ç‰¹æ ¹æ–¯å¦ï¼Œå›¾çµï¼Œå†¯è¯ºä¾æ›¼ã€‚æˆ‘ç»å¸¸åœ¨è¯¾ä½™æ—¶é—´è·‘å»å›¾ä¹¦é¦†ï¼Œä¸€æ–¹é¢å‘ç°æ–°çš„å¥½ä¹¦ï¼Œä¸€æ–¹é¢å®Œæˆæ¯å‘¨çš„é˜…è¯»è®¡åˆ’ï¼Œæœ‰æ—¶å€™åŒæ—¶è¯»å‡ æœ¬ä¹¦ã€‚è¿™ä¸ªå­¦æœŸï¼Œç»å¯¹æ˜¯ä¸€ä¸ªè½¬æŠ˜ç‚¹ï¼Œæˆ–è€…è¯´æ˜¯ä»é‚£ä¸ªæš‘å‡å¼€å§‹çš„ã€‚æˆ‘æ˜¯ä»è¿™æ—¶å€™æ‰å¼€å§‹æœ‰äº†é˜…è¯»çš„ä¹ æƒ¯ï¼Œä½†ä¸€å‘¨ä¸€æœ¬çš„è®¡åˆ’æˆ‘åªåšæŒäº†ä¸€å¹´ï¼Œå¤§å››çš„æ—¶å€™æ‰¾å·¥ä½œçš„æ—¶å€™ä¸ç»æ„çš„æ‰“ç ´è®¡åˆ’ï¼Œä½†æ˜¯ä¸€æœ‰ç©ºæˆ‘ä»ç„¶ä¼šå»æ‰¾ä¹¦è¯»ï¼Œè·Ÿä»å‰è¿˜æ˜¯å¤§ä¸ä¸€æ ·ã€‚</p>

<p>è½¬çœ¼å¤§ä¸‰çš„ç¬¬ä¸€ä¸ªå­¦æœŸè¿‡å»äº†ï¼Œä¸Šè¿‡ä»€ä¹ˆè¯¾ç¨‹å·²ç»è®°ä¸æ¸…æ¥šäº†ã€‚å¯’å‡ï¼Œæˆ‘åˆå¸¦å›å»å¥½å‡ æœ¬ä¹¦ï¼Œè¿™æ—¶å€™è¯»äº†javascripté«˜çº§ç¨‹åºè®¾è®¡ï¼Œä¹‹å‰ä»æ¥æ²¡æœ‰è¯»è¿‡ä¸€æœ¬è®²javascriptè¯­æ³•çš„ä¹¦ï¼Œä»è¿™æ—¶å¼€å§‹æ‰çœŸæ­£äº†è§£jsã€‚å¹¶å†™ä¸‹äº†flingè¿™ä¸ªæ¸¸æˆã€‚è¿™æ—¶å€™ï¼Œæˆ‘å¯¹æ•´ä¸ªwebå¼€å‘ä¹Ÿç®—äº†è§£ï¼ŒçŸ¥é“æœåŠ¡å™¨ï¼Œæ•°æ®åº“ï¼ŒHTTPåè®®è¿™äº›æ¦‚å¿µã€‚</p>

<p>å¤§ä¸‰ä¸‹ï¼Œè½¬çœ¼å°±è¦åˆ°äº†æ¯•ä¸šçš„æ—¶åˆ»ï¼Œä½†è¿˜æœ‰æ—¶é—´ã€‚æˆ‘ä¾ç„¶ä¿æŒç€èŠ‚å¥ï¼Œä¸€è¾¹äº†è§£ä¸€äº›è®¡ç®—æœºå„ä¸ªæ–¹é¢çš„çŸ¥è¯†ï¼Œè½¯ä»¶å·¥ç¨‹ï¼Œæ¸¸æˆAIï¼Œæœºå™¨å­¦ä¹ ï¼Œå¤§æ•°æ®ï¼Œè®¸å¤šCè¯­è¨€å®¶æ—ä¹‹å¤–çš„è¯­è¨€ï¼ŒRubyï¼ŒErlangï¼ŒScalaï¼ŒClojureï¼ŒHaskellï¼Œä¸€æ–¹é¢è¯»äº›çœ‹èµ·æ¥æ¯«æ— ç”¨å¤„çš„ä¹¦ï¼Œæ¯”å¦‚å“²å­¦ï¼Œæ–‡å­¦ï¼Œè‰ºæœ¯ç±»ï¼Œç§‘æ™®ï¼Œæˆ‘å½“ç„¶ä¸è§‰å¾—å®ƒä»¬æ¯«æ— ç”¨å¤„ã€‚é‚£ä¸ªæš‘å‡ï¼Œæˆ‘å¼€å§‹ä¸ºæ‰¾å·¥ä½œä½œå‡†å¤‡ï¼Œè™½ç„¶å¯¹äºä½•å»ä½•ä»ä»ç„¶æ¯«æ— å¤´ç»ªï¼Œä½†å¾—å‡†å¤‡ã€‚æˆ‘æ‹¿äº†ç®—æ³•ï¼Œç¨‹åºå‘˜é¢è¯•æ”»ç•¥ï¼Œeffective javascriptï¼Œthink pythonï¼Œthink Javaï¼Œè¿˜æœ‰ä¸€äº›é˜…è¯»è®¡åˆ’çš„ä¹¦ã€‚ç»ƒä¹ å¾ˆå¤šç®—æ³•çš„ä¾‹å­ï¼Œé‡å†™äº†flingï¼Œå†™äº†ç”Ÿå‘½æ¸¸æˆçš„canvasç‰ˆï¼Œæ±‰è¯ºå¡”çš„å›¾å½¢æ¼”ç¤ºã€‚</p>

<p>æ–°å­¦æœŸå¼€å­¦ï¼Œåˆ°äº†æ‰¾å·¥ä½œçš„æ—¶å€™ï¼Œå¯æƒœä¹æœˆä»½è¢«å­¦æ ¡å¸¦åˆ°ç»µé˜³ã€‚å›½åº†ä¹‹åï¼Œå¼€å§‹å¤§è§„æ¨¡æŠ•ç®€å†ï¼Œç¬¬ä¸€ä¸ªé¢è¯•æœºä¼šæ˜¯517naï¼Œè¡¨ç°å¾—å¾ˆç³Ÿç³•ï¼Œç´§å¼ åŠ ä¹‹æ²¡ç»éªŒã€‚ç¬¬äºŒä¸ªé¢è¯•æœºä¼šï¼Œæ˜¯ç¾å›¢ï¼Œè¿›å…¥ç¬¬ä¸‰ä¸ªç¯èŠ‚ï¼Œå¯æƒœå¤±è´¥äº†ã€‚åæ¥ï¼Œåˆå‚ä¸äº†å¥½å‡ æ¬¡é¢è¯•ï¼Œå¹¶é€æ¸æ‰¾åˆ°è‡ªå·±çš„å®šä½ï¼Œå‰ç«¯ã€‚ç„¶åï¼Œåˆ°åä¸€æœˆä»½ï¼Œå»å…¨å¾®å®ä¹ ã€‚åœ¨è¿™é‡Œï¼Œå­¦åˆ°äº†å¾ˆå¤šï¼Œåœ¨è‡ªå­¦æ—¶å­¦ä¸åˆ°çš„ä¸œè¥¿ã€‚åæ¥ï¼Œå°±æ¥åˆ°é˜¿é‡Œã€‚</p>

<p>å…¶å®ï¼Œä¸»è¦çš„å­¦ä¹ åŸºæœ¬é›†ä¸­åœ¨å‡æœŸï¼Œä¸¤ä¸ªæš‘å‡ï¼Œä¸€ä¸ªå¯’å‡ï¼Œåœ¨å­¦æ ¡å¾ˆå°‘æœ‰æœºä¼šè¿ç»­çš„å­¦ä¹ ï¼Œæ›´å¤šçš„éšä¾¿åšäº›æ–°çš„å°è¯•ã€‚ç„¶åï¼Œå°±æˆä¸ºä¸€åç¨‹åºå‘˜ï¼Œä¸€åå‰ç«¯å·¥ç¨‹å¸ˆã€‚</p>

<p>ä¹‹å‰çœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œè°ˆå­¦ä¹ ç¼–ç¨‹çš„å¹´é¾„ï¼Œè‡ªå·±äºŒåå¥½å‡ äº†ï¼Œç°åœ¨å­¦ä¹ ç¼–ç¨‹éš¾å—ã€‚éš¾å—ï¼Ÿå…¶å®æ²¡é‚£ä¹ˆå›°éš¾ï¼Œåƒæˆ‘è¿™æ ·ä¸æ˜¯ä¹Ÿèƒ½å†™ç‚¹ä»£ç ä¹ˆï¼Ÿ</p>

<p>äººæ€»æ˜¯ä¸ç”˜äºå¹³åº¸çš„ï¼Œè™½ç„¶æ‹¿åˆ°é˜¿é‡Œçš„offerï¼Œä½†åªæ˜¯èµ·ç‚¹ï¼Œæˆ‘çŸ¥é“æˆ‘æ¬ ç¼ºçš„æœ‰å¾ˆå¤šã€‚æ²¡äººæ„¿æ„ä¸€è¾ˆå­æ— æ‰€ä½œä¸ºï¼Œå°¤å…¶æ˜¯åœ¨ä¿¡æ¯æŠ€æœ¯é£é€Ÿå‘å±•çš„äº’è”ç½‘è¡Œä¸šï¼Œä¸æ›´æ–°è‡ªå·±ï¼Œç®€ç›´æ˜¯åœ¨è‡ªæ€ã€‚</p>

<p>è¿™ä¸¤å¤©ï¼Œç¿»èµ·ç¬”è®°æœ¬ï¼Œè®°å½•æˆ‘çš„ä¸€äº›ç»å†ï¼Œæ¯”å¦‚æ¡†å›¾ï¼ŒåŠŸèƒ½ï¼Œç®€å†ã€‚æˆ‘å–œæ¬¢ä¸€ä¸ªæœ¬å­ï¼Œä¸€æ”¯ç¬”ï¼Œå‘¨å›´å°½æ˜¯å‡Œä¹±ï¼Œå¤´è„‘é£æš´ï¼ŒæŠŠè‡ªå·±æƒ³åˆ°çš„é€šé€šå†™ä¸‹æ¥ï¼Œè¿™ç§æ–¹æ³•å¾ˆé€‚åˆæˆ‘ã€‚åœ¨è¿™ä¸€å¹´é‡Œï¼Œåè€Œä¸æ€ä¹ˆä½¿ç”¨äº†ï¼Œå¤§å››çš„è¿™æ®µæ—¶é—´ï¼Œå¥½åƒç»å†è¿‡å¾ˆå¤šäº‹æƒ…ã€‚ä¹‹æ‰€ä»¥ç»™æˆ‘è¿™ç§é”™è§‰ï¼Œæˆ‘æƒ³æ˜¯å› ä¸ºä¹‹å‰çš„ç”Ÿæ´»å¤ªè¿‡äºæ¸©å®¤åŒ–ï¼Œæ³¢æ¾œä¸æƒŠï¼Œæˆ‘æ”¾å¼ƒäº†å°è¯•ï¼Œæ‰€ä»¥æœ€åä¸€èµ·æ‰‘å‘æˆ‘ã€‚</p>

<p>æˆ‘æƒ³èµ·é‚£ä¸ªæš‘å‡åœ¨å®¶ä¸ºå·¥ä½œå‡†å¤‡çš„æˆ‘ï¼Œè‚¯å®šæ²¡æƒ³åˆ°åæ¥å‘ç”Ÿçš„ä¸€åˆ‡ï¼Œæœªæ¥çš„è·¯è¿˜å¾ˆæ¼«é•¿ï¼Œè°çŸ¥é“ä¼šæ€æ ·å‘¢ï¼Œä½†æ˜¯æˆ‘çŸ¥é“ï¼Œè‹¥æ˜¯ä»€ä¹ˆéƒ½ä¸åšçš„è¯ï¼Œä¼šæ¯”ä½ æƒ³è±¡çš„æ›´ç³Ÿç³•ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ä¸€ä¸ªå°é¡¹ç›®ä¹‹å]]></title>
    <link href="http://blog.mirreal.net/blog/2015/04/19/a-small-project/"/>
    <updated>2015-04-19T23:11:18+08:00</updated>
    <id>http://blog.mirreal.net/blog/2015/04/19/a-small-project</id>
    <content type="html"><![CDATA[<p>æ²¡æƒ³åˆ°è¿™ä¹ˆå¿«å°±æœ‰äº†è‡ªå·±è´Ÿè´£çš„ä¸€ä¸ªå°é¡¹ç›®ã€‚</p>

<p>ä½†æ˜¯ï¼Œä»ä¸Šå‘¨äº”å¼€å§‹ï¼Œä¸€ç›´æŒç»­åˆ°æœ¬å‘¨äº”ï¼Œæ‰åŸºæœ¬ä»ä¸­è„±ç¦»å‡ºæ¥ã€‚</p>

<p>ä½“ä¼šäº†ä¸€æŠŠåœ¨äº’è”ç½‘å…¬å¸åŠ ç­çš„èŠ‚å¥ï¼Œå‘¨å…­åŠ ç­ï¼Œå‘¨ä¸€åˆ°11ç‚¹ï¼Œå‘¨äºŒåˆ°é›¶ç‚¹ï¼Œå‘¨ä¸‰å¹²è„†æ²¡å›å»ï¼Œå‘¨å››æ­£å¼ä¸Šçº¿ï¼Œåˆåˆ°å‡Œæ™¨ä¸€ç‚¹ï¼Œå‘¨äº”æœ¬æƒ³å¤šç¡ä¼šå„¿ï¼Œä½†å‡ºç°é—®é¢˜ï¼Œåˆæ¥åˆ°å…¬å¸ã€‚</p>

<p>ä½†æ˜¯ï¼Œä¹Ÿæœ‰ä¸€ç‚¹æ”¶è·ï¼Œæ¥è§¦äº†ä¸€äº›äººã€‚æˆ‘æ˜¯ä¸ªè¢«åŠ¨çš„äººï¼Œå¹³å¸¸å¾ˆå°‘ä¸»åŠ¨å»è®¤è¯†åˆ«äººï¼Œä½†å› ä¸ºå·¥ä½œå…±åŒçš„ç›®æ ‡ï¼Œè€Œæœ‰äº†ä¸€ç‚¹å…±åŒçš„è¯­è¨€ï¼Œå¿…ä¸å¯å°‘çš„æ²Ÿé€šã€‚è¿™è®©æˆ‘æ„è¯†åˆ°ï¼Œæˆ‘ä»ç„¶æ˜¯ä¸€ä¸ªæ™®é€šçš„äººï¼Œä»ç„¶æ¸´æœ›ç¾¤ä½“ç”Ÿæ´»ï¼Œä»ç„¶æ¸´æœ›äº¤æµæ²Ÿé€šï¼Œå³ä½¿æœ¬è´¨ä¸Šæ˜¯ä¸ªä¸æ“…ç¤¾äº¤çš„äººã€‚</p>

<!-- more -->


<p>åœ¨è¿™æ¬¡äº‹ä»¶ä¸­ï¼Œå‘ç°è‡ªå·±æœ‰å¾ˆå¤šé—®é¢˜ã€‚
æ¯”å¦‚åœ¨æŠ€æœ¯ä¸Š</p>

<ol>
<li>ä»£ç é£æ ¼ä¸ç»Ÿä¸€</li>
<li>è€¦åˆåº¦å¤ªé«˜</li>
<li>ä¸å†™æ³¨é‡Š</li>
<li>æ²¡æœ‰è‡ªå·±çš„ç¼–ç¨‹æ€è·¯</li>
</ol>


<p>è¿™åªæ˜¯ä¸€éƒ¨åˆ†ï¼Œè™½ç„¶æˆ‘ä¸€ç›´æ˜ç™½è‡ªå·±ç°åœ¨å¹¶ä¸æ˜¯ä¸ªé«˜æ‰‹ï¼Œä½†æ²¡æƒ³åˆ°è¿˜æ˜¯é«˜ä¼°äº†è‡ªå·±ï¼Œå­˜åœ¨å¤ªå¤šé—®é¢˜ã€‚</p>

<p>è¿˜æœ‰ï¼Œæˆ‘å‘ç°è‡ªå·±æ²¡æœ‰è§£å†³é—®é¢˜çš„çƒ­æƒ…ï¼Œæ¯”å¦‚æŸä¸ªå…¼å®¹æ€§é—®é¢˜ï¼Œå¬ä¹‹ä»»ä¹‹ï¼Œä¹Ÿæ²¡æœ‰ä¸€å¥—è¡Œä¹‹æœ‰æ•ˆçš„è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚å®šä½ï¼ŒäºŒåˆ†ï¼Œè¿™äº›ä¸œè¥¿å½“ç„¶çŸ¥é“ï¼Œæ€»å«Œéº»çƒ¦æ‡’å¾—å»å¼„ã€‚</p>

<p>è¯´åˆ°è¿™é‡Œï¼Œæˆ‘å‘ç°è‡ªå·±è¿˜æœ‰æ˜æ˜¾çš„æ‹–å»¶ç—‡ï¼Œå›é¿é—®é¢˜ï¼Œæƒ³è®©æ—¶é—´å†²èµ°ä¸€åˆ‡ã€‚</p>

<p>æˆ‘è¿˜æ€è€ƒäº†ä¸€äº›æ›´æ·±å±‚æ¬¡çš„åŸå› ï¼Œæ¯”å¦‚å¯¹äºå·¥ä½œã€‚æˆ‘ä»æ¥éƒ½ä¸æ˜¯ä¸€ä¸ªå·¥ä½œç‹‚ï¼Œä¹‹å‰åœ¨å…¨å¾®å°±æ˜¯ï¼Œåˆ°ä¸‹ç­æ—¶é—´å°±èµ°ï¼Œè™½ç„¶æˆ‘çŸ¥é“å¤§å¤šæ•°è€æ¿éƒ½ä¸å–œæ¬¢è¿™æ ·çš„äººã€‚è€Œä¸”ï¼Œæ—¥å¤ä¸€æ—¥çš„å·¥ä½œï¼Œé‡å¤çš„äº‹ï¼Œæ€»ä¼šæ˜¾å¾—æ¯ç‡¥ã€‚</p>

<p>æˆ‘å–œæ¬¢æ–°é²œçš„äº‹ç‰©ï¼Œç”šè‡³è¿‡å¤´äº†ï¼Œå–œæ–°åŒæ—§ã€‚ä¹‹æ‰€ä»¥æˆäº†ä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç©ç”µå­æŠ€æœ¯çš„ï¼Œå°±æ˜¯ç”±äºå¯¹æ–°é²œäº‹ç‰©çš„ä¸€ç§è¿½æ±‚ã€‚æˆ‘è¿½æ±‚å¤šä¸ªé¢†åŸŸçš„èæ±‡è´¯é€šï¼Œä½†å¯¹æ¯ä¸ªé¢†åŸŸéƒ½ä¸æ±‚ç”šè§£ï¼ŒæŠ±ç€ä¸€ç§ç©ä¹çš„å¿ƒç†ï¼Œèµ°é©¬è§‚èŠ±ã€‚</p>

<p>å½“æ—¶ä¸ºä»€ä¹ˆé€‰æ‹©å»å›¾ä¹¦é¦†å‘¢ï¼Œå› ä¸ºéœ€è¦ä¸€ç§æ–¹å¼æ¥å¡«è¡¥å› ä¸ºè¿·èŒ«é€ å°±çš„ç©ºç™½ï¼Œè€Œè¯»ä¹¦ï¼Œæ˜¯æˆæœ¬æœ€ä½çš„æ–¹å¼ã€‚å¥½å§ï¼Œæˆ‘æ‰¿è®¤ï¼Œæˆ‘æ²¡é’±ï¼Œä¹Ÿæ²¡å…´è¶£å»æ‰®äººå¶å»èµšé’±ï¼Œè¿™ä¸ªä¸–ç•Œå¾ˆå¤šäº‹æƒ…éƒ½åƒä½“éªŒï¼Œå´å› ä¸ºé’±æ²¡æœ‰å»åšã€‚æ‰€ä»¥ï¼Œæˆ‘æƒ³å‘Šè¯‰åæ¥è€…ï¼Œåˆ«å› ä¸ºé’±æ”¾å¼ƒä½ çš„æ¢¦æƒ³ï¼Œå› ä¸ºè¿™çœŸçš„æŒºå‚»çš„ï¼Œæˆ‘ç°åœ¨æ‰å‘ç°ï¼Œåªè¦ä½ æ•¢å»æƒ³è±¡ï¼Œé’±ä»æ¥éƒ½ä¸æ˜¯é—®é¢˜ï¼Œæˆ–è®¸åªæ˜¯ä¸ªå€Ÿå£ç½¢äº†ã€‚</p>

<p>å·¥ä½œçš„æ„ä¹‰åœ¨äºä»€ä¹ˆå‘¢ï¼Œè‡ªæˆ‘ä»·å€¼çš„ä½“ç°ï¼Œäººç”Ÿæ„ä¹‰çš„å®ç°ï¼Œå›åˆ°äººç¾¤ä¸­ï¼Œæˆ–è€…æ˜¯ä¸ºäº†æ‰“å‘è¿™ä¸€ç”Ÿï¼Œä¸ºäº†æŠ¥é…¬ï¼Œä¸ºäº†ç”Ÿå­˜ã€‚æˆ‘ï¼Œå…¶å®ä¸å¤ªæ˜ç™½ï¼Œæˆ‘æ²¡æœ‰è¿‡æ¢¦æƒ³ï¼Œå€’æ˜¯æœ‰äº›ä¸åˆ‡ä¸–çºªçš„å¹»æƒ³ã€‚æœ‰æ—¶ï¼Œè§‰å¾—ç”Ÿæ´»å¾ˆè™šåŒ–çš„ï¼Œå°±åƒæ­¤åˆ»ï¼Œå¬ç€é›¨å£°ï¼Œå¬ç€æŸ´å¯å¤«æ–¯åŸºï¼Œæ€è€ƒè¿™äº›æ— èŠçš„è¯é¢˜ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[å®ç°ä¸å®šå°ºå¯¸å›¾ç‰‡å±…ä¸­çš„å‡ ç§æ–¹å¼]]></title>
    <link href="http://blog.mirreal.net/blog/2015/01/23/image-audo-middle/"/>
    <updated>2015-01-23T21:26:48+08:00</updated>
    <id>http://blog.mirreal.net/blog/2015/01/23/image-audo-middle</id>
    <content type="html"><![CDATA[<p>è¿™æ˜¯åœ¨å®ä¹ å·¥ä½œä¸­é‡åˆ°çš„ä¸€ä¸ªéœ€æ±‚ï¼Œå®ç°æœªçŸ¥å°ºå¯¸çš„å›¾ç‰‡åœ¨ä¸€å›ºå®šå®½é«˜çš„å®¹å™¨ä¸­æ°´å¹³å’Œå‚ç›´å±…ä¸­ã€‚</p>

<p>æ¯”å¦‚æ˜¯åœ¨ä¸€ä¸ª 200px çš„æ­£æ–¹å½¢å®¹å™¨ï¼Œå›¾ç‰‡çš„å®½é«˜å¯èƒ½å¤§äº 200pxï¼Œä¹Ÿå¯èƒ½å°äº 200pxã€‚å¯¹äºå°å›¾ç‰‡ï¼Œå°±æ˜¯ç®€å•çš„æ°´å¹³å’Œå‚ç›´å±…ä¸­ï¼Œè€Œå¤§å›¾ç‰‡åˆ™è¦æ±‚æŒ‰æ¯”ä¾‹ç¼©æ”¾ï¼Œå¹¶å®ç°å±…ä¸­ã€‚</p>

<p>è¿™ä¸ªé—®é¢˜ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢çš„ç‚¹ï¼š</p>

<ul>
<li>æœªçŸ¥å°ºå¯¸å…ƒç´ çš„å‚ç›´å±…ä¸­</li>
<li>å¤§å›¾ç‰‡çš„å®½é«˜é€‚é…</li>
</ul>


<p>å› ä¸ºå›¾ç‰‡å¤§å°å°ºå¯¸æœªçŸ¥ï¼Œä¸”å¯èƒ½è¶…å‡ºå®¹å™¨ï¼Œå¾ˆå¤šå‚ç›´å±…ä¸­çš„æ–¹æ³•ä¸èƒ½ç”¨ã€‚</p>

<h3>æœ€ç»ˆçš„è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š</h3>

<!-- more -->


<p>HTML å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;box&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;img/0.jpg&quot;</span> <span class="na">alt=</span><span class="s">&quot;earth shadow&quot;</span> <span class="na">title=</span><span class="s">&quot;It&#39;s me&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>CSSï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.box</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">height</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">relative</span><span class="p">;</span>
</span><span class='line'>  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nc">.box</span> <span class="nt">img</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>  <span class="k">top</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">right</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">bottom</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">margin</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
</span><span class='line'>  <span class="k">max-width</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">max-height</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>å°†å®¹å™¨çš„ä½ç½®è®¾ä¸º <code>relative</code> ï¼Œå›¾ç‰‡çš„ä½ç½®è®¾ä¸º <code>absolute</code> ï¼Œç„¶åå°†å…¶ <code>top</code>ï¼Œ <code>right</code>ï¼Œ <code>bottom</code>ï¼Œ <code>left</code> éƒ½è®¾ç½®æˆ0ï¼Œè™½ç„¶å›¾ç‰‡å°ºå¯¸æœªçŸ¥ï¼Œä½†æ˜¯å¯¹äºä¸€å¼ å…·ä½“çš„å›¾ç‰‡è€Œè¨€æ˜¯æœ‰å›ºå®šå®½é«˜çš„ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ä½¿å®ƒå››ä¸ªæ–¹ä½é—´è·éƒ½ä¸º0ï¼Œå› æ­¤ <code>margin: auto;</code> ä¼šè®©å®ƒå±…ä¸­ã€‚å¦‚æœä»…å¯¹äºå®½é«˜éƒ½å°äº200pxçš„å›¾ç‰‡ï¼Œè¿™æ ·å°±è¶³å¤Ÿäº†ï¼Œä½†æ˜¯å¯¹äºå¤§å›¾ç‰‡å°±ä¸é€‚ç”¨ï¼Œæ‰€ä»¥å†åŠ ä¸Š <code>max-width: 200px; max-height: 200px;</code> ï¼Œè¿™æ ·å›¾ç‰‡å°±å¯ä»¥è‡ªé€‚åº”ç¼©æ”¾ã€‚</p>

<p>æŸ¥çœ‹æ¼”ç¤ºï¼š<a href="https://mirreal.github.io/demo/image-center/1.html">demo1</a></p>

<h3>æ–¹å¼äºŒï¼šä½¿ç”¨è¡¨æ ¼å¸ƒå±€</h3>

<p>è¿˜æ˜¯è¿™æ®µ HTMLï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;box1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;img/0.jpg&quot;</span>  <span class="na">alt=</span><span class="s">&quot;earth shadow&quot;</span> <span class="na">title=</span><span class="s">&quot;It&#39;s me&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>CSSè¿™æ ·å†™ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.box1</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">height</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">min-width</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">display</span><span class="o">:</span> <span class="k">table-cell</span><span class="p">;</span>
</span><span class='line'>  <span class="k">vertical-align</span><span class="o">:</span> <span class="k">middle</span><span class="p">;</span>
</span><span class='line'>  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nc">.box1</span> <span class="nt">img</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">max-width</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">max-height</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">vertical-align</span><span class="o">:</span> <span class="k">middle</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>æŸ¥çœ‹æ¼”ç¤ºï¼š<a href="https://mirreal.github.io/demo/image-center/2.html">demo2</a></p>

<h3>æ–¹å¼ä¸‰ï¼šä½¿ç”¨èƒŒæ™¯å›¾ç‰‡</h3>

<p>HTMLå°±ç›´æ¥å†™äº†ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;box2&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>CSSï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.box2</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">height</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">background-image</span><span class="o">:</span> <span class="sx">url(img/0.jpg)</span><span class="p">;</span>
</span><span class='line'>  <span class="k">background-repeat</span><span class="o">:</span> <span class="k">no-repeat</span><span class="p">;</span>
</span><span class='line'>  <span class="k">background-position</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¸€ä¸ªæ¼”ç¤ºï¼š<a href="https://mirreal.github.io/demo/image-center/3.html">demo3</a></p>

<p>ç›´æ¥ä½¿ç”¨ <code>background-position: center;</code> å®ç°å±…ä¸­ï¼Œå¦‚å›¾ç‰‡å°ºå¯¸å°äº 200px å°± OK äº†ã€‚ä½†æ˜¯å¯¹äºå¤§å›¾ç‰‡ï¼Œä¼šè¢«æˆªæ‰ï¼Œæ‰€ä»¥è¿˜éœ€åŠ ä¸Š <code>background-size: contain;</code> ï¼Œå¯æ˜¯å¯¹äºå°å›¾ç‰‡åˆæœ‰é—®é¢˜ï¼Œå› ä¸ºåŠ ä¸Šè¿™ä¸ªå±æ€§ä¼šå¯¹å›¾ç‰‡ç¼©æ”¾ï¼Œå°å›¾ä¹Ÿä¸ä¾‹å¤–ã€‚è€Œåœ¨æˆ‘ä»¬çš„éœ€æ±‚é‡Œï¼Œå¯¹å°å›¾è¦æ±‚æŒ‰ç…§å…¶åŸæœ‰å¤§å°æ˜¾ç¤ºã€‚</p>

<p>è²Œä¼¼è¿™ç§æ–¹å¼ä½¿ç”¨çº¯ CSS è¡Œä¸é€šã€‚</p>

<p>&hellip;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ç¬¬ä¸€æ¬¡å®ä¹ ç”Ÿä½“éªŒ]]></title>
    <link href="http://blog.mirreal.net/blog/2014/11/29/my-first-internship/"/>
    <updated>2014-11-29T23:21:08+08:00</updated>
    <id>http://blog.mirreal.net/blog/2014/11/29/my-first-internship</id>
    <content type="html"><![CDATA[<p>å®ä¹ ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€ä»½å·¥ä½œã€‚</p>

<p>ä¸€ç›´æƒ³å¯¹æ­¤å†™ç‚¹ä»€ä¹ˆã€‚åœ¨è¿™æ®µå¹¶ä¸æ˜¯å¤ªé•¿çš„æ—¶é—´é‡Œï¼Œå­¦åˆ°çš„å¾ˆå¤šï¼Œæœ‰äº›ä¸œè¥¿å¯èƒ½æ— æ³•è¨€è¡¨ï¼Œå°±åƒæ˜¯æŸç§æ½œç§»é»˜åŒ–çš„å½±å“å’Œå˜åŒ–ã€‚</p>

<p>å°±ä¹‹å‰çš„å·¥ä½œè€Œè¨€ï¼Œè™½è¯´æ²¡æœ‰é‡åˆ°ä»€ä¹ˆå¤ªå¤æ‚çš„ä»»åŠ¡ï¼Œä¸»è¦æ˜¯å­¦ä¹ å’Œç†Ÿæ‚‰ã€‚ä½†æ˜¯ï¼ŒçœŸçš„è¿›å…¥å·¥ä½œç¯å¢ƒï¼Œæ‰çŸ¥é“å¾ˆå¤šä¸œè¥¿éƒ½è¦èŠ±æ—¶é—´ï¼Œå»äº†è§£ä¸€äº›å…·ä½“çš„ç‰¹åˆ«ç»†èŠ‚çš„ä¸œè¥¿ã€‚ä»¥å‰è‡ªå·±å­¦ä¹ æ—¶å€™æ›´å¤šçš„åœ¨äºé€»è¾‘å®ç°ï¼Œéšéšä¾¿ä¾¿å°±ç®—äº†ï¼Œå“ªé‡Œæƒ³è¿‡å¤ªå¤šã€‚æˆ‘ä¹Ÿä¸æ¸…æ¥šï¼Œæˆ‘æ€ä¹ˆå°±æˆäº†ä¸€åå‰ç«¯å·¥ç¨‹å¸ˆäº†ã€‚</p>

<!-- more -->


<p>å›æƒ³æœ€åˆçš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼ŒèŠ±äº†å¾ˆå¤šæ—¶é—´å»æŒæ¡Javascriptè¿™é—¨è¯­è¨€ï¼Œä½†å¹¶éç ”ç©¶å…¶åœ¨æµè§ˆå™¨ä¸­çš„å„ç§ç”¨æ³•ã€‚å¸ƒå±€è¿™ç§äº‹ï¼Œä¹Ÿç›¸å½“é©¬è™ï¼Œæˆ–è€…è¯´å¯¹CSSä»æ¥éƒ½æ²¡ä¸Šå¿ƒï¼Œå’Œå¾ˆå¤šåšåç«¯å¯¹cssçš„è®¤è¯†ç±»ä¼¼ï¼Œå®Œå®Œå…¨å…¨ä¸€ä¸ªæ–°æ‰‹çš„å§¿æ€ã€‚å¯æ˜¯ï¼Œä½œä¸ºä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆï¼Œå¦‚æœçŸ¥é“çš„CSSçŸ¥è¯†æ¯”ä¸€ä¸ªåç«¯å¼€å‘è€…å¤šä¸äº†å¤šå°‘ï¼Œé‚£æœªå…æ˜¾å¾—å¤ªä¸åˆæ ¼ã€‚</p>

<p>åœ¨ç§‹å­£æ‹›è˜å­£ä¹‹åˆï¼Œå’Œå¾ˆå¤šäººä¸€æ ·æ˜¾å¾—ç‰¹åˆ«è¿·èŒ«ï¼Œä¸çŸ¥é“è¯¥ä½•å»ä½•ä»ï¼ŒæŠ•é€’è¿‡å¾ˆå¤šä¸åŒçš„èŒä½ï¼Œä»€ä¹ˆè¿ç»´ï¼Œæµ‹è¯•ï¼Œç ”å‘ï¼Œç½‘ç»œéƒ½æœ‰ã€‚åœ¨é‚£æ—¶å€™ï¼Œå¯¹å‰ç«¯å·¥ç¨‹å¸ˆçš„ç†è§£ç‰¹åˆ«ç‰‡é¢å’Œé”™è¯¯ï¼Œåœ¨ç»è¿‡ç¾å›¢é¢è¯•ä¹‹åæ‰å†³å®šèµ°ä¸Šå‰ç«¯å¼€å‘çš„è·¯ã€‚å¯æ˜¯ï¼Œæ ¡æ‹›è¿™ç§äº‹å°±åƒä¸€é˜µé£ä¸€æ ·ï¼Œæ¥å¾—å¿«å»å¾—ä¹Ÿå¿«ï¼Œç­‰åˆ°æˆ‘åšå®šè‡ªå·±çš„è·¯çº¿ä¹‹åï¼Œä»¿ä½›ä»€ä¹ˆéƒ½æ™šäº†ï¼Œè™½ç„¶æˆ‘ä»åœ¨è¿›è¡Œå„ç§å°è¯•ï¼Œå¯æ˜¯æ•ˆæœç”šå¾®ã€‚</p>

<p>é‚£ä¸€æ®µæ—¶é—´é‡Œï¼Œä¹Ÿè®©æˆ‘æ˜ç™½ä¸€ä»¶å¾ˆé‡è¦çš„äº‹ï¼Œä»¥å‰çš„æˆ‘å¤ªå±€é™äºè‡ªå·±çš„è±¡ç‰™å¡”ï¼Œå¤–é¢çš„æ´ªè’ä¸–ç•Œè®©æˆ‘ä¸æ•¢è¸å‡ºã€‚ä½†æ˜¯å‘¢ï¼Œæ—©ç‚¹å¤±è´¥ï¼Œå°±å¯èƒ½æ—©ç‚¹æˆåŠŸï¼Œæ²¡èƒ½å‹‡æ•¢åœ°èµ°å‡ºå»æ˜¯å¤§å­¦é‡Œæœ€å¤§çš„é—æ†¾ã€‚å¦‚æœæœ‰æœºä¼šæ—©ç‚¹æ¥è§¦è¿™ä¸ªçœŸå®çš„ä¸–ç•Œï¼Œç°åœ¨æˆ‘çš„å¤„å¢ƒè‚¯å®šä¼šæ›´å¥½ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Base64ç®€è¦ç¬”è®°åŠå…¶ä»–]]></title>
    <link href="http://blog.mirreal.net/blog/2014/11/06/base64-note/"/>
    <updated>2014-11-06T21:38:01+08:00</updated>
    <id>http://blog.mirreal.net/blog/2014/11/06/base64-note</id>
    <content type="html"><![CDATA[<h3>Base64 æ˜¯ä¸€ç§åŸºäº 64 ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„è¡¨ç¤ºæ–¹æ³•ã€‚</h3>

<h4>1.base64 ç®—æ³•çš„ç”±æ¥</h4>

<p>base64 æœ€æ—©æ˜¯ç”¨ä½œè§£å†³ç”µå­é‚®ä»¶çš„ä¼ è¾“é—®é¢˜ï¼Œç”±äºå†å²åŸå› ï¼Œæ—©æœŸç”µå­é‚®ä»¶åªå…è®¸ä¼ è¾“ ASCII ç å­—ç¬¦ï¼Œå¦‚æœæƒ³ä¼ è¾“ä¸€å°å¸¦æœ‰é ASCII å­—ç¬¦çš„é‚®ä»¶ï¼Œåœ¨é‡åˆ°ä¸€äº›è€æ—§çš„ç½‘å…³å°±å¯èƒ½ä¼šå¯¹å­—ç¬¦æœ€é«˜ä½è¿›è¡Œè°ƒæ•´ï¼Œå¯¼è‡´æ”¶åˆ°çš„é‚®ä»¶å‡ºç°ä¹±ç ã€‚</p>

<h4>2.base64 ä¸æ˜¯åŠ å¯†ç®—æ³•</h4>

<p>base64 ç®—æ³•çš„ç¼–ç å’Œè§£ç æ–¹æ³•å¯ä»¥ä½œä¸ºåŠ å¯†å’Œè§£å¯†æ“ä½œï¼Œä½†æ˜¯ä¸èƒ½å«åšåŠ å¯†ç®—æ³•ï¼Œå› ä¸ºå…¶ç®—æ³•å’Œå……å½“å¯†é’¥çš„ç´¢å¼•è¡¨éƒ½æ˜¯å…¬å¼€çš„ã€‚æœ€å¤šæ˜¯è®©åœ¨ä½ èº«åçš„äººä¸€æ—¶çœ‹ä¸æ‡‚ï¼Œæ‰€è°“é˜²å›å­ä¸é˜²å°äººã€‚</p>

<h4>3.Base ç¼–ç æ–¹æ³•</h4>

<!-- more -->


<p>è½¬æ¢çš„æ—¶å€™ï¼Œå°†ä¸‰ä¸ª byte çš„æ•°æ®ï¼Œå…ˆåæ”¾å…¥ä¸€ä¸ª 24bit çš„ç¼“å†²åŒºä¸­ï¼Œå…ˆæ¥çš„ byte å é«˜ä½ã€‚æ•°æ®ä¸è¶³ 3byte çš„è¯ï¼Œå‰©ä¸‹çš„ bit ç”¨ 0 è¡¥è¶³ã€‚ç„¶åï¼Œæ¯æ¬¡å–å‡º 6 ä¸ª bitï¼ŒæŒ‰ç…§å…¶å€¼é€‰æ‹©ç´¢å¼•è¡¨çš„å­—ç¬¦ä½œä¸ºç¼–ç åçš„è¾“å‡ºã€‚ä¸æ–­è¿›è¡Œï¼Œç›´åˆ°å…¨éƒ¨è¾“å…¥æ•°æ®è½¬æ¢å®Œæˆã€‚</p>

<p>è¿™é‡Œå°±ä¸ä¸¾ä¾‹è¯´æ˜ï¼Œå…·ä½“å¯ä»¥å‚è€ƒç»´åŸºç™¾ç§‘ã€‚</p>

<h4>4.base64 ç´¢å¼•è¡¨å¦‚ä¸‹</h4>

<table>
<tr>
<th scope="col">æ•°å€¼</th>
<th scope="col">å­—ç¬¦</th>
<th scope="col">æ•°å€¼</th>
<th scope="col">å­—ç¬¦</th>
<th scope="col">æ•°å€¼</th>
<th scope="col">å­—ç¬¦</th>
<th scope="col">æ•°å€¼</th>
<th scope="col">å­—ç¬¦</th>
</tr>
<tr>
<td>0</td>
<td>A</td>
<td>16</td>
<td>Q</td>
<td>32</td>
<td>g</td>
<td>48</td>
<td>w</td>
</tr>
<tr>
<td>1</td>
<td>B</td>
<td>17</td>
<td>R</td>
<td>33</td>
<td>h</td>
<td>49</td>
<td>x</td>
</tr>
<tr>
<td>2</td>
<td>C</td>
<td>18</td>
<td>S</td>
<td>34</td>
<td>i</td>
<td>50</td>
<td>y</td>
</tr>
<tr>
<td>3</td>
<td>D</td>
<td>19</td>
<td>T</td>
<td>35</td>
<td>j</td>
<td>51</td>
<td>z</td>
</tr>
<tr>
<td>4</td>
<td>E</td>
<td>20</td>
<td>U</td>
<td>36</td>
<td>k</td>
<td>52</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>F</td>
<td>21</td>
<td>V</td>
<td>37</td>
<td>l</td>
<td>53</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>G</td>
<td>22</td>
<td>W</td>
<td>38</td>
<td>m</td>
<td>54</td>
<td>2</td>
</tr>
<tr>
<td>7</td>
<td>H</td>
<td>23</td>
<td>X</td>
<td>39</td>
<td>n</td>
<td>55</td>
<td>3</td>
</tr>
<tr>
<td>8</td>
<td>I</td>
<td>24</td>
<td>Y</td>
<td>40</td>
<td>o</td>
<td>56</td>
<td>4</td>
</tr>
<tr>
<td>9</td>
<td>J</td>
<td>25</td>
<td>Z</td>
<td>41</td>
<td>p</td>
<td>57</td>
<td>5</td>
</tr>
<tr>
<td>10</td>
<td>K</td>
<td>26</td>
<td>a</td>
<td>42</td>
<td>q</td>
<td>58</td>
<td>6</td>
</tr>
<tr>
<td>11</td>
<td>L</td>
<td>27</td>
<td>b</td>
<td>43</td>
<td>r</td>
<td>59</td>
<td>7</td>
</tr>
<tr>
<td>12</td>
<td>M</td>
<td>28</td>
<td>c</td>
<td>44</td>
<td>s</td>
<td>60</td>
<td>8</td>
</tr>
<tr>
<td>13</td>
<td>N</td>
<td>29</td>
<td>d</td>
<td>45</td>
<td>t</td>
<td>61</td>
<td>9</td>
</tr>
<tr>
<td>14</td>
<td>O</td>
<td>30</td>
<td>e</td>
<td>46</td>
<td>u</td>
<td>62</td>
<td>+</td>
</tr>
<tr>
<td>15</td>
<td>P</td>
<td>31</td>
<td>f</td>
<td>47</td>
<td>v</td>
<td>63</td>
<td>/</td>
</tr>
</table>




<!-- | æ•°å€¼ | å­—ç¬¦ | æ•°å€¼ | å­—ç¬¦ | æ•°å€¼ | å­—ç¬¦ | æ•°å€¼ | å­—ç¬¦ |
| - | - | | - | - | | - | - | | - | - |
| 0 | A | 16 | Q | 32 | g   | 48 | w |
| 1 | B | 17 | R | 33   | h | 49 | x |
| 2 |   C   | 18 | S | 34   | i | 50 | y |
| 3 | D | 19 | T | 35   | j | 51 | z |
| 4 | E | 20 | U | 36   | k | 52 | 0 |
| 5 |F  |21 |V  |37 |l  |53 |1
| 6 |G  |22 |W  |38 |m  |54 |2
| 7 |H  |23 |X  |39 |n  |55 |3
| 8 |I  |24 |Y  |40 |o  |56 |4
| 9 |J  |25 |Z  |41 |p  |57 |5
| 10    |K  |26 |a  |42 |q  |58 |6
| 11    |L  |27 |b  |43 |r  |59 |7
| 12    |M  |28 |c  |44 |s  |60 |8
| 13    |N  |29 |d  |45 |t  |61 |9
| 14    |O  |30 |e  |46 |u  |62 |+
| 15    |P  |31 |f  |47 |v  |63 |/ -->


<h4>5.ä¸€ä¸ªç®€å•çš„ç¼–ç æ–¹æ³•å’Œè¯‘ç æ–¹æ³•å®ç°ï¼š</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">base64Encode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="s1">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">out</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">binStr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">newStr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">threeChar</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">threeChar</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">j</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="nx">t</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span> <span class="o">+</span> <span class="nx">t</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">binStr</span> <span class="o">+=</span> <span class="nx">t</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">k</span> <span class="o">&lt;</span> <span class="mi">24</span><span class="p">;</span> <span class="nx">k</span> <span class="o">+=</span> <span class="mi">6</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">newStr</span> <span class="o">+=</span> <span class="nx">map</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">binStr</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span> <span class="nx">k</span><span class="o">+</span><span class="mi">6</span><span class="p">),</span> <span class="mi">2</span><span class="p">)];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="o">-</span><span class="nx">len</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">newStr</span> <span class="o">=</span> <span class="nx">newStr</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;=&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="o">-</span><span class="nx">len</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">newStr</span> <span class="o">=</span> <span class="nx">newStr</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;==&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">out</span> <span class="o">+=</span> <span class="nx">newStr</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">out</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">base64Decode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="s1">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">ascii</span> <span class="o">=</span> <span class="s1">&#39; !&quot;#$%&amp;\&#39;()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;</span> <span class="o">+</span>
</span><span class='line'>          <span class="s1">&#39;[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">out</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">code</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">fourChar</span> <span class="o">=</span> <span class="nx">code</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span><span class="o">+</span><span class="mi">4</span><span class="p">),</span>
</span><span class='line'>        <span class="nx">binStr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">newStr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">map</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">fourChar</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">j</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">)</span> <span class="nx">t</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span> <span class="o">+</span> <span class="nx">t</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">binStr</span> <span class="o">+=</span> <span class="nx">t</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">k</span> <span class="o">&lt;</span> <span class="mi">24</span><span class="p">;</span> <span class="nx">k</span> <span class="o">+=</span> <span class="mi">8</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="kr">char</span> <span class="o">=</span> <span class="nx">ascii</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">binStr</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span> <span class="nx">k</span><span class="o">+</span><span class="mi">8</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">32</span><span class="p">];</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="kr">char</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">newStr</span> <span class="o">+=</span> <span class="kr">char</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nx">out</span> <span class="o">+=</span> <span class="nx">newStr</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">out</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h3>HTML5 æä¾›çš„é€šç”¨ Base64 æ–¹æ³• API</h3>

<h4>1.ç¼–ç ï¼š <code>window.btoa(stringToEncode)</code></h4>

<p>åªèƒ½å°† ASCII å­—ç¬¦ä¸²æˆ–äºŒè¿›åˆ¶æ•°æ®è½¬æ¢æˆä¸€ä¸ª base64 ç¼–ç è¿‡çš„å­—ç¬¦ä¸²,è¯¥æ–¹æ³•ä¸èƒ½ç›´æ¥ä½œç”¨äº Unicode å­—ç¬¦ä¸²ã€‚</p>

<h4>2.è§£ç ï¼š <code>window.atob(encodedData)</code></h4>

<p>å°†å·²ç»è¢« base64 ç¼–ç è¿‡çš„æ•°æ®è¿›è¡Œè§£ç ã€‚</p>

<h4>3.ä½œç”¨äº UTF-8 ç¼–ç çš„æ–‡å­—</h4>

<p>ä½†æ˜¯è¿™ä¸¤ä¸ª Web API åŠŸèƒ½å¾ˆç®€å•ï¼Œå¹¶ä¸èƒ½ç›´æ¥ä½œç”¨äº Unicode å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å½“è°ƒç”¨ <code>btoa()</code> æ—¶è‹¥ä¼ å…¥çš„ä¸æ˜¯ ASCII æˆ–äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚æ±‰å­—å°±ä¼šå‡ºé”™ã€‚</p>

<p>ä¸‹é¢æ˜¯åˆ«äººæä¾›çš„ç®€å•è§£å†³æ–¹æ³•ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">utf8_to_b64</span><span class="p">(</span> <span class="nx">str</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nx">btoa</span><span class="p">(</span><span class="nx">unescape</span><span class="p">(</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">str</span><span class="p">)));</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">b64_to_utf8</span><span class="p">(</span> <span class="nx">str</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">escape</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">atob</span><span class="p">(</span><span class="nx">str</span><span class="p">)));</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä½œè€…åœ¨è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªå°å°çš„HackæŠ€å·§ã€‚<code>encodeURIComponent()</code> æ˜¯ECMAscriptä¸­Globalå¯¹è±¡çš„URIæ–¹æ³•ï¼Œå¯¹URIè¿›è¡Œç¼–ç ï¼Œå¯ä»¥ä½œç”¨äºæ‰€æœ‰Unicodeå­—ç¬¦ã€‚è€Œ <code>escape()</code> æ˜¯å·²åºŸå¼ƒçš„URIç¼–ç æ–¹æ³•ï¼ŒåŠŸèƒ½å’Œ <code>encodeURIComponent()</code> ç›¸åŒï¼Œä½†æ˜¯åªèƒ½ç¼–ç ASCIIå­—ç¬¦ã€‚</p>

<p>å³ <code>encodeURIComponent(str)</code> ç›¸å½“äº <code>escape(unicodeToASCII(str))</code> ï¼Œåˆ™ <code>unescape(encodeURIComponent(str))</code> ç­‰åŒäº <code>unicodeToASCII(str)</code> ,æ‰€ä»¥å°±å°† Unicode å­—ç¬¦è½¬æ¢æˆäº† ASCII å­—ç¬¦ã€‚( <code>unescape()</code> æ˜¯å’Œ <code>escape()</code> å¯¹åº”çš„è§£ç æ–¹æ³•ï¼‰</p>

<p>å…³äºæ–‡å­—é›†å’Œæ–‡å­—ç¼–ç æ–¹é¢çš„çŸ¥è¯†ï¼Œæ¯”å¦‚ UTF-8 æ˜¯åŸºäº Unicode æ–‡å­—é›†çš„ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„ç¼–ç æ–¹å¼ï¼Œå…·ä½“æ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p>

<h3>Data URLä¸Base64</h3>

<p>è¿™é‡Œä¸»è¦è¯´è¯´ Data URL æ¨¡å¼å’Œ Base64 ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;\n\n\n%c&quot;</span><span class="p">,</span> <span class="s1">&#39;font-size:0;margin-top:20px;line-height:36px;padding-top:50px;padding-left:158px;background:url(&quot;data:image/png;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAyAJ4DASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3+iiigCtfX9vp1sZ7hwqjoO5PoK5afxu/mH7ParszwXPNc94y1sz6/Nbb/wB1a/IF/wBrqTXR+HvCls+nxXWoqZZZlDiPJAQHp+NerDD0aFFVK2rZ5U69avVdOi7JBa+NgXAurXap/ijOcV1Vtcw3kCzwOHjYcEVxnijwzBZae9/YBkEXMkecjHqM+lUvAest/ar6ezZjmQso9GH/ANalVw1KrRdahpbdDpV61KsqVbW56NRRRXlnqBRRVOTVtOhlaKW/tkkU4ZWlUEH6ZoAuUVQ/tvSv+glaf9/l/wAaP7b0r/oJWn/f5f8AGgC/RUMF1b3MXmwTxyxg43owI/On+dF/z1T/AL6FAD6Ko2utaXfSyRWmo2s8kX31jlVivbnBq2JYycCRCT2DUAPopjTRKcNIgI7FhSefD/z1j/76FAElFR+fD/z1j/76FPVlYZVgR6g0AMmmjgiaWVgqKMkmuO1fxrIkEj6YqkoM/vE+8O+DmqfxF1loJrXTVbarKZXHrzgf1qPwh4ei1iye8vdzW7MUSMHG7HXJ9K9COEgsM61XrscDxlT61GlSSdt76+p59qN1/al5LeyuUmmYu5XkE/SvY/CPiG01bRrePz4xdwxqksecHIGMgehrP174f6XdafIdMgFrdopMe1jtYjsQf5145E00krBJHh8s/PIpIK89OO5rzqVXE1akKFR8yb062PqcRh8sqYWri8PHklFXfS/6a7K3U9u8Zarbpo9xp6XCC4uF2HHOxT1OPXHQVwWivaaHex3lusktwgIDSvxzweBWVpkV1q1/DZWiPJK/djnA7lj/AFr1aw8FaTa2qx3EP2mbHzyOSMn2APFfQS9jgqfspNu58NH22Nqe0jpbb+u5X03xzaXEqxXqfZ2bgODlfx9K6tWDKGUgg8gjvXlPjbw+mgPDdWhY2kzFdpOSjdcZ9MfyrovhzrL6hpc9pKxZrVwFJ67T0rjxOFpuj9Yo7HZhsTUVb2Fbc7WvIfGeneCrHxNctq39q/bLj9+/kBSnPp+VevV4x8Q7yPT/AIlWN7NEZY4FikeMYywDZI5rzD0zjteHh3fCNAW82YPmm7xnPbGPxrVtE8AfY4RdnWWudg80xqu0t3xz0rr/APha+g/9C7P/AN8x1heLfHel+IdDaws9HktZTIr+YyoAAO3HNAHaWdlpln8Kb59HNx9juLeWZPPPzgng5x9K8tMOm2ehaddXEN9PcXRcsVm2oqq2MD3r1DS/+SKD/sHyfzauDll05vAWhWd9eS2rmea4jZITICAdv55NAEKweGAMjSPEYJ9HH/xNXvCUmjnxzYRQWGpxssuYzLPkqdp++uOn/wBaro8a6hHEMeJbsIqjBOkDGPrip/BmqaXL47+2y6pdX2pXymMAWnlr0HJ/BewoA6jXfhpYa9rNxqU2oXcckxGUTGBgAentWd/wp3S/+gpff+O/4Vk/FLRo9PuG1ganP9ovZQkdoowMBQCc59h27irWn/Cqa5063nudduoZ5I1d4wmdhIzjrQBc/wCFO6X/ANBS+/8AHf8ACuz8O6FD4c0aLTIJpJo42Zg8mMncSf61xDfCVI1LN4kulUdSY8Af+PV2nhjR00LQobCO8a8VGZhM3U5Yn1PTOKAPPvi1aSw6lYagobyniMRI6Bgcj8wT+VXPhv4stI9OOk3kgieNy0bN0IPJ/XNd9rGkWmuaZLY3ibo3HBHVT2I968h1T4c6zps5MEbXUIOUlhOG/EdQa9vD1KOJwyw9R2a2PHrwq4bEPEU48ye56jrPifT9M02a4FzG7Kp2lTkA9s/4d68HjE+pX0dpYwu7SSHy4x1Zj1J9z+lbsXg7xFqUqxta3bY6G4YhV9/mr0vwf4Kt/DUZuJmWfUJBhpMcIPRf8aqCw+Ai535p9CZzr49qmk4w3f8AWl/Is+EPCsPhrTsNiS+mAM8v/so9hXR0UV4tSpKpNzm9WevTpxpxUIrRGJ4p8Px+JNHNm85gdXEkcgGQGAI5HcYJqn4O8Jx+GLacm6+0zzkFnC4UAdABU3jKPVJNDzpUZmkSQNJEpwXTByB+ODj2rO8AW2tRWt3LqkUlvFI4MMEh5HqfbNdkef6o/f0vsccuT62vc1tudlXjnxAmay+JFjfG1knjt1ikZFX7wDZI6V7HRXAd55h/ws+w/wChXn/Jf/iawvFnjKDxFoh0+20Ga2kMiv5m0Hp24Fe2UUAcPZWlxb/B77NNDIk4sHBjK/Nzkjj8a4Sy1Oxi8H2+i6r4cvLtgXkSZPkaMlj904yOle50UAfPsmn+M5PDoR7fUjpAbiIjkL2+Xrj3xiuv8D6rpen6ha6dZeGb2Ga4bZJez/M3TOSccDjoMda9TooA8a8fX00/j+3M+n3FzY6dsxGgIEnRjzjvwPwrc/4WvL/0LN5/38/+xr0migDyPxF8QZ9c0C801fD95C1wm0SFydvPXG2ux+HFtcWngixjuYXikJdtrgg4LEg8+orq6KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//Z&quot;);background-repeat:no-repeat;&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¿™æ˜¯ä¸€ä¸ªçœŸå®çš„å°ä¾‹å­ï¼Œå¯ä»¥åœ¨ç™¾åº¦ç½‘ç›˜çœ‹åˆ°ï¼Œä¼šåœ¨æ§åˆ¶å°æ‰“å°å‡ºç™¾åº¦äº‘logoã€‚è¿™é‡Œç”¨åˆ°äº† <code>console.log()</code> çš„ä¸€äº›ç¨å¾®é«˜çº§ä¸€ç‚¹çš„ç”¨æ³•ï¼Œæ”¯æŒç±»ä¼¼Cè¯­è¨€ <code>printf()</code> é£æ ¼çš„æ‰“å°æ–¹å¼ï¼Œå ä½ç¬¦ <code>%c</code> å¯ä»¥ä½¿ç”¨ä¸€äº›CSSæ ·å¼è¯­å¥ã€‚æ¯”å¦‚è¿™é‡Œä½¿ç”¨çš„ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">font-size</span><span class="o">:</span> <span class="nt">0</span><span class="o">;</span>
</span><span class='line'><span class="nt">margin-top</span><span class="o">:</span> <span class="nt">20px</span><span class="o">;</span>
</span><span class='line'><span class="nt">line-height</span><span class="o">:</span> <span class="nt">36px</span><span class="o">;</span>
</span><span class='line'><span class="nt">padding-top</span><span class="o">:</span> <span class="nt">50px</span><span class="o">;</span>
</span><span class='line'><span class="nt">padding-left</span><span class="o">:</span> <span class="nt">158px</span><span class="o">;</span>
</span><span class='line'><span class="nt">background</span><span class="o">:</span> <span class="nt">url</span><span class="o">(</span><span class="s2">&quot;data:image/png;base64...&quot;</span><span class="o">);</span>
</span><span class='line'><span class="nt">background-repeat</span><span class="o">:</span> <span class="nt">no-repeat</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>å…³äº <code>console.log()</code> çš„ç”¨æ³•ä»¥åŠ <code>console</code> å¯¹è±¡çš„å…¶ä»–æ–¹æ³•ã€å±æ€§ï¼Œå…·ä½“æ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p>

<p>å›åˆ° urlï¼Œå¯ä»¥çœ‹åˆ°ä¸€é•¿ä¸²æ•°æ®ï¼Œåœ¨å¼€å¤´æ˜¯è¿™æ ·çš„ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">data</span><span class="nd">:image</span><span class="o">/</span><span class="nt">png</span><span class="o">;</span><span class="nt">base64</span><span class="o">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¿™å°±æ˜¯ Data URL Scheme çš„è¯­æ³•æ ¼å¼ï¼Œåé¢æ˜¯ç”¨ Base64 ç¼–ç çš„å›¾ç‰‡æ•°æ®ã€‚</p>

<p>å®Œæ•´çš„å›¾ç‰‡å°±åƒä¸‹é¢è¿™æ ·ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶åˆ°åœ°å€æ æŸ¥çœ‹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">data</span><span class="nd">:image</span><span class="o">/</span><span class="nt">png</span><span class="o">;</span><span class="nt">base64</span><span class="o">,/</span><span class="nt">9j</span><span class="o">/</span><span class="nt">4AAQSkZJRgABAQEAYABgAAD</span><span class="o">/</span><span class="nt">2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL</span><span class="o">/</span><span class="nt">2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL</span><span class="o">/</span><span class="nt">wAARCAAyAJ4DASIAAhEBAxEB</span><span class="o">/</span><span class="nt">8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL</span><span class="o">/</span><span class="nt">8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4</span><span class="o">+</span><span class="nt">Tl5ufo6erx8vP09fb3</span><span class="o">+</span><span class="nt">Pn6</span><span class="o">/</span><span class="nt">8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL</span><span class="o">/</span><span class="nt">8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3</span><span class="o">+</span><span class="nt">Pn6</span><span class="o">/</span><span class="nt">9oADAMBAAIRAxEAPwD3</span><span class="o">+</span><span class="nt">iiigCtfX9vp1sZ7hwqjoO5PoK5afxu</span><span class="o">/</span><span class="nt">mH7ParszwXPNc94y1sz6</span><span class="o">/</span><span class="nt">Nbb</span><span class="o">/</span><span class="nt">wB1a</span><span class="o">/</span><span class="nt">IF</span><span class="o">/</span><span class="nt">wBrqTXR</span><span class="o">+</span><span class="nt">HvCls</span><span class="o">+</span><span class="nt">nxXWoqZZZlDiPJAQHp</span><span class="o">+</span><span class="nt">NerDD0aFFVK2rZ5U69avVdOi7JBa</span><span class="o">+</span><span class="nt">NgXAurXap</span><span class="o">/</span><span class="nt">ijOcV1Vtcw3kCzwOHjYcEVxnijwzBZae9</span><span class="o">/</span><span class="nt">YBkEXMkecjHqM</span><span class="o">+</span><span class="nt">lUvAest</span><span class="o">/</span><span class="nt">ar6ezZjmQso9GH</span><span class="o">/</span><span class="nt">ANalVw1KrRdahpbdDpV61KsqVbW56NRRRXlnqBRRVOTVtOhlaKW</span><span class="o">/</span><span class="nt">tkkU4ZWlUEH6ZoAuUVQ</span><span class="o">/</span><span class="nt">tvSv</span><span class="o">+</span><span class="nt">glaf9</span><span class="o">/</span><span class="nt">l</span><span class="o">/</span><span class="nt">wAaP7b0r</span><span class="o">/</span><span class="nt">oJWn</span><span class="o">/</span><span class="nt">f5f8AGgC</span><span class="o">/</span><span class="nt">RUMF1b3MXmwTxyxg43owI</span><span class="o">/</span><span class="nt">On</span><span class="o">+</span><span class="nt">dF</span><span class="o">/</span><span class="nt">z1T</span><span class="o">/</span><span class="nt">AL6FAD6Ko2utaXfSyRWmo2s8kX31jlVivbnBq2JYycCRCT2DUAPopjTRKcNIgI7FhSefD</span><span class="o">/</span><span class="nt">z1j</span><span class="o">/</span><span class="nt">76FAElFR</span><span class="o">+</span><span class="nt">fD</span><span class="o">/</span><span class="nt">z1j</span><span class="o">/</span><span class="nt">76FPVlYZVgR6g0AMmmjgiaWVgqKMkmuO1fxrIkEj6YqkoM</span><span class="o">/</span><span class="nt">vE</span><span class="o">+</span><span class="nt">8O</span><span class="o">+</span><span class="nt">DmqfxF1loJrXTVbarKZXHrzgf1qPwh4ei1iye8vdzW7MUSMHG7HXJ9K9COEgsM61XrscDxlT61GlSSdt76</span><span class="o">+</span><span class="nt">p59qN1</span><span class="o">/</span><span class="nt">al5LeyuUmmYu5XkE</span><span class="o">/</span><span class="nt">SvY</span><span class="o">/</span><span class="nt">CPiG01bRrePz4xdwxqksecHIGMgehrP174f6XdafIdMgFrdopMe1jtYjsQf5145E00krBJHh8s</span><span class="o">/</span><span class="nt">PIpIK89OO5rzqVXE1akKFR8yb062PqcRh8sqYWri8PHklFXfS</span><span class="o">/</span><span class="nt">6a7K3U9u8Zarbpo9xp6XCC4uF2HHOxT1OPXHQVwWivaaHex3lusktwgIDSvxzweBWVpkV1q1</span><span class="o">/</span><span class="nt">DZWiPJK</span><span class="o">/</span><span class="nt">djnA7lj</span><span class="o">/</span><span class="nt">AFr1aw8FaTa2qx3EP2mbHzyOSMn2APFfQS9jgqfspNu58NH22Nqe0jpbb</span><span class="o">+</span><span class="nt">u5X03xzaXEqxXqfZ2bgODlfx9K6tWDKGUgg8gjvXlPjbw</span><span class="o">+</span><span class="nt">mgPDdWhY2kzFdpOSjdcZ9MfyrovhzrL6hpc9pKxZrVwFJ67T0rjxOFpuj9Yo7HZhsTUVb2Fbc7WvIfGeneCrHxNctq39q</span><span class="o">/</span><span class="nt">bLj9</span><span class="o">+/</span><span class="nt">kBSnPp</span><span class="o">+</span><span class="nt">VevV4x8Q7yPT</span><span class="o">/</span><span class="nt">AIlWN7NEZY4FikeMYywDZI5rzD0zjteHh3fCNAW82YPmm7xnPbGPxrVtE8AfY4RdnWWudg80xqu0t3xz0rr</span><span class="o">/</span><span class="nt">APha</span><span class="o">+</span><span class="nt">g</span><span class="o">/</span><span class="nt">9C7P</span><span class="o">/</span><span class="nt">AN8x1heLfHel</span><span class="o">+</span><span class="nt">IdDaws9HktZTIr</span><span class="o">+</span><span class="nt">YyoAAO3HNAHaWdlpln8Kb59HNx9juLeWZPPPzgng5x9K8tMOm2ehaddXEN9PcXRcsVm2oqq2MD3r1DS</span><span class="o">/+</span><span class="nt">SKD</span><span class="o">/</span><span class="nt">sHyfzauDll05vAWhWd9eS2rmea4jZITICAdv55NAEKweGAMjSPEYJ9HH</span><span class="o">/</span><span class="nt">xNXvCUmjnxzYRQWGpxssuYzLPkqdp</span><span class="o">++</span><span class="nt">uOn</span><span class="o">/</span><span class="nt">wBaro8a6hHEMeJbsIqjBOkDGPrip</span><span class="o">/</span><span class="nt">BmqaXL47</span><span class="o">+</span><span class="nt">2y6pdX2pXymMAWnlr0HJ</span><span class="o">/</span><span class="nt">BewoA6jXfhpYa9rNxqU2oXcckxGUTGBgAentWd</span><span class="o">/</span><span class="nt">wp3S</span><span class="o">/+</span><span class="nt">gpff</span><span class="o">+</span><span class="nt">O</span><span class="o">/</span><span class="nt">4Vk</span><span class="o">/</span><span class="nt">FLRo9PuG1ganP9ovZQkdoowMBQCc59h27irWn</span><span class="o">/</span><span class="nt">Cqa5063nudduoZ5I1d4wmdhIzjrQBc</span><span class="o">/</span><span class="nt">wCFO6X</span><span class="o">/</span><span class="nt">ANBS</span><span class="o">+/</span><span class="nt">8AHf8ACuz8O6FD4c0aLTIJpJo42Zg8mMncSf61xDfCVI1LN4kulUdSY8Af</span><span class="o">+</span><span class="nt">PV2nhjR00LQobCO8a8VGZhM3U5Yn1PTOKAPPvi1aSw6lYagobyniMRI6Bgcj8wT</span><span class="o">+</span><span class="nt">VXPhv4stI9OOk3kgieNy0bN0IPJ</span><span class="o">/</span><span class="nt">XNd9rGkWmuaZLY3ibo3HBHVT2I968h1T4c6zps5MEbXUIOUlhOG</span><span class="o">/</span><span class="nt">EdQa9vD1KOJwyw9R2a2PHrwq4bEPEU48ye56jrPifT9M02a4FzG7Kp2lTkA9s</span><span class="o">/</span><span class="nt">4d68HjE</span><span class="o">+</span><span class="nt">pX0dpYwu7SSHy4x1Zj1J9z</span><span class="o">+</span><span class="nt">lbsXg7xFqUqxta3bY6G4YhV9</span><span class="o">/</span><span class="nt">mr0vwf4Kt</span><span class="o">/</span><span class="nt">DUZuJmWfUJBhpMcIPRf8aqCw</span><span class="o">+</span><span class="nt">Ai535p9CZzr49qmk4w3f8AWl</span><span class="o">/</span><span class="nt">Is</span><span class="o">+</span><span class="nt">EPCsPhrTsNiS</span><span class="o">+</span><span class="nt">mAM8v</span><span class="o">/</span><span class="nt">so9hXR0UV4tSpKpNzm9WevTpxpxUIrRGJ4p8Px</span><span class="o">+</span><span class="nt">JNHNm85gdXEkcgGQGAI5HcYJqn4O8Jx</span><span class="o">+</span><span class="nt">GLacm6</span><span class="o">+</span><span class="nt">0zzkFnC4UAdABU3jKPVJNDzpUZmkSQNJEpwXTByB</span><span class="o">+</span><span class="nt">ODj2rO8AW2tRWt3LqkUlvFI4MMEh5HqfbNdkef6o</span><span class="o">/</span><span class="nt">f0vsccuT62vc1tudlXjnxAmay</span><span class="o">+</span><span class="nt">JFjfG1knjt1ikZFX7wDZI6V7HRXAd55h</span><span class="o">/</span><span class="nt">ws</span><span class="o">+</span><span class="nt">w</span><span class="o">/</span><span class="nt">wChXn</span><span class="o">/</span><span class="nt">Jf</span><span class="o">/</span><span class="nt">iawvFnjKDxFoh0</span><span class="o">+</span><span class="nt">20Ga2kMiv5m0Hp24Fe2UUAcPZWlxb</span><span class="o">/</span><span class="nt">B77NNDIk4sHBjK</span><span class="o">/</span><span class="nt">Nzkjj8a4Sy1Oxi8H2</span><span class="o">+</span><span class="nt">i6r4cvLtgXkSZPkaMlj904yOle50UAfPsmn</span><span class="o">+</span><span class="nt">M5PDoR7fUjpAbiIjkL2</span><span class="o">+</span><span class="nt">Xrj3xiuv8D6rpen6ha6dZeGb2Ga4bZJez</span><span class="o">/</span><span class="nt">M3TOSccDjoMda9TooA8a8fX00</span><span class="o">/</span><span class="nt">j</span><span class="o">+</span><span class="nt">3M</span><span class="o">+</span><span class="nt">n3FzY6dsxGgIEnRjzjvwPwrc</span><span class="o">/</span><span class="nt">4WvL</span><span class="o">/</span><span class="nt">0LN5</span><span class="o">/</span><span class="nt">38</span><span class="o">/+</span><span class="nt">xr0migDyPxF8QZ9c0C801fD95C1wm0SFydvPXG2ux</span><span class="o">+</span><span class="nt">HFtcWngixjuYXikJdtrgg4LEg8</span><span class="o">+</span><span class="nt">orq6KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD</span><span class="o">//</span><span class="nt">Z</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¸è¿‡ï¼ŒFirefox ä¼¼ä¹ä¸æ”¯æŒåœ¨æ§åˆ¶å°ä½¿ç”¨ Data URLï¼Œå¤§æ¦‚æ˜¯ç”±äºè¿™ä¸ªåŸå› ï¼Œæœ‰æ—¶å€™å¯ä»¥é™çº§åœ¨æ§åˆ¶å°ç›´æ¥ä½¿ç”¨ä¸€å¼ å›¾ç‰‡ã€‚</p>

<h5>å‚è€ƒèµ„æ–™ï¼š</h5>

<ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window.btoa">https://developer.mozilla.org/zh-CN/docs/Web/API/Window.btoa</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window.atob">https://developer.mozilla.org/zh-CN/docs/Web/API/Window.atob</a></li>
<li><a href="http://tools.ietf.org/html/rfc2397" title="RFC 2397 of the Internet Engineering Task Force (IETF)">RFC 2397 of the Internet Engineering Task Force (IETF)</a></li>
<li>Javascripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬3ç‰ˆï¼‰[äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾]</li>
<li>JavaåŠ å¯†ä¸è§£å¯†çš„è‰ºæœ¯[æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾]</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[å¯¹ä¸€æ¬¡æ±‚èŒç»å†çš„å™è¿°]]></title>
    <link href="http://blog.mirreal.net/blog/2014/10/14/about-an-interview/"/>
    <updated>2014-10-14T09:42:08+08:00</updated>
    <id>http://blog.mirreal.net/blog/2014/10/14/about-an-interview</id>
    <content type="html"><![CDATA[<p>é¦–å…ˆï¼Œæˆ‘ä¸èƒ½è¯´å‡ºè¿™å®¶å…¬å¸çš„åå­—ï¼Œå› ä¸ºè¿™è¿åäº†ä¿å¯†åè®®ï¼Œå³ä½¿è¿™ä¸ªåšå®¢é™¤äº†æˆ‘æ²¡äººé˜…è¯»ã€‚æˆ‘åªèƒ½è¯´ï¼Œè¿™åªæ˜¯ä¸€å®¶å¾ˆæ£’çš„ä¼ä¸šï¼Œè™½ç„¶æ²¡æœ‰æˆåŠŸï¼Œä½†æ˜¯ä»ç„¶ç»™æˆ‘ç•™ä¸‹äº†ç¾å¥½çš„å°è±¡ã€‚æˆ‘å†™å‡ºæ¥ï¼Œåªæ˜¯è®°å½•è‡ªå·±çš„ä¸€ç‚¹æ„Ÿæ‚Ÿã€‚</p>

<h2>ç¬”è¯•</h2>

<p>è¯¥éƒ¨åˆ†åŒ…æ‹¬å¿…åšé¢˜7é“ï¼Œå¦‚ä¸‹ï¼š</p>

<!-- more -->


<p>1ã€æœ‰6ï¼Œ9ï¼Œ140é¢—ä¸€åŒ…çš„ç³–æœï¼Œæ¯”å¦‚å½“ç”¨æˆ·å›¢è´­8é¢—æ—¶ï¼Œåˆ™å¿…é¡»æ‹†åŒ…ã€‚é—®ï¼šå¿…é¡»æ‹†åŒ…å–çš„æœ€å¤§è®¢å•æ˜¯å¤šå°‘ï¼Ÿ</p>

<p>2ã€ç»™å‡ºä¸€æ£µäºŒå‰æ ‘çš„ååºéå†ï¼Œä¸­åºéå†ã€‚é—®ï¼šç”»å‡ºè¯¥äºŒå‰æ ‘ï¼Œå¹¶å†™å‡ºå‰åºéå†ã€‚</p>

<p>3ã€å†™ä¸€ä¸ªå‡½æ•°å°†äºŒå‰æ ‘å·¦å³å­èŠ‚ç‚¹äº¤æ¢ã€‚</p>

<p>4ã€ç»™ä¸€ä¸ªæ•°ç»„ï¼Œå¯èƒ½æœ‰é‡å¤é¡¹ï¼Œå†™ä¸€ä¸ªç¨‹åºæ±‚å…ƒç´ Xæ‰€åœ¨çš„åŒºé—´ã€‚</p>

<p>5ã€ç»™ä¸€ä¸ªæµ®ç‚¹æ•°æ•°ç»„ï¼Œå†™ä¸€ä¸ªç¨‹åºè¾“å‡ºä»»æ„è¿ç»­å…ƒç´ ä¹˜ç§¯çš„æœ€å¤§å€¼ã€‚</p>

<p>6ã€æ™¯åŒºé—¨ç¥¨5å…ƒï¼ŒæŸå¤©å”®ç¥¨å¤„æ— é›¶é’±ï¼Œæ¥äº†2Nä¸ªæ¸¸å®¢ï¼Œå…¶ä¸­näººæœ‰5å…ƒé’±ï¼Œå…¶ä½™äººåªæœ‰10å…ƒçš„ã€‚é—®ï¼šæ‰€æœ‰äººéƒ½æ— é¡»ä¸ºæ‰¾é›¶è€Œç­‰å¾…çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ</p>

<p>7ã€ç»™ä¸€ä¸ªæ•°ç»„ï¼Œå…¶å€¼è¡¨ç¤ºå°é˜¶çš„é«˜åº¦ï¼Œå†™ä¸€ä¸ªç¨‹åºæ±‚è“„æ°´é‡ã€‚</p>

<p>é€‰ä½œé¢˜ï¼š</p>

<p>å‰ç«¯ï¼šè®¾è®¡ä¸€ä¸ªå¯¹è±¡ï¼Œå®ç°ä¸¤ä¸ªå‡½æ•° <code>getVersion()</code> å’Œ <code>setVersion()</code> ã€‚å¾ˆç®€å•ã€‚</p>

<p>åé¢çš„æ²¡ä»”ç»†çœ‹äº†ï¼Œä¸»è¦æ˜¯å‰é¢çš„7é“é¢˜éƒ½æ²¡æå®šã€‚è®°å¾—æœ‰iOSã€Androidã€è¿ç»´ã€æµ‹è¯•ã€åµŒå…¥å¼çš„ã€‚</p>

<h2>é¢è¯•</h2>

<h3>1st Round</h3>

<p>è¿™ä¸€è½®å¤§æ¦‚å°±æ˜¯éšä¾¿èŠèŠå¤©ï¼Œä¸»è¦æ˜¯é’ˆå¯¹ç®€å†æäº›é—®é¢˜ï¼Œçœ‹çœ‹ç®€å†æœ‰æ²¡æœ‰æ°´åˆ†ã€‚å†™ä¸¤æ®µç¨‹åºï¼Œæˆ‘çš„é¢˜ç›®æœ‰ï¼š</p>

<h4>é“¾è¡¨æ±‚é€†</h4>

<h4>äºŒå‰æœç´¢æ ‘</h4>

<p>ç„¶åï¼Œè¿˜é—®äº†ä¸ªæ•°å­¦æ¦‚ç‡é—®é¢˜ï¼šç”Ÿæ—¥æ‚–è®º</p>

<p>æ€»ç»“ä¸€ä¸‹ï¼šå¤§æ¦‚éƒ½æ˜¯äº›ä»¥å‰éƒ½ä¼šè§è¿‡çš„ä¸œè¥¿ï¼Œè‡³å°‘æˆ‘ç¢°åˆ°çš„éƒ½æ˜¯æ¥è§¦è¿‡çš„ï¼ŒçŸ¥é“çš„ï¼Œä¸ä¼šæœ‰å¤ªéš¾çš„é—®é¢˜ã€‚</p>

<h3>2nd Round</h3>

<h4>å…³äºä½œç”¨åŸŸ</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">test</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">function</span> <span class="nx">b</span><span class="p">()</span> <span class="p">{};</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">test</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>æ‰“å°ç»“æœ:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="mi">1</span>
</span><span class='line'><span class="p">[</span><span class="nb">Function</span><span class="o">:</span><span class="nx">b</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>å…¶å®ï¼Œæ²¡å¤ªæ˜ç™½è¿™é“é¢˜ç›®è€ƒç‚¹ä½•å¤„ï¼Œä¸è¿‡é¢è¯•å®˜çš„æ„æ€ä¼¼ä¹åœ¨ä½œç”¨åŸŸï¼Œå½“æˆ‘åˆšè¯´å‡ºç¬¬ä¸€ä¸ªä¼šæ‰“å°å‡º 1 çš„æ—¶å€™ï¼Œå¥¹è¯´æˆ‘è¿˜æ˜¯å¤ªå¹´è½»ã€‚æˆ‘ç«‹åˆ»ç´§å¼ äº†ï¼Œçœ‹äº†ä¸€éåˆä¸€éï¼Œè¿˜æ˜¯æ²¡æƒ³å‡ºé™·é˜±ç©¶ç«Ÿåœ¨å“ªé‡Œã€‚æˆ‘åªèƒ½æƒ³ï¼Œå¤§æ¦‚æ˜¯çœ‹é”™é¢˜ç›®äº†ï¼Œä½†æˆ‘åæ¥çš„é¢è¯•è¿‡ç¨‹ä¸­åˆç„äº†å‡ æ¬¡ï¼Œç¡®å®šå¥¹å†™çš„å°±æ˜¯ä¸Šé¢é‚£æ®µä»£ç ã€‚</p>

<h4>åŸå‹é“¾</h4>

<p>ç»“æœï¼Œå¿˜äº†è¿™ä¸œè¥¿ã€‚è¡°ï¼</p>

<p>ä»ç„¶æœ‰ä¸¤ä¸ªç®—æ³•é—®é¢˜ï¼š</p>

<ul>
<li><p>1.æ•°ç»„æœ€å¤§çš„Né¡¹</p></li>
<li><p>2.æ•°ç»„å»é™¤é‡å¤é¡¹</p></li>
</ul>


<p>æ¯”ä¸€è½®çš„é¢˜ç›®ä¼šéš¾ä¸€ç‚¹ã€‚å½“ç„¶ï¼Œå¹¶ä¸åï¼Œæœ‰ç§ä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰ã€‚</p>

<h2>2014.10.20æ›´æ–°</h2>

<p>ä¸Šé¢çš„æ–‡ç« æ˜¯14å·ä¸Šåˆä¹ç‚¹å¤šå‘çš„ã€‚æœ¬ä»¥ä¸ºå·²ç»æ²¡æˆäº†ï¼Œç»“æœï¼Œä¸´è¿‘ä¸­åˆæ—¶æ¥åˆ°å·¥ä½œäººå‘˜ä¸‰é¢çš„é€šçŸ¥ï¼Œè®©æˆ‘åˆæƒŠåˆå–œã€‚æœ€åï¼Œç”±äºä»–ä»¬å‡†å¤‡å›äº¬ï¼Œè€Œæˆ‘éœ€è¦ä¸¤ä¸ªé’Ÿå¤´æ‰èƒ½èµ¶è¿‡å»ï¼Œæ‰€ä»¥æ”¹ä¸ºç”µè¯é¢è¯•ã€‚</p>

<p>ç¬¬äºŒå¤©ï¼Œçº¦å¥½3ç‚¹é’Ÿï¼Œä½†æ²¡ç”µè¯ï¼Œæˆ‘æ‰“è¿‡å»é—®äº†ï¼Œåæ¥5ç‚¹é¢è¯•å®˜æ‰“è¿‡æ¥ï¼Œç”±äºå‡†å¤‡å¦å¤–ä¸€å®¶å…¬å¸çš„ç¬”è¯•ï¼Œæ¨è¿Ÿåˆ°ç¬¬äºŒå¤©ã€‚æœ€åï¼Œ16å·ä¸‹åˆè¿›è¡Œçš„ç”µè¯é¢è¯•ã€‚å¦‚ä»Šï¼Œå·²ç»è¿‡å»4å¤©äº†ï¼Œæœ‰ä»¶äº‹å·²ç¡®ä¿¡æ— ç–‘ï¼Œæˆ‘è¢«å©‰æ‹’äº†ï¼Œä»–ä»¬åˆ°åº•æ˜¯æ²¡çœ‹ä¸Šæˆ‘ã€‚</p>

<h3>å›é¡¾ä¸€ä¸‹å®Œæ•´çš„å†ç¨‹ï¼š</h3>

<p>å›é¡¾ä¸€ä¸‹æ­¤æ¬¡åº”è˜ç»å†ï¼Œé¢‡ä¸ºæ›²æŠ˜ï¼Œè®©æˆ‘å°è±¡æ·±åˆ»ã€‚æœ¬æ¥ç¬¬ä¸€å¤©å› ä¸ºå¦å¤–ä¸€åœºé¢è¯•é”™è¿‡ç¬”è¯•ï¼Œå°±åƒé”™è¿‡çš„è®¸å¤šä¼ä¸šä¸€æ ·ï¼Œä»¥ä¸ºå°±è¿™æ ·ç®—äº†å§ã€‚</p>

<p>ç»“æœï¼Œç¬¬äºŒå¤©å®‰æ’äº†ç¬¬äºŒåœºç¬”è¯•ï¼Œäºæ˜¯åƒè¿‡åˆé¥­ï¼Œå°±å‡ºå‘ï¼Œæ­ä¸¤ä¸ªé’Ÿå¤´çš„å…¬è½¦å»å‚åŠ ç¬”è¯•ã€‚ç¬”è¯•é¢˜ç›®æŒºå¯¹æˆ‘çš„èƒƒå£ï¼Œè¿™å¥è¯çš„æ„æ€æ˜¯æ¯”è¾ƒç¬¦åˆæˆ‘å¯¹æŠ€æœ¯å…¬å¸æŒ‘é€‰äººæ‰æ ‡å‡†çš„æœŸæœ›ï¼Œåšä¸åšå¾—å¥½é‚£æ˜¯å¦å¤–ä¸€å›äº‹äº†ã€‚äº‹å®ä¸Šï¼Œç¬”è¯•åå°±æ„Ÿè§‰è‡ªå·±ç™½è·‘äº†ä¸€è¶Ÿã€‚</p>

<p>ä½†æ˜¯ï¼Œç¬¬äºŒå¤©å±…ç„¶æ”¶åˆ°é¢è¯•é€šçŸ¥ï¼ŒæŠ±ç€ä¸€ç§å¾ˆè½»æ¾çš„å¿ƒæ€ï¼Œæ­ä¸¤ä¸ªé’Ÿå¤´çš„å…¬è½¦å»å‚åŠ é¢è¯•ã€‚åœ¨è¿™ä¸ªæ—¶å€™ï¼Œå¯¹é€šè¿‡é¢è¯•å®Œå…¨æ²¡æœ‰æŠ±ä»»ä½•å¸Œæœ›ï¼Œå› ä¸ºè¿™æ‰æˆ‘çš„ç¬¬äºŒæ¬¡ï¼Œæƒ³çš„åªæ˜¯å¢åŠ ç‚¹é¢è¯•ç»éªŒè€Œå·²ï¼Œæ‰€ä»¥çœŸçš„å¾ˆè½»æ¾ï¼Œè€Œä¸”æ²¡äº†ç¬¬ä¸€æ¬¡é¢è¯•æ—¶å€™è¯éƒ½è¯´ä¸æ¸…æ¥šçš„ç¬¨æ‹™ï¼Œç­”ä¸ä¸Šå°±èµ°å‘—ï¼Œæ²¡ä»€ä¹ˆæŸå¤±ã€‚</p>

<p>æ²¡æƒ³åˆ°ï¼Œç¬¬ä¸€è½®é¢è¯•ç«Ÿç„¶æ¯”è¾ƒé¡ºåˆ©ï¼Œå¤§ä¸ºå‡ºä¹æˆ‘çš„æ„æ–™ï¼Œè€Œä¸”ï¼Œåœ¨å¤–é¢å‘†äº†å¥½ä¹…ï¼Œä¹Ÿæ²¡äººè¿‡æ¥è·Ÿæˆ‘è®²ï¼Œä»Šå¤©çš„é¢è¯•å°±åˆ°è¿™é‡Œäº†ã€‚æˆ‘çŸ¥é“ï¼Œå·²ç»è¿‡äº†ï¼Œä¾¿å¼€å§‹æµ®æƒ³è¿ç¯‡ï¼Œè§‰å¾—è‡ªå·±è¿›å…¥è¿™å®¶ä¼ä¸šå¼€å§‹æœ‰ç‚¹å¸Œæœ›äº†ã€‚ç­‰äº†å¥½é•¿ä¸€æ®µæ—¶é—´ï¼Œç»ˆäºå¼€å§‹äº†ç¬¬äºŒè½®é¢è¯•ï¼Œä½†æ˜¯ï¼Œé‚£ä¸ªæ¼‚äº®å§å§è®©æˆ‘è§‰å¾—æ¸ºå°ï¼Œæˆ‘åˆ°åº•è¿˜æ˜¯å¤ªå·®åŠ²ã€‚</p>

<p>é¢è¯•ç»“æŸåéƒ½å¿«å…«ç‚¹ï¼Œç›´è§‰å‘Šè¯‰æˆ‘ï¼Œä¸å¯èƒ½ä¼šé€šè¿‡äº†ï¼Œäºæ˜¯ï¼Œç¦»å¼€é¢è¯•åœ°ç‚¹ï¼Œæ­ä¸¤ä¸ªé’Ÿå¤´çš„å…¬è½¦å›å­¦æ ¡ã€‚è·¯ä¸Šï¼Œå«äº†å¤–å–ï¼Œè¯·å®¤å‹å¸®å¿™å–äº†ï¼Œå›åˆ°å®¿èˆï¼Œåç‚¹åŠäº†ï¼Œç‹¼åè™å’½æ¶ˆç­æ‰æ™šé¤ã€‚</p>

<h3>ä½œä¸ªå°å°çš„æ€»ç»“ï¼š</h3>

<p>æƒ³æƒ³è¿™äº›ç»å†ï¼Œé¢‡å¤šèµ·ä¼ã€‚æˆ‘è‡³ä»Šä¸çŸ¥é“ï¼ŒäºŒé¢åˆ°åº•è¿‡æ²¡ï¼Œä»¥æˆ‘çš„è¡¨ç°åº”è¯¥æ˜¯ä¸ä¼šè¿‡ï¼Œä½†ååå´è®©æˆ‘å‚åŠ ç¬¬ä¸‰è½®ï¼Œç»™äº†æˆ‘ä¸€ç§è¿˜æœ‰å¸Œæœ›çš„é”™è§‰ï¼Œä½†æœ€åä»ç„¶è¿˜æ˜¯å«Œå¼ƒäº†æˆ‘ã€‚</p>

<p>ç”µè¯é¢è¯•ï¼Œå› ä¸ºæ˜¯ç¬¬ä¸€æ¬¡ï¼Œæˆ‘åˆåƒç¬¬ä¸€æ¬¡é¢è¯•ä¸€æ ·ç´§å¼ è¿‡å¤´äº†ï¼Œè¯­æ— ä¼¦æ¬¡ã€‚è‡³å°‘æœ‰å››ä¸ªåœ°æ–¹ï¼Œè¯´å¾—ç¨€é‡Œç³Šæ¶‚çš„ï¼š</p>

<ol>
<li>è‡ªæˆ‘ä»‹ç»</li>
<li>èŒä½çš„è®¤è¯†</li>
<li>ä¸ºä»€ä¹ˆä¸è€ƒç ”</li>
<li>ä¸ºä»€ä¹ˆè¿˜æ²¡æ‹¿åˆ°å…¶ä»–å…¬å¸çš„offer</li>
</ol>


<p>æœ‰ç§è¯´å®Œå°±è§‰å¾—ç³Ÿäº†çš„æ„Ÿè§‰ã€‚</p>

<h4>å¤±è´¥çš„åŸå› </h4>

<ol>
<li>æŠ€æœ¯çŸ¥è¯†ä¸æ‰å®</li>
<li>è¡¨è¾¾å¤ªçƒ‚</li>
<li>å¤§æ¦‚è¿˜æœ‰ç¤¼è²Œçš„é—®é¢˜</li>
</ol>


<p>æœ¬æ¥ï¼Œè¿˜æƒ³å»é—®é—®é‚£ä¸ªæ¼‚äº®å§å§çš„ï¼Œå¯»æ±‚ä¸€äº›å»ºè®®ï¼Œä½†è½¬å¿µä¸€æƒ³ï¼Œè¿˜æ˜¯ç®—äº†ï¼Œå¥¹æœªå¿…ä¼šè®°å¾—æˆ‘ï¼Œé—®ä¸é—®ä¹Ÿä¸ä¼šæœ‰å¤ªå¤§å·®åˆ«ã€‚</p>

<p>å†è§äº†ï¼ŒMTã€‚</p>

<p>ä¸è¿‡ï¼Œå¦‚æœè¶³å¤Ÿç‰›é€¼ï¼Œåˆæ€ä¼šå› æ­¤è€Œè¢«å«Œå¼ƒã€‚æŠ€æœ¯çš„å¤§é—¨ï¼Œæ‰åˆšè¸è¿›ä¸€åªè„šè€Œå·²ï¼Œä¸è¿‡ï¼Œæˆ‘ä¼šåŠªåŠ›åœ°èµ°ä¸‹å»çš„ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[å…³äºå†…å­˜å¯¹é½çš„ä¸€ç‚¹æ³¨è§£]]></title>
    <link href="http://blog.mirreal.net/blog/2014/09/15/memory-alignment/"/>
    <updated>2014-09-15T14:30:23+08:00</updated>
    <id>http://blog.mirreal.net/blog/2014/09/15/memory-alignment</id>
    <content type="html"><![CDATA[<h2>ä¸€ã€å†…å­˜å¯¹é½çš„åŸå› </h2>

<p>å¤§éƒ¨åˆ†çš„å‚è€ƒèµ„æ–™éƒ½æ˜¯å¦‚æ˜¯è¯´çš„ï¼š</p>

<ol>
<li><p>å¹³å°åŸå› (ç§»æ¤åŸå› )ï¼šä¸æ˜¯æ‰€æœ‰çš„ç¡¬ä»¶å¹³å°éƒ½èƒ½è®¿é—®ä»»æ„åœ°å€ä¸Šçš„ä»»æ„æ•°æ®çš„ï¼›æŸäº›ç¡¬ä»¶å¹³å°åªèƒ½åœ¨æŸäº›åœ°å€å¤„å–æŸäº›ç‰¹å®šç±»å‹çš„æ•°æ®ï¼Œå¦åˆ™æŠ›å‡ºç¡¬ä»¶å¼‚å¸¸ã€‚</p></li>
<li><p>æ€§èƒ½åŸå› ï¼šæ•°æ®ç»“æ„(å°¤å…¶æ˜¯æ ˆ)åº”è¯¥å°½å¯èƒ½åœ°åœ¨è‡ªç„¶è¾¹ç•Œä¸Šå¯¹é½ã€‚åŸå› åœ¨äºï¼Œä¸ºäº†è®¿é—®æœªå¯¹é½çš„å†…å­˜ï¼Œå¤„ç†å™¨éœ€è¦ä½œä¸¤æ¬¡å†…å­˜è®¿é—®ï¼›è€Œå¯¹é½çš„å†…å­˜è®¿é—®ä»…éœ€è¦ä¸€æ¬¡è®¿é—®ã€‚</p></li>
</ol>


<h2>äºŒã€å¯¹é½è§„åˆ™</h2>

<h4>æ¯ä¸ªç‰¹å®šå¹³å°ä¸Šçš„ç¼–è¯‘å™¨éƒ½æœ‰è‡ªå·±çš„é»˜è®¤â€œå¯¹é½ç³»æ•°â€(ä¹Ÿå«å¯¹é½æ¨¡æ•°)ã€‚æ¯”å¦‚32ä½ç³»ç»Ÿé»˜è®¤å¯¹é½ç³»æ•°æ˜¯ 4ï¼Œ 64ä½çš„åˆ™å¯ä»¥è¾¾åˆ° 8.</h4>

<!-- more -->


<p>ç¨‹åºå‘˜å¯ä»¥é€šè¿‡é¢„ç¼–è¯‘å‘½ä»¤</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#pragma pack(n)  </span><span class="c1">// n=1,2,4,8,16</span>
</span></code></pre></td></tr></table></div></figure>


<p>æ¥æ”¹å˜è¿™ä¸€ç³»æ•°ï¼Œå…¶ä¸­çš„nå°±æ˜¯æŒ‡å®šçš„â€œå¯¹é½ç³»æ•°â€ã€‚</p>

<p>å¦å¤–ï¼Œå¯ä»¥é€šè¿‡GCCæä¾›çš„ <code>__attribute__</code> æ‰©å±•æœºåˆ¶å–æ¶ˆå¯¹é½ä¼˜åŒ–ã€‚</p>

<h3>è§„åˆ™ï¼š</h3>

<ol>
<li><p>æ•°æ®æˆå‘˜å¯¹é½è§„åˆ™ï¼šç»“æ„(struct)æˆ–è”åˆ(union)çš„æ•°æ®æˆå‘˜ï¼Œç¬¬ä¸€ä¸ªæ•°æ®æˆå‘˜æ”¾åœ¨offsetä¸º0çš„åœ°æ–¹ï¼Œä»¥åæ¯ä¸ªæ•°æ®æˆå‘˜çš„å¯¹é½æŒ‰ç…§ <code>#pragma pack</code> æŒ‡å®šçš„æ•°å€¼å’Œè¿™ä¸ªæ•°æ®æˆå‘˜è‡ªèº«é•¿åº¦ä¸­ï¼Œæ¯”è¾ƒå°çš„é‚£ä¸ªè¿›è¡Œã€‚</p></li>
<li><p>ç»“æ„(æˆ–è”åˆ)çš„æ•´ä½“å¯¹é½è§„åˆ™ï¼šåœ¨æ•°æ®æˆå‘˜å®Œæˆå„è‡ªå¯¹é½ä¹‹åï¼Œç»“æ„(æˆ–è”åˆ)æœ¬èº«ä¹Ÿè¦è¿›è¡Œå¯¹é½ï¼Œå¯¹é½å°†æŒ‰ç…§ <code>#pragma pack</code> æŒ‡å®šçš„æ•°å€¼å’Œç»“æ„(æˆ–è”åˆ)æœ€å¤§æ•°æ®æˆå‘˜é•¿åº¦ä¸­ï¼Œæ¯”è¾ƒå°çš„é‚£ä¸ªè¿›è¡Œã€‚</p></li>
</ol>


<h2>ä¸‰ã€è¯•éªŒ</h2>

<p>ä¸‹é¢é€šè¿‡ä¸€ä¾‹å­çš„è¯´æ˜è¿™ä¸ªè§„åˆ™</p>

<p>ç¼–è¯‘å™¨ï¼šGCC4.6.3, (g++)</p>

<p>æ“ä½œç³»ç»Ÿï¼šUbuntu 12ï¼Œ Windows 7</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="k">struct</span> <span class="n">test</span> <span class="p">{</span>
</span><span class='line'>  <span class="kt">short</span> <span class="n">a</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">double</span> <span class="n">b</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">c</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">char</span> <span class="n">d</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨GCCä¸­ï¼Œå„ç±»å‹çš„å¤§å°å¦‚ä¸‹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'><span class="k">sizeof</span><span class="p">(</span><span class="kt">short</span><span class="p">)</span> <span class="o">=</span> <span class="mi">2</span>
</span><span class='line'><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">=</span> <span class="mi">4</span>
</span><span class='line'><span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span> <span class="o">=</span> <span class="mi">4</span>
</span><span class='line'><span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="o">=</span> <span class="mi">8</span>
</span><span class='line'><span class="k">sizeof</span><span class="p">(</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span> <span class="o">=</span> <span class="mi">8</span>
</span></code></pre></td></tr></table></div></figure>


<h4>æ³¨è§£ï¼šåœ¨32ä½ç³»ç»Ÿï¼Œn=4</h4>

<p>ç›¸å½“äºï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#pragma pack(4)</span>
</span><span class='line'><span class="k">struct</span> <span class="n">test</span> <span class="p">{</span>
</span><span class='line'>  <span class="kt">short</span> <span class="n">a</span><span class="p">;</span> <span class="c1">// æŒ‰2å­—èŠ‚å¯¹é½ï¼Œå­˜æ”¾åŒºé—´ï¼š0-1</span>
</span><span class='line'>  <span class="kt">double</span> <span class="n">b</span><span class="p">;</span> <span class="c1">// æŒ‰4å­—èŠ‚å¯¹é½ï¼Œå­˜æ”¾åŒºé—´ï¼š4-11</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">c</span><span class="p">;</span> <span class="c1">// æŒ‰4å­—èŠ‚å¯¹é½ï¼Œå­˜æ”¾åŒºé—´ï¼š12-15</span>
</span><span class='line'>  <span class="kt">char</span> <span class="n">d</span><span class="p">;</span> <span class="c1">// æŒ‰1å­—èŠ‚å¯¹é½ï¼Œå­˜æ”¾åŒºé—´ï¼š16</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'><span class="cp">#pragma pack()</span>
</span></code></pre></td></tr></table></div></figure>


<p>æœ€åæ•´ä½“å¯¹é½ï¼ŒæŒ‰4åœ†æ•´ï¼Œæ•…ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="k">sizeof</span><span class="p">(</span><span class="n">test</span><span class="p">)</span> <span class="o">=</span> <span class="mi">20</span>
</span></code></pre></td></tr></table></div></figure>


<h4>æ³¨è§£ï¼šåœ¨64ä½ç³»ç»Ÿï¼Œé»˜è®¤çš„å¯¹é½ç³»æ•°ä¸º8</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="k">struct</span> <span class="n">test</span> <span class="p">{</span>
</span><span class='line'>  <span class="kt">short</span> <span class="n">a</span><span class="p">;</span> <span class="c1">// æŒ‰2å­—èŠ‚å¯¹é½ï¼Œå­˜æ”¾åŒºé—´ï¼š0-1</span>
</span><span class='line'>  <span class="kt">double</span> <span class="n">b</span><span class="p">;</span> <span class="c1">// æŒ‰8å­—èŠ‚å¯¹é½ï¼Œå­˜æ”¾åŒºé—´ï¼š8-15</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">c</span><span class="p">;</span> <span class="c1">// æŒ‰4å­—èŠ‚å¯¹é½ï¼Œå­˜æ”¾åŒºé—´ï¼š16-19</span>
</span><span class='line'>  <span class="kt">char</span> <span class="n">d</span><span class="p">;</span> <span class="c1">// æŒ‰1å­—èŠ‚å¯¹é½ï¼Œå­˜æ”¾åŒºé—´ï¼š20</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>æœ€åæ•´ä½“å¯¹é½ï¼ŒæŒ‰8åœ†æ•´ï¼Œæ•…ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="k">sizeof</span><span class="p">(</span><span class="n">test</span><span class="p">)</span> <span class="o">=</span> <span class="mi">24</span>
</span></code></pre></td></tr></table></div></figure>


<h4>æ³¨è§£ï¼šC++å…è®¸åœ¨ç»“æ„ä½“ä¸­å®šä¹‰staticå˜é‡ï¼Œé™æ€å˜é‡åˆ†é…åœ¨åŒä¸€çš„é™æ€å­˜å‚¨åŒºï¼Œä¸åŒ…å«åœ¨ç»“æ„ä½“å¤§å°ä¸­ã€‚</h4>

<p>å¦‚ä¸‹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#pragma pack(4)</span>
</span><span class='line'><span class="k">struct</span> <span class="n">test</span> <span class="p">{</span>
</span><span class='line'>  <span class="kt">short</span> <span class="n">a</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">double</span> <span class="n">b</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">c</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">char</span> <span class="n">d</span><span class="p">;</span>
</span><span class='line'>  <span class="k">static</span> <span class="kt">int</span> <span class="n">d</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'><span class="cp">#pragma pack()</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¯¥ç»“æ„ä½“çš„å¤§å°ä»ä¸º 20.</p>

<p>åœ¨æ ‡å‡†Cï¼Œä¼¼ä¹å¹¶æ²¡æœ‰è¿™ç§ç”¨æ³•ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress + Github Pages]]></title>
    <link href="http://blog.mirreal.net/blog/2014/09/01/octopress-plus-github-pages/"/>
    <updated>2014-09-01T15:04:01+08:00</updated>
    <id>http://blog.mirreal.net/blog/2014/09/01/octopress-plus-github-pages</id>
    <content type="html"><![CDATA[<h2>Octopress + Github Pages = a new blog</h2>

<p><a href="http://octopress.org/docs/setup">document</a></p>

<p>Enviroment: Ubuntu 12.00</p>

<h3>1.Installing Ruby With RVM</h3>

<p>é¦–å…ˆï¼Œç”±äº <code>octopress</code> ä½¿ç”¨ <code>ruby</code>ï¼Œç‰ˆæœ¬è¦é«˜äº <code>1.9.3</code>ï¼Œç³»ç»Ÿè‡ªå¸¦çš„ç‰ˆæœ¬å¯èƒ½å¹¶ä¸æ»¡è¶³ï¼Œåœ¨è¿™é‡Œé€šè¿‡ <code>RVM</code> æ¥å®‰è£…é«˜ç‰ˆæœ¬çš„ <code>ruby</code>ã€‚</p>

<p>å¦‚æœç³»ç»Ÿå·²ç»æœ‰äº†åˆé€‚çš„ <code>ruby</code> ç‰ˆæœ¬ï¼Œè¿™ä¸€æ­¥å¯ä»¥è·³è¿‡ã€‚</p>

<p>æ¥ä¸‹æ¥è¯¦ç»†è¯´æ˜ã€‚</p>

<h4>Install RVM</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>curl -L https://get.rvm.io <span class="p">|</span> bash -s stable --ruby
</span></code></pre></td></tr></table></div></figure>




<!-- more -->


<p>Then run:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">source</span> ~/.rvm/scripts/rvm
</span></code></pre></td></tr></table></div></figure>


<p>to start RVM</p>

<h4>Install Ruby 1.9.3</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>rvm install 1.9.3
</span><span class='line'>rvm use 1.9.3
</span><span class='line'>rvm rubygems latest
</span></code></pre></td></tr></table></div></figure>


<h3>2.Octopress Setup</h3>

<h4>Get octopress</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'><span class="nb">cd </span>octopress
</span></code></pre></td></tr></table></div></figure>


<h4>Install dependencies.</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install bundler
</span><span class='line'>bundle install
</span></code></pre></td></tr></table></div></figure>


<p>å¦‚æœ <code>gem</code> å¤ªæ…¢ï¼Œå¯ä»¥å°†æºè®¾ç½®æˆå›½å†…æ·˜å®çš„ï¼Œç›´æ¥ä¿®æ”¹å½“å‰çš„ <code>Gemfile</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">source</span> <span class="s2">&quot;https://ruby.taobao.org&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Install the default Octopress theme.</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>rake install
</span></code></pre></td></tr></table></div></figure>


<h3>3.Deploying to Github Pages</h3>

<p>ä¸‹é¢æˆ‘ä»¬å°±æŠŠé™æ€æ–‡ä»¶å‘åˆ° <code>github</code> ä¸Š</p>

<h4>With Github User/Organization pages</h4>

<p>Create a new Github repository and name the repository with the format <code>username.github.io</code></p>

<p>åœ¨ <code>github</code> ä¸Šæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œåå­—æ ¼å¼å¿…é¡»æ˜¯ <code>username.github.io</code>ï¼Œæ¯”å¦‚ <code>mirreal.github.io</code>ï¼Œå¦‚æœè¦ç›´æ¥é€šè¿‡ <code>https://mirreal.github.io</code> è®¿é—®çš„è¯ã€‚</p>

<p>å¦å¤–ä¸€ç§é€šè¿‡è·¯å¾„çš„æ–¹å¼ï¼Œå…·ä½“å‚è€ƒ <code>github pages</code> æ–‡æ¡£ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>rake setup_github_pages
</span></code></pre></td></tr></table></div></figure>


<p>Next run:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>rake generate
</span><span class='line'>rake deploy
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
</feed>
