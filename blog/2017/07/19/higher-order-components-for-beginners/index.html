<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!-- Consider adding an manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Use the .htaccess and remove these lines to avoid edge case issues.
       More info: h5bp.com/b/378 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>é¢å‘åˆå­¦è€…çš„é«˜é˜¶ç»„ä»¶ä»‹ç» |  Patrick Ran</title>
  <meta name="author" content="Patrick Ran">
  

  
  <!-- Mobile viewport optimized: j.mp/bplateviewport -->
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->

  <!-- CSS: implied media=all -->
  <!-- CSS concatenated and minified via ant build script-->
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
  <!-- end CSS-->

  <!-- More ideas for your <head> here: h5bp.com/d/head-Tips &#8211;>

  <!-- All JavaScript at the bottom, except for Modernizr / Respond.
       Modernizr enables HTML5 elements & feature detects; Respond is a polyfill for min/max-width CSS3 Media Queries
       For optimal performance, use a custom Modernizr build: www.modernizr.com/download/ -->
  <script src="/javascripts/libs/modernizr-2.0.6.min.js"></script>
</head>

<body id="post">

  <div id="container">
    <nav role="navigation" ><ul class="main-navigation">
  <li style='float:left;margin-right:5px'><a class='nav' href="http://mirreal.net/">HOME</a></li>
  <li style="float:left;margin-right:7px"><a class="nav" href="/">BLOG</a></li>
  <li style='float:left;margin-right:7px'><a class='nav' href="/archives">ARCHIVES</a></li>
  <li style="float:left;margin-right:7px"><a class="nav" href="/note">NOTE</a></li>
  <li style="float:left;margin-right:7px"><a class="nav" href="/weekly">WEEKLY</a></li>
  <li style="float:left;margin-right:7px"><a class="nav" href="/project">PROJECT</a></li>
  <li style="float:left;margin-right:7px"><a class="nav" href="/about">ABOUT</a></li>
</ul>
<br><br>
</nav>
    <article>


  <div class="header-line">
    <h1 class="article-title">é¢å‘åˆå­¦è€…çš„é«˜é˜¶ç»„ä»¶ä»‹ç»</h1>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Patrick Ran</span></span>

      




<time class='entry-date' datetime='2017-07-19T18:59:37+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>6:59 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/translator/'>translator</a>
  
</span>


    </p>
  </div>

  <div class="article-content"><blockquote><p>ä½œè€…ï¼šBrandon Newton</p>

<p>åŸæ–‡ï¼š<a href="https://btnwtn.com/articles/higher-order-components-for-beginners">Higher-Order Components (HOCs) for Beginners</a></p>

<p>è°ˆç‚¹ï¼šä¸€ç¯‡é¢å‘åˆå­¦è€…çš„ HOC ä»‹ç»ã€‚é«˜é˜¶ç»„ä»¶å¬èµ·æ¥æŒºå”¬äººçš„ï¼Œåªçœ‹åå­—ææ€•ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“æ˜ç™½ç©¶ç«Ÿæ˜¯ä½•ç‰©ï¼Œè€Œä¸”é€šå¸¸æ¥è®²é«˜é˜¶ç»„ä»¶å¹¶ä¸æ˜¯ç»„ä»¶ï¼Œè€Œæ˜¯æ¥å—ç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”è¿”å›ç»„ä»¶çš„å‡½æ•°ã€‚æ—©æœŸåˆ©ç”¨ ES5 çš„ mixin è¯­æ³•æ¥åšçš„äº‹ï¼ŒåŸºæœ¬éƒ½å¯ä»¥ä½¿ç”¨é«˜é˜¶ç»„ä»¶ä»£æ›¿ï¼Œè€Œä¸”èƒ½åšçš„è¿˜æœ‰æ›´å¤šã€‚</p></blockquote>

<h2>å‰è¨€</h2>

<p>å†™è¿™ç¯‡æ–‡ç« çš„èµ·å› æ˜¯å…¶ä»–å…³äºé«˜é˜¶ç»„ä»¶ï¼ˆHigher-Order Componentsï¼‰çš„æ–‡ç« ï¼ŒåŒ…å«å®˜æ–¹æ–‡æ¡£ï¼Œéƒ½ä»¤åˆå­¦è€…æ„Ÿåˆ°ç›¸å½“å›°æƒ‘ã€‚æˆ‘çŸ¥é“æœ‰é«˜é˜¶ç»„ä»¶è¿™æ ·ä¸€ä¸ªä¸œè¥¿ï¼Œä½†ä¸çŸ¥é“å®ƒåˆ°åº•æœ‰ä»€ä¹ˆç”¨ã€‚æ‰€ä»¥ï¼Œæƒ³é€šè¿‡ä¸€ç¯‡æ–‡ç« æ¥å¯¹é«˜é˜¶ç»„ä»¶æœ‰ä¸€ä¸ªæ›´å¥½çš„ç†è§£ã€‚</p>

<p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ¥è®²ä¸€ä¸‹ JavaScript ä¸­çš„å‡½æ•°ã€‚</p>

<h2>ES6 ç®­å¤´å‡½æ•°ç®€ä»‹</h2>

<p>æ¥ä¸‹æ¥å°†æä¾›ä¸€äº›ç®­å¤´å‡½æ•°çš„ç®€å•ç¤ºä¾‹ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œå¯ä»¥è®¤ä¸ºå®ƒä»¬ä¸æ™®é€šå‡½æ•°åŸºæœ¬ä¸€è‡´ã€‚ä¸‹é¢çš„ä»£ç ä¼šå±•ç¤ºç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="mi">42</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// same as:</span>
</span><span class='line'><span class="p">()</span> <span class="o">=&gt;</span> <span class="mi">42</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// same as:</span>
</span><span class='line'><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="mi">42</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">person</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// same as:</span>
</span><span class='line'><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">name</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>é˜…è¯» <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">MDN çš„ç®­å¤´å‡½æ•°æ–‡æ¡£</a> äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p>

<h2>ä½œä¸ºå€¼çš„å‡½æ•°ä¸éƒ¨åˆ†è°ƒç”¨</h2>

<p>å°±åƒæ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ ä¸€æ ·ï¼Œå‡½æ•°ä¹Ÿæ˜¯å€¼ï¼Œæ„å‘³ç€å¯ä»¥åƒä¼ é€’å…¶ä»–æ•°æ®ä¸€æ ·ä¼ é€’å‡½æ•°ï¼Œå¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">execute</span> <span class="o">=</span> <span class="p">(</span><span class="nx">someFunction</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">someFunction</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="nx">execute</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Executed&#39;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¹Ÿå¯ä»¥åœ¨åœ¨å‡½æ•°ä¸­è¿”å›ä¸€ä¸ªå‡½æ•°ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">getOne</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="nx">getOne</span><span class="p">()()</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¹‹æ‰€ä»¥åœ¨ <code>getOne</code> åé¢æœ‰ä¸¤ä¸ª <code>()</code> ï¼Œæ˜¯å› ä¸ºç¬¬ä¸€ä¸ªè¿”å›çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å¦‚ä¸‹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">getOne</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="nx">getOne</span>
</span><span class='line'><span class="c1">//=&gt; () =&gt; () =&gt; 1</span>
</span><span class='line'>
</span><span class='line'><span class="nx">getOne</span><span class="p">()</span>
</span><span class='line'><span class="c1">//=&gt; () =&gt; 1</span>
</span><span class='line'>
</span><span class='line'><span class="nx">getOne</span><span class="p">()()</span>
</span><span class='line'><span class="c1">//=&gt; 1</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä»å‡½æ•°è¿”å›å‡½æ•°å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿½è¸ªåˆå§‹è¾“å…¥å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‡½æ•°æ¥å—ä¸€ä¸ªæ•°å­—ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå°†è¯¥å‚æ•°ä¹˜ä»¥æ–°å‚æ•°çš„å‡½æ•°ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">multiply</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">y</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiply</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">20</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¿™ä¸ªç¤ºä¾‹è·Ÿä¸Šè¿° <code>getOne</code> ä¸€æ ·ï¼Œåœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œè®© x = 5ï¼Œy = 20ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">multiply</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">y</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiply</span>
</span><span class='line'><span class="c1">//=&gt; (x) =&gt; (y) =&gt; x * y</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiply</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; (y) =&gt; 5 * y</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiply</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">20</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; 5 * 20</span>
</span></code></pre></td></tr></table></div></figure>


<p>åœ¨åªä¼ å…¥ä¸€ä¸ªå‚æ•°è°ƒç”¨ <code>multiply</code> å‡½æ•°æ—¶ï¼Œå³éƒ¨åˆ†è°ƒç”¨è¯¥å‡½æ•°ã€‚æ¯”å¦‚ï¼Œ<code>multiply(5)</code> è®²å¾—åˆ°ä¸€ä¸ªå°†å…¶è¾“å…¥å€¼ä¹˜ä»¥ 5 çš„å‡½æ•°ï¼Œ<code>multiply(7)</code> å°†å¾—åˆ°ä¸€ä¸ªå°†å…¶è¾“å…¥å€¼ä¹˜ä»¥ 7 çš„å‡½æ•°ã€‚ä¾æ­¤ç±»æ¨ã€‚é€šè¿‡éƒ¨åˆ†è°ƒç”¨å¯ä»¥åˆ›å»ºä¸€ä¸ªé¢„å®šä¹‰åŠŸèƒ½çš„æ–°å‡½æ•°ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">multiply</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">y</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">multiplyByFive</span> <span class="o">=</span> <span class="nx">multiply</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">multiplyBy100</span> <span class="o">=</span> <span class="nx">multiply</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiplyByFive</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; 100</span>
</span><span class='line'><span class="nx">multiply</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">20</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; 100</span>
</span><span class='line'>
</span><span class='line'><span class="nx">multiplyBy100</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; 500</span>
</span><span class='line'><span class="nx">multiply</span><span class="p">(</span><span class="mi">100</span><span class="p">)(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; 500</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¸€å¼€å§‹çœ‹èµ·æ¥ä¼¼ä¹æ²¡ä»€ä¹ˆç”¨ï¼Œä½†æ˜¯ï¼Œé€šè¿‡éƒ¨åˆ†è°ƒç”¨è¿™ç§æ–¹å¼å¯ä»¥ç¼–å†™å¯è¯»æ€§æ›´é«˜ï¼Œæ›´æ˜“äºç†è§£çš„ä»£ç ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¯ä»¥ç”¨ä¸€ç§æ›´æ¸…æ™°çš„æ–¹å¼æ¥ä»£æ›¿ <a href="https://www.styled-components.com/docs/basics#adapting-based-on-props">style-components</a> çš„å‡½æ•°æ’å…¥è¯­æ³•ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// before</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="nx">styled</span><span class="p">.</span><span class="nx">button</span><span class="err">`</span>
</span><span class='line'>  <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{({</span> <span class="nx">theme</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">bgColor</span><span class="p">}</span>
</span><span class='line'>  <span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{({</span> <span class="nx">theme</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">textColor</span><span class="p">}</span>
</span><span class='line'><span class="err">`</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">theme</span><span class="o">=</span><span class="p">{</span><span class="nx">themes</span><span class="p">.</span><span class="nx">primary</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
</span><span class='line'><span class="c1">// after</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">fromTheme</span> <span class="o">=</span> <span class="p">(</span><span class="nx">prop</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="nx">theme</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">theme</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="nx">styled</span><span class="p">.</span><span class="nx">button</span><span class="err">`</span>
</span><span class='line'>  <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">fromTheme</span><span class="p">(</span><span class="s2">&quot;bgColor&quot;</span><span class="p">)}</span>
</span><span class='line'>  <span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">fromTheme</span><span class="p">(</span><span class="s2">&quot;textColor&quot;</span><span class="p">)}</span>
</span><span class='line'><span class="err">`</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">theme</span><span class="o">=</span><span class="p">{</span><span class="nx">themes</span><span class="p">.</span><span class="nx">primary</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°çš„å‡½æ•° <code>fromTheme("textColor")</code>ï¼šå®ƒè¿”å›ä¸€ä¸ªæ¥å—å…·æœ‰ <code>theme</code> å±æ€§çš„å¯¹è±¡çš„å‡½æ•°ï¼š<code>({ theme }) =&gt; theme[prop]</code>ï¼Œç„¶åå†é€šè¿‡åˆå§‹ä¼ å…¥çš„å­—ç¬¦ä¸² <code>"textColor"</code> è¿›è¡ŒæŸ¥æ‰¾ã€‚æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¤šï¼Œå†™ç±»ä¼¼çš„ <code>backgroundColor</code> å’Œ <code>textColor</code> è¿™ç§éƒ¨åˆ†è°ƒç”¨ <code>fromTheme</code> çš„å‡½æ•°ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">fromTheme</span> <span class="o">=</span> <span class="p">(</span><span class="nx">prop</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="nx">theme</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">theme</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">fromTheme</span><span class="p">(</span><span class="s2">&quot;bgColor&quot;</span><span class="p">)</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">textColor</span> <span class="o">=</span> <span class="nx">fromTheme</span><span class="p">(</span><span class="s2">&quot;textColor&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="nx">styled</span><span class="p">.</span><span class="nx">button</span><span class="err">`</span>
</span><span class='line'>  <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">backgroundColor</span><span class="p">}</span>
</span><span class='line'>  <span class="nx">color</span><span class="o">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">textColor</span><span class="p">}</span>
</span><span class='line'><span class="err">`</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">theme</span><span class="o">=</span><span class="p">{</span><span class="nx">themes</span><span class="p">.</span><span class="nx">primary</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>é«˜é˜¶å‡½æ•°</h2>

<p>é«˜é˜¶å‡½æ•°çš„å®šä¹‰æ˜¯ï¼Œæ¥å—å‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ã€‚å¦‚æœæ›¾ç»ä½¿ç”¨è¿‡ç±»ä¼¼ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">map</a> è¿™æ ·çš„å‡½æ•°ï¼Œå¯èƒ½å·²ç»å¾ˆç†Ÿæ‚‰é«˜é˜¶å‡½æ•°ã€‚å¦‚æœä¸ç†Ÿæ‚‰ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">map</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„éå†çš„æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°åº”ç”¨åˆ°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åƒè¿™æ ·å¯¹ä¸€ä¸ªæ•°ç»„ä½œå¹³æ–¹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">square</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span>
</span><span class='line'>
</span><span class='line'><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">square</span><span class="p">)</span>
</span><span class='line'><span class="c1">//=&gt; [ 1, 4, 9 ]</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¯ä»¥å®ç°ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„ <code>map</code> ç‰ˆæœ¬æ¥è¯´æ˜è¿™ä¸ªæ¦‚å¿µï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">map</span> <span class="o">=</span> <span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">array</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="kr">const</span> <span class="nx">mappedArray</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">mappedArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
</span><span class='line'>      <span class="c1">// apply fn with the current element of the array</span>
</span><span class='line'>      <span class="nx">fn</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
</span><span class='line'>    <span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nx">mappedArray</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç„¶åå†ä½¿ç”¨æˆ‘ä»¬çš„ map ç‰ˆæœ¬æ¥å¯¹ä¸€ä¸ªæ•°ç»„ä½œå¹³æ–¹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">square</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span>
</span><span class='line'>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">map</span><span class="p">(</span><span class="nx">square</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
</span><span class='line'><span class="c1">//=&gt; [ 1, 4, 9, 16, 25 ]</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>è¯‘è€…æ³¨ï¼šæˆ‘ä»¬ä¹Ÿå¯ä»¥å°† map æ–¹æ³•ä»å¯¹è±¡ä¸­è§£è€¦å‡ºæ¥ï¼š</p>

<pre><code class="javascript">const map = (fn, array) =&gt; Array.prototype.map.call(array, fn)
</code></pre>

<p>è¿™æ ·ä¹Ÿå¯ä»¥åƒä¸Šè¿°ä¾‹å­ä¸€æ ·è°ƒç”¨ã€‚
æˆ–è€…æ›´å‡½æ•°å¼çš„åšæ³•ï¼Œå†æ¥ç‚¹æŸ¯é‡ŒåŒ–ï¼š</p>

<pre><code class="javascript">const map = array =&gt; fn =&gt; Array.prototype.map.call(array, fn)
</code></pre></blockquote>

<p>æˆ–è€…æ˜¯è¿”å›ä¸€ä¸ª <code>&lt;li&gt;</code>çš„ React å…ƒç´ æ•°ç»„ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">HeroList</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">heroes</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="p">{</span><span class="nx">map</span><span class="p">((</span><span class="nx">hero</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">hero</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">hero</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/li&gt;</span>
</span><span class='line'>    <span class="p">),</span> <span class="nx">heroes</span><span class="p">)}</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/ul&gt;</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">HeroList</span> <span class="nx">heroes</span><span class="o">=</span><span class="p">[</span>
</span><span class='line'>  <span class="s2">&quot;Wonder Woman&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Black Widow&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Spider Man&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Storm&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Deadpool&quot;</span>
</span><span class='line'><span class="p">]</span><span class="o">/&gt;</span>
</span><span class='line'><span class="cm">/*=&gt; (</span>
</span><span class='line'><span class="cm">  &lt;ul&gt;</span>
</span><span class='line'><span class="cm">    &lt;li&gt;Wonder Woman&lt;/li&gt;</span>
</span><span class='line'><span class="cm">    &lt;li&gt;Black Widow&lt;/li&gt;</span>
</span><span class='line'><span class="cm">    &lt;li&gt;Spider Man&lt;/li&gt;</span>
</span><span class='line'><span class="cm">    &lt;li&gt;Storm&lt;/li&gt;</span>
</span><span class='line'><span class="cm">    &lt;li&gt;Deadpool&lt;/li&gt;</span>
</span><span class='line'><span class="cm">  &lt;/ul&gt;</span>
</span><span class='line'><span class="cm">)*/</span>
</span></code></pre></td></tr></table></div></figure>


<h2>é«˜é˜¶ç»„ä»¶</h2>

<p>æˆ‘ä»¬çŸ¥é“ï¼Œé«˜é˜¶å‡½æ•°æ˜¯æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ã€‚åœ¨ React ä¸­ï¼Œä»»ä½•è¿”å› <a href="https://facebook.github.io/react/docs/jsx-in-depth.html">JSX</a> çš„å‡½æ•°éƒ½è¢«ç§°ä¸ºæ— çŠ¶æ€å‡½æ•°ç»„ä»¶ï¼Œç®€ç§°ä¸ºå‡½æ•°ç»„ä»¶ã€‚åŸºæœ¬çš„å‡½æ•°ç»„ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">Title</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">Title</span><span class="o">&gt;</span><span class="nx">Higher</span><span class="o">-</span><span class="nx">Order</span> <span class="nx">Components</span><span class="p">(</span><span class="nx">HOCs</span><span class="p">)</span> <span class="k">for</span> <span class="nx">React</span> <span class="nx">Newbies</span><span class="o">&lt;</span><span class="err">/Title&gt;</span>
</span><span class='line'><span class="c1">//=&gt; &lt;h1&gt;Higher-Order Components(HOCs) for React Newbies&lt;/h1&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>é«˜é˜¶ç»„ä»¶åˆ™æ˜¯<em>æ¥å—ç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›ç»„ä»¶çš„å‡½æ•°</em>ã€‚å¦‚ä½•ä½¿ç”¨ä¼ å…¥ç»„ä»¶å®Œå…¨å–å†³äºä½ ï¼Œç”šè‡³å¯ä»¥å®Œå…¨å¿½è§†å®ƒï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Technically an HOC</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">ignore</span> <span class="o">=</span> <span class="p">(</span><span class="nx">anything</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;:</span><span class="p">)</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">IgnoreHeroList</span> <span class="o">=</span> <span class="nx">ignore</span><span class="p">(</span><span class="nx">HeroList</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">IgnoreHeroList</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="c1">//=&gt; &lt;h1&gt;:)&lt;/h1&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¯ä»¥ç¼–å†™ä¸€ä¸ªå°†è¾“å…¥è½¬æ¢æˆå¤§å†™çš„ HOCï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">yell</span> <span class="o">=</span> <span class="p">(</span><span class="nx">PassedComponent</span><span class="p">)</span> <span class="o">=&gt;</span>
</span><span class='line'>  <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="nx">PassedComponent</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="p">{</span><span class="nx">children</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()}</span><span class="o">!</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="err">/PassedComponent&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">Title</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">AngryTitle</span> <span class="o">=</span> <span class="nx">yell</span><span class="p">(</span><span class="nx">Title</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">AngryTitle</span><span class="o">&gt;</span><span class="nx">Whatever</span><span class="o">&lt;</span><span class="err">/AngryTitle&gt;</span>
</span><span class='line'><span class="c1">//=&gt; &lt;h1&gt;WHATEVER!&lt;/h1&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä½ ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªæœ‰çŠ¶æ€ç»„ä»¶ï¼Œå› ä¸º JavaScript ä¸­çš„ç±»ä¸è¿‡æ˜¯å‡½æ•°çš„è¯­æ³•ç³–ã€‚è¿™æ ·å°±å¯ä»¥ä½¿ç”¨åˆ° React ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ï¼Œæ¯”å¦‚ <code>componentDidMount</code>ã€‚è¿™æ˜¯ HOCs çœŸæ­£æœ‰ç”¨çš„åœ°æ–¹ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥åšä¸€äº›ç¨å¾®æœ‰è¶£ç‚¹çš„äº‹ï¼Œæ¯”å¦‚å°† HTTP è¯·æ±‚çš„ç»“æœä¼ é€’ç»™å‡½æ•°ç»„ä»¶ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">const</span> <span class="nx">withGists</span> <span class="o">=</span> <span class="p">(</span><span class="nx">PassedComponent</span><span class="p">)</span> <span class="o">=&gt;</span>
</span><span class='line'>  <span class="kr">class</span> <span class="nx">WithGists</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">gists</span><span class="o">:</span> <span class="p">[]</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">fetch</span><span class="p">(</span><span class="s2">&quot;https://api.github.com/gists/public&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">r</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">gists</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
</span><span class='line'>        <span class="nx">gists</span><span class="o">:</span> <span class="nx">gists</span>
</span><span class='line'>      <span class="p">}))</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">(</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">PassedComponent</span>
</span><span class='line'>          <span class="p">{...</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">}</span>
</span><span class='line'>          <span class="nx">gists</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">gists</span><span class="p">}</span>
</span><span class='line'>        <span class="o">/&gt;</span>
</span><span class='line'>      <span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">Gists</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">gists</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">gists</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)}</span><span class="o">&lt;</span><span class="err">/pre&gt;</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">GistsList</span> <span class="o">=</span> <span class="nx">withGists</span><span class="p">(</span><span class="nx">Gists</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">GistsList</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="c1">//=&gt; Before api request finishes:</span>
</span><span class='line'><span class="c1">// &lt;Gists gists={[]} /&gt;</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">//=&gt; After api request finishes:</span>
</span><span class='line'><span class="c1">// &lt;Gists gists={[</span>
</span><span class='line'><span class="c1">//  { /* â€¦ */ },</span>
</span><span class='line'><span class="c1">//  { /* â€¦ */ },</span>
</span><span class='line'><span class="c1">//  { /* â€¦ */ }</span>
</span><span class='line'><span class="c1">// ]} /&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>withGists</code> ä¼šä¼ é€’ gist api è°ƒç”¨çš„ç»“æœï¼Œå¹¶ä¸”ä½ å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶ä¸Šä½¿ç”¨ã€‚<a href="https://codesandbox.io/embed/o2YpJnpDj">ç‚¹å‡»è¿™é‡Œ</a> å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ›´åŠ å®Œæ•´çš„ä¾‹å­ã€‚</p>

<h2>ç»“è®ºï¼šé«˜é˜¶ç»„ä»¶æ˜¯ ğŸ”¥ğŸ”¥ğŸ”¥</h2>

<p>react-redux ä¹Ÿæ˜¯ä½¿ç”¨ HOCï¼Œ <a href="https://github.com/reactjs/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options">connect</a> å°†åº”ç”¨ store çš„å€¼ä¼ é€’åˆ°â€œå·²è¿æ¥â€ çš„ç»„ä»¶ã€‚å®ƒè¿˜ä¼šæ‰§è¡Œä¸€äº›é”™è¯¯æ£€æŸ¥å’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¼˜åŒ–ï¼Œå¦‚æœæ‰‹åŠ¨å®Œæˆå°†å¯¼è‡´ç¼–å†™å¤§é‡é‡å¤ä»£ç ã€‚</p>

<p>å¦‚æœä½ å‘ç°è‡ªå·±åœ¨ä¸åŒåœ°æ–¹ç¼–å†™äº†å¤§é‡çš„ä»£ç ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥å°†ä»£ç é‡æ„æˆå¯é‡ç”¨çš„ HOCã€‚</p>

<p>HOCs éå¸¸å…·æœ‰è¡¨ç°åŠ›ï¼Œå¯ä»¥ä½¿ç”¨å®ƒä»¬åˆ›é€ å¾ˆå¤šå¾ˆé…·çš„ä¸œè¥¿ã€‚</p>

<p>å°½å¯èƒ½åœ°ä¿æŒä½ çš„ HOC ç®€å•ï¼Œ<em>ä¸è¦ç¼–å†™éœ€è¦é˜…è¯»é•¿ç¯‡å¤§è®ºæ‰èƒ½ç†è§£çš„ä»£ç </em>ã€‚</p>

<h3>é™„åŠ ç»ƒä¹ </h3>

<p>ä¸‹é¢æœ‰ä¸€äº›ç»ƒä¹ ï¼Œæ¥å·©å›ºå¯¹ HOC çš„ç†è§£ï¼š</p>

<ul>
<li>å†™ä¸€ä¸ªåè½¬å…¶è¾“å…¥çš„ HOC</li>
<li>ç¼–å†™ä¸€ä¸ªHOCï¼Œå°† API ä¸­çš„æ•°æ®æä¾›ç»™ç»„ä»¶</li>
<li>å†™ä¸€ä¸ªHOCæ¥å®ç° <a href="https://facebook.github.io/react/docs/react-component.html#shouldcomponentupdate"><code>shouldComponentUpdate</code></a>ï¼Œ<a href="https://facebook.github.io/react/docs/optimizing-performance.html#avoid-reconciliation">ä»¥é¿å…æ›´æ–°</a>ã€‚</li>
<li>ç¼–å†™ä¸€ä¸ª HOCï¼Œä½¿ç”¨ <a href="https://facebook.github.io/react/docs/react-api.html#react.children.toarray"><code>React.Children.toArray</code></a> å¯¹ä¼ å…¥ç»„ä»¶å­å…ƒç´ è¿›è¡Œæ’åºã€‚</li>
</ul>

</div>
  
    <section>
      <h1>Comments</h1>
      <div id="disqus_thread"><div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'mirreal';
  var disqus_identifier = 'https://blog.mirreal.net/blog/2017/07/19/higher-order-components-for-beginners/';
  var disqus_url = 'https://blog.mirreal.net/blog/2017/07/19/higher-order-components-for-beginners/';
  //var disqus_developer = 1;
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
    </section>
  

</article>

    <p class="meta">
      
        <a class="basic-alignment left nav" href="/blog/2017/06/26/css-animations-vs-web-animations-api-slash/" title="Previous Post: CSS Animations vs Web Animations API">&laquo; CSS Animations vs Web Animations API</a>
      
      
        <a class="basic-alignment right nav" href="/blog/2017/08/09/anonymous-recursion-in-javascript/" title="Next Post: JavaScript ä¸­çš„åŒ¿åé€’å½’">JavaScript ä¸­çš„åŒ¿åé€’å½’ &raquo;</a>
      
    </p>
  </div>
</body>
</html>
